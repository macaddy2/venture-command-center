[{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\AICopilot.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":33,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AnimatePresence"},"fix":{"range":[518,535],"text":""},"desc":"Remove unused variable \"AnimatePresence\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RefreshCw' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":26,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"RefreshCw"},"fix":{"range":[643,654],"text":""},"desc":"Remove unused variable \"RefreshCw\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'addRisk' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":43,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":46},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":70,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2916,2919],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2916,2919],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":81,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3374,3377],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3374,3377],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// AI Copilot View ÔÇö Chat + Insights + NLP Command Engine\r\n// ============================================================\r\n// Feature 14: Natural Language Commands\r\n// Parses user input to execute actions: add tasks, navigate,\r\n// generate reports, surface data, and more.\r\n// ============================================================\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { useStore } from '../lib/store';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    Send, Bot, User, Sparkles, AlertTriangle, Lightbulb,\r\n    TrendingUp, RefreshCw, Zap, Terminal, Command\r\n} from 'lucide-react';\r\nimport { generateId } from '../lib/utils';\r\n\r\ninterface ChatMessage {\r\n    id: string;\r\n    role: 'user' | 'assistant';\r\n    content: string;\r\n    timestamp: string;\r\n    isCommand?: boolean;       // Was this parsed as a command?\r\n    commandAction?: string;    // Human-readable action taken\r\n}\r\n\r\n// ÔöÇÔöÇÔöÇ NLP Command Matcher ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\n// Returns { handled: true, response, action? } if the query\r\n// is a command that was executed, or { handled: false } if it\r\n// was just a question.\r\n\r\ninterface CommandResult {\r\n    handled: boolean;\r\n    response: string;\r\n    action?: string;\r\n}\r\n\r\nfunction tryExecuteCommand(\r\n    raw: string,\r\n    store: ReturnType<typeof useStore>,\r\n): CommandResult {\r\n    const q = raw.toLowerCase().trim();\r\n    const { state, dispatch, addTask, addRisk } = store;\r\n\r\n    // ÔöÇÔöÇ Navigation commands ÔöÇÔöÇ\r\n    const viewMap: Record<string, string> = {\r\n        dashboard: 'dashboard', home: 'dashboard',\r\n        tasks: 'tasks', kanban: 'tasks', board: 'tasks',\r\n        timeline: 'timeline', gantt: 'timeline',\r\n        analytics: 'analytics', charts: 'analytics', stats: 'analytics',\r\n        focus: 'focus', sprint: 'focus', 'focus mode': 'focus',\r\n        financials: 'financials', money: 'financials', budget: 'financials',\r\n        documents: 'documents', docs: 'documents', vault: 'documents',\r\n        risks: 'risks', 'risk matrix': 'risks',\r\n        compare: 'comparisons', comparisons: 'comparisons',\r\n        recurring: 'recurring', 'recurring tasks': 'recurring',\r\n        resources: 'resources', sharing: 'resources',\r\n        digest: 'digest', 'weekly digest': 'digest',\r\n        settings: 'settings', config: 'settings',\r\n        alerts: 'alerts', 'predictive alerts': 'alerts',\r\n        standup: 'standup', 'standup report': 'standup',\r\n    };\r\n\r\n    // \"go to X\", \"open X\", \"show me X\", \"navigate to X\", \"switch to X\"\r\n    const navMatch = q.match(/^(?:go to|open|show me|navigate to|switch to|take me to)\\s+(.+)$/);\r\n    if (navMatch) {\r\n        const target = navMatch[1].replace(/the\\s+/g, '').trim();\r\n        const viewKey = viewMap[target];\r\n        if (viewKey) {\r\n            dispatch({ type: 'SET_ACTIVE_VIEW', payload: viewKey as any });\r\n            return { handled: true, response: `Ô£à Navigated to **${target}** view.`, action: `Navigated to ${target}` };\r\n        }\r\n    }\r\n\r\n    // \"show X\" (shorter version)\r\n    const showMatch = q.match(/^show\\s+(.+)$/);\r\n    if (showMatch) {\r\n        const target = showMatch[1].replace(/the\\s+/g, '').trim();\r\n        const viewKey = viewMap[target];\r\n        if (viewKey) {\r\n            dispatch({ type: 'SET_ACTIVE_VIEW', payload: viewKey as any });\r\n            return { handled: true, response: `Ô£à Opened **${target}** view.`, action: `Opened ${target}` };\r\n        }\r\n    }\r\n\r\n    // ÔöÇÔöÇ Add task command ÔöÇÔöÇ\r\n    // \"add task <title> to <venture>\" or \"create task <title> for <venture>\"\r\n    const addTaskMatch = q.match(/^(?:add|create)\\s+(?:a\\s+)?task\\s+[\"\"\"]?(.+?)[\"\"\"]?\\s+(?:to|for|in)\\s+(.+)$/);\r\n    if (addTaskMatch) {\r\n        const title = addTaskMatch[1].trim();\r\n        const ventureName = addTaskMatch[2].trim();\r\n        const venture = state.ventures.find(v =>\r\n            v.name.toLowerCase() === ventureName ||\r\n            v.prefix.toLowerCase() === ventureName\r\n        );\r\n        if (venture) {\r\n            addTask({\r\n                venture_id: venture.id,\r\n                title: title.charAt(0).toUpperCase() + title.slice(1),\r\n                status: 'todo',\r\n                priority: 'P1',\r\n            });\r\n            return {\r\n                handled: true,\r\n                response: `Ô£à Created task **\"${title}\"** in **${venture.name}** (P1, Todo).`,\r\n                action: `Added task \"${title}\" to ${venture.name}`,\r\n            };\r\n        } else {\r\n            return {\r\n                handled: true,\r\n                response: `ÔÜá´©Å I couldn't find a venture matching **\"${ventureName}\"**. Available: ${state.ventures.map(v => v.prefix).join(', ')}`,\r\n            };\r\n        }\r\n    }\r\n\r\n    // ÔöÇÔöÇ Add P0 task ÔöÇÔöÇ\r\n    const addP0Match = q.match(/^(?:add|create)\\s+(?:a\\s+)?(?:p0|critical|urgent)\\s+task\\s+[\"\"\"]?(.+?)[\"\"\"]?\\s+(?:to|for|in)\\s+(.+)$/);\r\n    if (addP0Match) {\r\n        const title = addP0Match[1].trim();\r\n        const ventureName = addP0Match[2].trim();\r\n        const venture = state.ventures.find(v =>\r\n            v.name.toLowerCase() === ventureName ||\r\n            v.prefix.toLowerCase() === ventureName\r\n        );\r\n        if (venture) {\r\n            addTask({\r\n                venture_id: venture.id,\r\n                title: title.charAt(0).toUpperCase() + title.slice(1),\r\n                status: 'todo',\r\n                priority: 'P0',\r\n            });\r\n            return {\r\n                handled: true,\r\n                response: `­ƒö┤ Created **P0 critical** task **\"${title}\"** in **${venture.name}**.`,\r\n                action: `Added P0 task \"${title}\" to ${venture.name}`,\r\n            };\r\n        }\r\n    }\r\n\r\n    // ÔöÇÔöÇ Mark task done ÔöÇÔöÇ\r\n    // \"mark <task> as done\", \"complete <task>\"\r\n    const doneMatch = q.match(/^(?:mark|set)\\s+[\"\"\"]?(.+?)[\"\"\"]?\\s+(?:as\\s+)?(?:done|complete|completed|finished)$/) ||\r\n        q.match(/^(?:complete|finish|close)\\s+[\"\"\"]?(.+?)[\"\"\"]?$/);\r\n    if (doneMatch) {\r\n        const taskName = doneMatch[1].trim().toLowerCase();\r\n        const task = state.tasks.find(t =>\r\n            t.title.toLowerCase().includes(taskName) && t.status !== 'done'\r\n        );\r\n        if (task) {\r\n            dispatch({\r\n                type: 'UPDATE_TASK',\r\n                payload: { ...task, status: 'done', updated_at: new Date().toISOString() },\r\n            });\r\n            const v = state.ventures.find(v => v.id === task.venture_id);\r\n            return {\r\n                handled: true,\r\n                response: `Ô£à Marked **\"${task.title}\"** as done! (${v?.name})`,\r\n                action: `Completed \"${task.title}\"`,\r\n            };\r\n        } else {\r\n            return {\r\n                handled: true,\r\n                response: `ÔÜá´©Å Couldn't find an open task matching **\"${taskName}\"**.`,\r\n            };\r\n        }\r\n    }\r\n\r\n    // ÔöÇÔöÇ Quick action: unblock ÔöÇÔöÇ\r\n    const unblockMatch = q.match(/^unblock\\s+[\"\"\"]?(.+?)[\"\"\"]?$/);\r\n    if (unblockMatch) {\r\n        const taskName = unblockMatch[1].trim().toLowerCase();\r\n        const task = state.tasks.find(t =>\r\n            t.title.toLowerCase().includes(taskName) && t.status === 'blocked'\r\n        );\r\n        if (task) {\r\n            dispatch({\r\n                type: 'UPDATE_TASK',\r\n                payload: { ...task, status: 'todo', updated_at: new Date().toISOString() },\r\n            });\r\n            const v = state.ventures.find(v => v.id === task.venture_id);\r\n            return {\r\n                handled: true,\r\n                response: `­ƒöô Unblocked **\"${task.title}\"** ÔÇö moved to Todo. (${v?.name})`,\r\n                action: `Unblocked \"${task.title}\"`,\r\n            };\r\n        }\r\n    }\r\n\r\n    // ÔöÇÔöÇ Select venture ÔöÇÔöÇ\r\n    const selectMatch = q.match(/^(?:select|focus on|switch to venture)\\s+(.+)$/);\r\n    if (selectMatch) {\r\n        const name = selectMatch[1].trim().toLowerCase();\r\n        const venture = state.ventures.find(v =>\r\n            v.name.toLowerCase() === name || v.prefix.toLowerCase() === name\r\n        );\r\n        if (venture) {\r\n            dispatch({ type: 'SELECT_VENTURE', payload: venture.id });\r\n            return {\r\n                handled: true,\r\n                response: `­ƒÄ» Selected **${venture.name}** (${venture.prefix}). The sidebar and views will filter to this venture.`,\r\n                action: `Selected venture ${venture.name}`,\r\n            };\r\n        }\r\n    }\r\n\r\n    // ÔöÇÔöÇ Count commands ÔöÇÔöÇ\r\n    if (q.match(/^(?:how many|count)\\s+(?:tasks|items)\\s+(?:in|for|does)\\s+(.+?)(?:\\s+have)?$/)) {\r\n        const match = q.match(/(?:in|for|does)\\s+(.+?)(?:\\s+have)?$/);\r\n        if (match) {\r\n            const name = match[1].trim().toLowerCase();\r\n            const venture = state.ventures.find(v =>\r\n                v.name.toLowerCase() === name || v.prefix.toLowerCase() === name\r\n            );\r\n            if (venture) {\r\n                const tasks = state.tasks.filter(t => t.venture_id === venture.id);\r\n                const done = tasks.filter(t => t.status === 'done').length;\r\n                const ip = tasks.filter(t => t.status === 'in-progress').length;\r\n                const blocked = tasks.filter(t => t.status === 'blocked').length;\r\n                return {\r\n                    handled: true,\r\n                    response: `­ƒôè **${venture.name}** has **${tasks.length} tasks**:\\n\\nÔÇó Ô£à ${done} done\\nÔÇó ­ƒöä ${ip} in progress\\nÔÇó Ôøö ${blocked} blocked\\nÔÇó ­ƒôï ${tasks.length - done - ip - blocked} other`,\r\n                };\r\n            }\r\n        }\r\n    }\r\n\r\n    // ÔöÇÔöÇ Clear localStorage / reset ÔöÇÔöÇ\r\n    if (q === 'reset data' || q === 'clear data' || q === 'factory reset') {\r\n        return {\r\n            handled: true,\r\n            response: `ÔÜá´©Å To reset all data, go to **Settings** ÔåÆ click \"Reset Data\". This will clear localStorage and reload seed data.\\n\\nI won't do this automatically to prevent accidental data loss.`,\r\n        };\r\n    }\r\n\r\n    // ÔöÇÔöÇ Help / list commands ÔöÇÔöÇ\r\n    if (q === 'help' || q === 'commands' || q === '?' || q.includes('what can you do')) {\r\n        return {\r\n            handled: true,\r\n            response: `­ƒñû **Available Commands:**\\n\\n**Navigation:**\\nÔÇó \\`go to [view]\\` ÔÇö dashboard, tasks, timeline, analytics, focus, financials, documents, risks, alerts, standup, etc.\\n\\n**Task Management:**\\nÔÇó \\`add task \"title\" to [venture]\\`\\nÔÇó \\`add P0 task \"title\" to [venture]\\`\\nÔÇó \\`mark \"task name\" as done\\`\\nÔÇó \\`unblock \"task name\"\\`\\n\\n**Data Queries:**\\nÔÇó \\`how many tasks in [venture]\\`\\nÔÇó \\`show health scores\\`\\nÔÇó \\`what's blocking?\\`\\nÔÇó \\`portfolio summary\\`\\n\\n**Venture:**\\nÔÇó \\`select [venture]\\` ÔÇö filter to a specific venture\\n\\nTry any of these! I also answer natural language questions about your portfolio.`,\r\n        };\r\n    }\r\n\r\n    return { handled: false, response: '' };\r\n}\r\n\r\n// ÔöÇÔöÇÔöÇ AI Response Generator ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\nfunction generateAIResponse(query: string, store: ReturnType<typeof useStore>): string {\r\n    const q = query.toLowerCase();\r\n    const { venturesWithStats, portfolioStats, state } = store;\r\n\r\n    if (q.includes('block') || q.includes('stuck')) {\r\n        const blocked = state.tasks.filter(t => t.status === 'blocked');\r\n        if (blocked.length === 0) return \"Ô£à Great news ÔÇö there are no blocked tasks across any of your ventures right now. Keep the momentum going!\";\r\n        const lines = blocked.map(t => {\r\n            const v = state.ventures.find(v => v.id === t.venture_id);\r\n            return `ÔÇó **${v?.name || 'Unknown'}**: ${t.title}`;\r\n        });\r\n        return `ÔÜá´©Å You have **${blocked.length} blocked task${blocked.length > 1 ? 's' : ''}**:\\n\\n${lines.join('\\n')}\\n\\nI'd recommend resolving the P0 blockers first ÔÇö they're likely holding up downstream work.`;\r\n    }\r\n\r\n    if (q.includes('focus') || q.includes('priority') || q.includes('this week') || q.includes('today')) {\r\n        const activeVentures = venturesWithStats.filter(v => v.tier === 'Active Build');\r\n        const p0Tasks = state.tasks.filter(t => t.priority === 'P0' && t.status !== 'done');\r\n        return `­ƒÄ» **This week's focus areas:**\\n\\n1. **${activeVentures[0]?.name}** ÔÇö ${activeVentures[0]?.tasks.inProgress} tasks in progress, health score: ${activeVentures[0]?.healthScore}/100\\n2. **${activeVentures[1]?.name || 'DepositGuard'}** ÔÇö has ${p0Tasks.filter(t => t.venture_id === activeVentures[1]?.id).length} P0 tasks pending\\n\\n­ƒôï You have **${p0Tasks.length} P0 (critical) tasks** across all ventures that aren't done yet. I'd prioritize:\\nÔÇó Unblocking registration/banking tasks\\nÔÇó Continuing active development sprints\\nÔÇó Reviewing any tasks in the \"review\" column`;\r\n    }\r\n\r\n    if (q.includes('summary') || q.includes('overview') || q.includes('status')) {\r\n        return `­ƒôè **Portfolio Summary (${new Date().toLocaleDateString('en-GB', { day: 'numeric', month: 'long', year: 'numeric' })}):**\\n\\nÔÇó **${portfolioStats.totalVentures} ventures** (${state.ventures.filter(v => v.geo === 'UK').length} UK, ${state.ventures.filter(v => v.geo === 'NG').length} NG)\\nÔÇó **${portfolioStats.doneTasks}/${portfolioStats.totalTasks} tasks completed** (${portfolioStats.totalTasks > 0 ? Math.round((portfolioStats.doneTasks / portfolioStats.totalTasks) * 100) : 0}%)\\nÔÇó **${portfolioStats.blockedTasks} blocked tasks** across the portfolio\\nÔÇó **${portfolioStats.filledTeam}/${portfolioStats.totalTeam} roles filled** (${portfolioStats.totalTeam - portfolioStats.filledTeam} positions to hire)\\nÔÇó **Average health score: ${portfolioStats.avgHealth}/100**\\n\\n­ƒÅå Top performer: **${venturesWithStats.reduce((best, v) => v.healthScore > best.healthScore ? v : best, venturesWithStats[0]).name}**\\nÔÜá´©Å Needs attention: **${venturesWithStats.reduce((worst, v) => v.healthScore < worst.healthScore ? v : worst, venturesWithStats[0]).name}**`;\r\n    }\r\n\r\n    if (q.includes('trucycle') || q.includes('tc')) {\r\n        const tc = venturesWithStats.find(v => v.prefix === 'TC');\r\n        if (!tc) return \"I couldn't find data for TruCycle.\";\r\n        return `­ƒƒó **TruCycle Update:**\\n\\nÔÇó Stage: ${tc.stage}\\nÔÇó Health: ${tc.healthScore}/100\\nÔÇó Tasks: ${tc.tasks.done}/${tc.tasks.total} done (${tc.tasks.inProgress} in progress, ${tc.tasks.blocked} blocked)\\nÔÇó Team: ${tc.team.filled}/${tc.team.total} roles filled\\nÔÇó Next milestone: ${tc.milestones[0]?.name || 'None'} (${tc.milestones[0]?.target_date || 'N/A'})\\n\\n­ƒÆí **Recommendation:** Focus on hiring a CTO and unblocking the bank account task to maintain momentum toward the June MVP launch.`;\r\n    }\r\n\r\n    if (q.includes('depositguard') || q.includes('dg')) {\r\n        const dg = venturesWithStats.find(v => v.prefix === 'DG');\r\n        if (!dg) return \"I couldn't find data for DepositGuard.\";\r\n        return `­ƒöÁ **DepositGuard Update:**\\n\\nÔÇó Stage: ${dg.stage}\\nÔÇó Health: ${dg.healthScore}/100\\nÔÇó Tasks: ${dg.tasks.done}/${dg.tasks.total} done (${dg.tasks.inProgress} in progress, ${dg.tasks.blocked} blocked)\\nÔÇó Team: ${dg.team.filled}/${dg.team.total} roles filled\\n\\n­ƒÆí **Recommendation:** Prioritize Ltd registration (blocked) and hire a lead developer to accelerate DepositFlow development.`;\r\n    }\r\n\r\n    if (q.includes('fixars') || q.includes('fx')) {\r\n        const fx = venturesWithStats.find(v => v.prefix === 'FX');\r\n        if (!fx) return \"I couldn't find data for Fixars.\";\r\n        return `­ƒƒá **Fixars Update:**\\n\\nÔÇó Stage: ${fx.stage}\\nÔÇó Health: ${fx.healthScore}/100\\nÔÇó Tasks: ${fx.tasks.done}/${fx.tasks.total} done (${fx.tasks.inProgress} in progress, ${fx.tasks.blocked} blocked)\\nÔÇó Sub-apps: ConceptNexus, SkillsCanvas, CollabBoard, VestDen, PayPaddy, FaShop\\n\\n­ƒÆí **Recommendation:** Complete CAC registration, then focus on auth/identity layer before expanding sub-apps.`;\r\n    }\r\n\r\n    if (q.includes('pathmate') || q.includes('pm')) {\r\n        const pm = venturesWithStats.find(v => v.prefix === 'PM');\r\n        if (!pm) return \"I couldn't find data for PathMate.\";\r\n        return `­ƒƒú **PathMate Update:**\\n\\nÔÇó Stage: ${pm.stage}\\nÔÇó Health: ${pm.healthScore}/100\\nÔÇó Tasks: ${pm.tasks.done}/${pm.tasks.total} done (${pm.tasks.inProgress} in progress)\\n\\n­ƒÆí **Recommendation:** Complete competitive analysis and regulatory research before committing to development. The UK rideshare market is heavily regulated.`;\r\n    }\r\n\r\n    if (q.includes('health') || q.includes('score')) {\r\n        const sorted = [...venturesWithStats].sort((a, b) => b.healthScore - a.healthScore);\r\n        const lines = sorted.map((v, i) => {\r\n            const bar = v.healthScore >= 60 ? '­ƒƒó' : v.healthScore >= 35 ? '­ƒƒí' : '­ƒö┤';\r\n            return `${i + 1}. ${bar} **${v.name}** ÔÇö ${v.healthScore}/100`;\r\n        });\r\n        return `­ƒôê **Health Scores (ranked):**\\n\\n${lines.join('\\n')}\\n\\nHealth considers: task velocity (30%), blockers (20%), team coverage (20%), milestone progress (20%), and registrations (10%).`;\r\n    }\r\n\r\n    if (q.includes('suggest') || q.includes('recommend') || q.includes('todo') || q.includes('what should')) {\r\n        return `­ƒÆí **Suggested Next Actions:**\\n\\n1. ­ƒÅª **TruCycle** ÔÇö Open business bank account (blocked, P0)\\n2. ­ƒôØ **DepositGuard** ÔÇö Complete Ltd registration (blocked, P0)\\n3. ­ƒæÑ **Hiring** ÔÇö Post CTO role for TruCycle (critical for MVP)\\n4. ­ƒôè **Fixars** ÔÇö Finish CAC filing (in progress)\\n5. ­ƒö¼ **PathMate** ÔÇö Complete competitive analysis before May deadline\\n\\n­ƒÆ¼ You can say \\`add task \"title\" to TC\\` to create tasks right from here!`;\r\n    }\r\n\r\n    if (q.includes('hire') || q.includes('team') || q.includes('role')) {\r\n        const openRoles = state.teamRoles.filter(r => r.status === 'hiring');\r\n        const lines = openRoles.map(r => {\r\n            const v = state.ventures.find(v => v.id === r.venture_id);\r\n            return `ÔÇó **${v?.name}** ÔÇö ${r.role_name}`;\r\n        });\r\n        return `­ƒæÑ **Open Hiring Positions (${openRoles.length}):**\\n\\n${lines.join('\\n')}\\n\\n­ƒôî I'd prioritize the **CTO for TruCycle** and **Lead Developer for DepositGuard** ÔÇö these are blocking active development.`;\r\n    }\r\n\r\n    if (q.includes('risk') || q.includes('danger')) {\r\n        const active = state.risks.filter(r => r.status === 'active');\r\n        if (active.length === 0) return 'Ô£à No active risks in your portfolio. Consider doing a risk review to surface any hidden concerns.';\r\n        const lines = active.map(r => {\r\n            const v = state.ventures.find(v => v.id === r.venture_id);\r\n            const color = r.likelihood >= 3 && r.impact >= 4 ? '­ƒö┤' : '­ƒƒí';\r\n            return `ÔÇó ${color} **${v?.name}**: ${r.title} (L${r.likelihood}├ùI${r.impact})`;\r\n        });\r\n        return `ÔÜá´©Å **Active Risks (${active.length}):**\\n\\n${lines.join('\\n')}\\n\\nSay \\`go to risks\\` to open the Risk Matrix.`;\r\n    }\r\n\r\n    return `I understand your question about \"${query}\". Here's what I can help with:\\n\\n**Commands** (type \\`help\\` for full list):\\nÔÇó \\`go to [view]\\` ÔÇö Navigate views\\nÔÇó \\`add task \"title\" to [venture]\\` ÔÇö Create tasks\\nÔÇó \\`mark \"task\" as done\\` ÔÇö Complete tasks\\nÔÇó \\`unblock \"task\"\\` ÔÇö Move blocked ÔåÆ todo\\n\\n**Questions:**\\nÔÇó \"What's blocking?\" ┬À \"Portfolio summary\"\\nÔÇó \"Health scores\" ┬À \"TruCycle status\"\\nÔÇó \"Suggest actions\" ┬À \"Team status\"\\n\\nIn production, I'll connect to your OpenAI API key for more intelligent analysis.`;\r\n}\r\n\r\nexport default function AICopilot() {\r\n    const store = useStore();\r\n    const { state, addInsight } = store;\r\n    const [messages, setMessages] = useState<ChatMessage[]>([\r\n        {\r\n            id: 'welcome',\r\n            role: 'assistant',\r\n            content: `­ƒæï **Hey Ade!** I'm your Venture Command Center AI copilot.\\n\\nI can **answer questions** and **execute commands** using natural language:\\n\\n**Commands:**\\nÔÇó \\`go to timeline\\` ÔÇö Navigate views\\nÔÇó \\`add task \"Build API\" to TC\\` ÔÇö Create tasks\\nÔÇó \\`mark \"CI/CD\" as done\\` ÔÇö Complete tasks\\nÔÇó \\`help\\` ÔÇö See all commands\\n\\n**Questions:**\\nÔÇó \"What should I focus on this week?\"\\nÔÇó \"What's blocking my ventures?\"\\nÔÇó \"Give me a portfolio summary\"\\n\\nType \\`help\\` for a full command reference! ­ƒÜÇ`,\r\n            timestamp: new Date().toISOString(),\r\n        },\r\n    ]);\r\n    const [input, setInput] = useState('');\r\n    const [isTyping, setIsTyping] = useState(false);\r\n    const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n    useEffect(() => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    }, [messages]);\r\n\r\n    const handleSend = async () => {\r\n        if (!input.trim()) return;\r\n\r\n        const userMsg: ChatMessage = {\r\n            id: generateId(),\r\n            role: 'user',\r\n            content: input.trim(),\r\n            timestamp: new Date().toISOString(),\r\n        };\r\n\r\n        setMessages(prev => [...prev, userMsg]);\r\n        setInput('');\r\n        setIsTyping(true);\r\n\r\n        // Try command execution first\r\n        const cmdResult = tryExecuteCommand(userMsg.content, store);\r\n\r\n        // Simulate AI thinking delay\r\n        await new Promise(resolve => setTimeout(resolve, cmdResult.handled ? 400 : 800 + Math.random() * 1200));\r\n\r\n        let response: string;\r\n        let isCommand = false;\r\n        let commandAction: string | undefined;\r\n\r\n        if (cmdResult.handled) {\r\n            response = cmdResult.response;\r\n            isCommand = true;\r\n            commandAction = cmdResult.action;\r\n        } else {\r\n            response = generateAIResponse(userMsg.content, store);\r\n        }\r\n\r\n        const assistantMsg: ChatMessage = {\r\n            id: generateId(),\r\n            role: 'assistant',\r\n            content: response,\r\n            timestamp: new Date().toISOString(),\r\n            isCommand,\r\n            commandAction,\r\n        };\r\n\r\n        setMessages(prev => [...prev, assistantMsg]);\r\n        setIsTyping(false);\r\n    };\r\n\r\n    const handleKeyDown = (e: React.KeyboardEvent) => {\r\n        if (e.key === 'Enter' && !e.shiftKey) {\r\n            e.preventDefault();\r\n            handleSend();\r\n        }\r\n    };\r\n\r\n    // Quick action buttons\r\n    const quickActions = [\r\n        { label: 'Summary', query: 'Give me a portfolio summary', icon: TrendingUp },\r\n        { label: 'Blocked?', query: 'What\\'s blocking my ventures?', icon: AlertTriangle },\r\n        { label: 'Suggest', query: 'Suggest next actions', icon: Lightbulb },\r\n        { label: 'Health', query: 'Show health scores', icon: Sparkles },\r\n        { label: 'Commands', query: 'help', icon: Terminal },\r\n    ];\r\n\r\n    // Generate insights\r\n    const handleGenerateInsights = () => {\r\n        addInsight({\r\n            venture_id: null,\r\n            type: 'summary',\r\n            title: 'Weekly Portfolio Digest',\r\n            content: `Your portfolio has ${store.portfolioStats.totalVentures} ventures with ${store.portfolioStats.blockedTasks} blocked tasks. Average health: ${store.portfolioStats.avgHealth}/100. Focus on unblocking P0 tasks in TruCycle and DepositGuard.`,\r\n            severity: store.portfolioStats.blockedTasks > 0 ? 'warning' : 'info',\r\n            is_read: false,\r\n        });\r\n\r\n        // Add deadline alerts as insights\r\n        const now = new Date();\r\n        state.milestones.forEach(m => {\r\n            const target = new Date(m.target_date);\r\n            const daysUntil = Math.ceil((target.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\r\n            const v = state.ventures.find(v => v.id === m.venture_id);\r\n            if (daysUntil <= 30 && daysUntil > 0 && m.progress < 50) {\r\n                addInsight({\r\n                    venture_id: m.venture_id,\r\n                    type: 'alert',\r\n                    title: `${v?.prefix}: \"${m.name}\" at risk`,\r\n                    content: `Due in ${daysUntil} days but only ${m.progress}% done. Consider accelerating or adjusting timeline.`,\r\n                    severity: daysUntil <= 14 ? 'critical' : 'warning',\r\n                    is_read: false,\r\n                });\r\n            }\r\n        });\r\n\r\n        // Add risk-based insights\r\n        state.risks.filter(r => r.status === 'active' && r.likelihood >= 4 && r.impact >= 4).forEach(r => {\r\n            const v = state.ventures.find(v => v.id === r.venture_id);\r\n            addInsight({\r\n                venture_id: r.venture_id,\r\n                type: 'alert',\r\n                title: `High Risk: ${r.title}`,\r\n                content: `${v?.name}: ${r.description || 'Critical risk active'}.${r.mitigation ? ' Mitigation: ' + r.mitigation : ''}`,\r\n                severity: 'critical',\r\n                is_read: false,\r\n            });\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div style={{ display: 'grid', gridTemplateColumns: '1fr 320px', gap: 'var(--space-5)', height: 'calc(100vh - var(--header-height) - var(--space-12))' }}>\r\n            {/* Chat */}\r\n            <div className=\"ai-chat-panel\">\r\n                {/* Quick Actions */}\r\n                <div style={{\r\n                    padding: 'var(--space-3) var(--space-4)',\r\n                    borderBottom: '1px solid var(--border-color)',\r\n                    display: 'flex', gap: 'var(--space-2)', flexWrap: 'wrap',\r\n                }}>\r\n                    {quickActions.map(a => (\r\n                        <button\r\n                            key={a.label}\r\n                            className=\"btn btn-secondary btn-sm\"\r\n                            onClick={() => { setInput(a.query); }}\r\n                            style={{ fontSize: 'var(--font-size-xs)' }}\r\n                        >\r\n                            <a.icon size={12} />\r\n                            {a.label}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Messages */}\r\n                <div className=\"ai-chat-messages\">\r\n                    {messages.map(msg => (\r\n                        <motion.div\r\n                            key={msg.id}\r\n                            className={`ai-message ${msg.role}`}\r\n                            initial={{ opacity: 0, y: 8 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            transition={{ duration: 0.2 }}\r\n                        >\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: 6, marginBottom: 6 }}>\r\n                                {msg.role === 'assistant' ? <Bot size={13} /> : <User size={13} />}\r\n                                <span style={{ fontSize: 'var(--font-size-xs)', opacity: 0.7 }}>\r\n                                    {msg.role === 'assistant' ? 'VCC Copilot' : 'You'}\r\n                                </span>\r\n                                {msg.isCommand && msg.commandAction && (\r\n                                    <span style={{\r\n                                        fontSize: 'var(--font-size-xs)',\r\n                                        padding: '1px 6px',\r\n                                        borderRadius: 'var(--border-radius-full)',\r\n                                        background: 'var(--color-success)20',\r\n                                        color: 'var(--color-success)',\r\n                                        fontWeight: 600,\r\n                                    }}>\r\n                                        <Command size={8} style={{ display: 'inline', marginRight: 3 }} />\r\n                                        {msg.commandAction}\r\n                                    </span>\r\n                                )}\r\n                            </div>\r\n                            <div style={{ whiteSpace: 'pre-wrap' }}\r\n                                dangerouslySetInnerHTML={{\r\n                                    __html: msg.content\r\n                                        .replace(/`([^`]+)`/g, '<code style=\"background:var(--color-bg-secondary);padding:1px 5px;border-radius:3px;font-size:0.9em\">$1</code>')\r\n                                        .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\r\n                                        .replace(/\\n/g, '<br/>')\r\n                                }}\r\n                            />\r\n                        </motion.div>\r\n                    ))}\r\n                    {isTyping && (\r\n                        <div className=\"ai-message assistant\" style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\r\n                            <Bot size={13} />\r\n                            <span className=\"animate-pulse\" style={{ fontSize: 'var(--font-size-sm)' }}>Thinking...</span>\r\n                        </div>\r\n                    )}\r\n                    <div ref={messagesEndRef} />\r\n                </div>\r\n\r\n                {/* Input */}\r\n                <div className=\"ai-chat-input-area\">\r\n                    <textarea\r\n                        className=\"ai-chat-input\"\r\n                        placeholder='Ask questions or type commands like \"add task ...\" or \"go to timeline\"'\r\n                        value={input}\r\n                        onChange={e => setInput(e.target.value)}\r\n                        onKeyDown={handleKeyDown}\r\n                        rows={1}\r\n                    />\r\n                    <button className=\"btn btn-primary\" onClick={handleSend} disabled={!input.trim() || isTyping}>\r\n                        <Send size={16} />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Insights Panel */}\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: 'var(--space-4)' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n                    <h3 style={{ fontSize: 'var(--font-size-md)', fontWeight: 600, color: 'var(--color-text-primary)' }}>\r\n                        <Sparkles size={14} style={{ display: 'inline', marginRight: 6 }} />\r\n                        AI Insights\r\n                    </h3>\r\n                    <button className=\"btn btn-secondary btn-sm\" onClick={handleGenerateInsights}>\r\n                        <Zap size={12} />\r\n                        Generate\r\n                    </button>\r\n                </div>\r\n\r\n                <div style={{ flex: 1, overflowY: 'auto' }}>\r\n                    {state.aiInsights.length === 0 ? (\r\n                        <div className=\"empty-state\" style={{ padding: 'var(--space-8)' }}>\r\n                            <Sparkles size={32} style={{ opacity: 0.2, marginBottom: 'var(--space-3)' }} />\r\n                            <div className=\"empty-state-title\">No insights yet</div>\r\n                            <div className=\"empty-state-text\">\r\n                                Click \"Generate\" to create AI-powered insights about your portfolio.\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        state.aiInsights.map(insight => (\r\n                            <div\r\n                                key={insight.id}\r\n                                className={`insight-card${!insight.is_read ? ' unread' : ''}`}\r\n                                style={{\r\n                                    '--insight-color': insight.severity === 'critical' ? 'var(--color-danger)'\r\n                                        : insight.severity === 'warning' ? 'var(--color-warning)'\r\n                                            : 'var(--color-info)',\r\n                                } as React.CSSProperties}\r\n                                onClick={() => store.dispatch({ type: 'MARK_INSIGHT_READ', payload: insight.id })}\r\n                            >\r\n                                <div style={{\r\n                                    fontSize: 'var(--font-size-sm)', fontWeight: 600,\r\n                                    color: 'var(--color-text-primary)', marginBottom: 4,\r\n                                }}>\r\n                                    {insight.severity === 'critical' ? '­ƒÜ¿' : insight.severity === 'warning' ? 'ÔÜá´©Å' : '­ƒÆí'}{' '}\r\n                                    {insight.title}\r\n                                </div>\r\n                                <div style={{\r\n                                    fontSize: 'var(--font-size-xs)',\r\n                                    color: 'var(--color-text-secondary)',\r\n                                    lineHeight: 1.5,\r\n                                }}>\r\n                                    {insight.content}\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\Analytics.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RadarChart' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":57,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"RadarChart"},"fix":{"range":[373,385],"text":""},"desc":"Remove unused variable \"RadarChart\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PolarGrid' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"PolarGrid"},"fix":{"range":[385,401],"text":""},"desc":"Remove unused variable \"PolarGrid\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PolarAngleAxis' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":30,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"PolarAngleAxis"},"fix":{"range":[401,417],"text":""},"desc":"Remove unused variable \"PolarAngleAxis\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PolarRadiusAxis' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":47,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"PolarRadiusAxis"},"fix":{"range":[417,434],"text":""},"desc":"Remove unused variable \"PolarRadiusAxis\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Radar' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":54,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Radar"},"fix":{"range":[434,441],"text":""},"desc":"Remove unused variable \"Radar\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CHART_COLORS' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":15,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'portfolioStats' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":18,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'radarData' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":56,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// Analytics View ÔÇö Charts and Health Scores\r\n// ============================================================\r\n\r\nimport { useStore } from '../lib/store';\r\nimport { motion } from 'framer-motion';\r\nimport {\r\n    BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip,\r\n    ResponsiveContainer, PieChart, Pie, Cell, RadarChart,\r\n    PolarGrid, PolarAngleAxis, PolarRadiusAxis, Radar,\r\n    AreaChart, Area\r\n} from 'recharts';\r\nimport { Activity, Target, Users, TrendingUp } from 'lucide-react';\r\n\r\nconst CHART_COLORS = ['#6366F1', '#8B5CF6', '#10B981', '#F59E0B', '#EF4444', '#3B82F6', '#EC4899', '#14B8A6', '#F97316', '#64748B'];\r\n\r\nexport default function Analytics() {\r\n    const { venturesWithStats, portfolioStats, state } = useStore();\r\n\r\n    // Task distribution by status\r\n    const taskStatusData = [\r\n        { name: 'Done', value: state.tasks.filter(t => t.status === 'done').length, color: '#10B981' },\r\n        { name: 'In Progress', value: state.tasks.filter(t => t.status === 'in-progress').length, color: '#6366F1' },\r\n        { name: 'Todo', value: state.tasks.filter(t => t.status === 'todo').length, color: '#3B82F6' },\r\n        { name: 'Review', value: state.tasks.filter(t => t.status === 'review').length, color: '#8B5CF6' },\r\n        { name: 'Blocked', value: state.tasks.filter(t => t.status === 'blocked').length, color: '#EF4444' },\r\n        { name: 'Backlog', value: state.tasks.filter(t => t.status === 'backlog').length, color: '#64748B' },\r\n    ];\r\n\r\n    // Tasks per venture\r\n    const tasksByVenture = venturesWithStats\r\n        .filter(v => v.tasks.total > 0)\r\n        .map(v => ({\r\n            name: v.prefix,\r\n            fullName: v.name,\r\n            done: v.tasks.done,\r\n            active: v.tasks.inProgress,\r\n            blocked: v.tasks.blocked,\r\n            remaining: v.tasks.backlog + v.tasks.todo + v.tasks.review,\r\n            total: v.tasks.total,\r\n            color: v.color,\r\n        }))\r\n        .sort((a, b) => b.total - a.total);\r\n\r\n    // Health scores comparison\r\n    const healthData = venturesWithStats\r\n        .filter(v => v.tier !== 'Parked')\r\n        .map(v => ({\r\n            name: v.prefix,\r\n            fullName: v.name,\r\n            health: v.healthScore,\r\n            color: v.color,\r\n        }));\r\n\r\n    // Radar chart for active ventures\r\n    const radarData = venturesWithStats\r\n        .filter(v => v.tier !== 'Parked' && v.tasks.total > 0)\r\n        .map(v => ({\r\n            venture: v.prefix,\r\n            'Task Progress': v.tasks.total > 0 ? Math.round((v.tasks.done / v.tasks.total) * 100) : 0,\r\n            'Team Coverage': v.team.total > 0 ? Math.round((v.team.filled / v.team.total) * 100) : 0,\r\n            'Registration': Math.round((v.regs.completedCount / 4) * 100),\r\n            'Milestone Progress': v.milestones.length > 0\r\n                ? Math.round(v.milestones.reduce((s, m) => s + m.progress, 0) / v.milestones.length)\r\n                : 0,\r\n        }));\r\n\r\n    // Priority distribution\r\n    const priorityData = [\r\n        { name: 'P0 Critical', value: state.tasks.filter(t => t.priority === 'P0' && t.status !== 'done').length, color: '#EF4444' },\r\n        { name: 'P1 High', value: state.tasks.filter(t => t.priority === 'P1' && t.status !== 'done').length, color: '#F59E0B' },\r\n        { name: 'P2 Medium', value: state.tasks.filter(t => t.priority === 'P2' && t.status !== 'done').length, color: '#EAB308' },\r\n        { name: 'P3 Low', value: state.tasks.filter(t => t.priority === 'P3' && t.status !== 'done').length, color: '#64748B' },\r\n    ];\r\n\r\n    // Simulated velocity data (would be real in production)\r\n    const velocityData = [\r\n        { week: 'W1', tasks: 3 },\r\n        { week: 'W2', tasks: 5 },\r\n        { week: 'W3', tasks: 4 },\r\n        { week: 'W4', tasks: 7 },\r\n        { week: 'W5', tasks: 6 },\r\n        { week: 'W6', tasks: 8 },\r\n        { week: 'W7', tasks: 5 },\r\n        { week: 'W8', tasks: 9 },\r\n    ];\r\n\r\n    const tooltipStyle = {\r\n        contentStyle: {\r\n            background: '#1A2236',\r\n            border: '1px solid rgba(255,255,255,0.1)',\r\n            borderRadius: 8,\r\n            fontSize: 12,\r\n            color: '#F1F5F9',\r\n        },\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {/* Health Score Cards */}\r\n            <div style={{\r\n                display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))',\r\n                gap: 'var(--space-4)', marginBottom: 'var(--space-6)',\r\n            }}>\r\n                {healthData.map((v, i) => (\r\n                    <motion.div\r\n                        key={v.name}\r\n                        className=\"card card-body\"\r\n                        initial={{ opacity: 0, y: 12 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ delay: i * 0.05 }}\r\n                        style={{ padding: 'var(--space-4)', textAlign: 'center' }}\r\n                    >\r\n                        <div style={{\r\n                            width: 64, height: 64, borderRadius: '50%', margin: '0 auto var(--space-3)',\r\n                            background: `conic-gradient(${v.color} ${v.health * 3.6}deg, rgba(255,255,255,0.06) 0deg)`,\r\n                            display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                            position: 'relative',\r\n                        }}>\r\n                            <div style={{\r\n                                width: 52, height: 52, borderRadius: '50%',\r\n                                background: 'var(--color-bg-card)',\r\n                                display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                                fontSize: 'var(--font-size-lg)', fontWeight: 700, color: v.color,\r\n                            }}>\r\n                                {v.health}\r\n                            </div>\r\n                        </div>\r\n                        <div style={{ fontSize: 'var(--font-size-sm)', fontWeight: 600, color: 'var(--color-text-primary)' }}>{v.fullName}</div>\r\n                        <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)' }}>\r\n                            {v.health >= 60 ? 'Good' : v.health >= 35 ? 'Fair' : 'Needs Work'}\r\n                        </div>\r\n                    </motion.div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Charts Grid */}\r\n            <div style={{\r\n                display: 'grid', gridTemplateColumns: '1fr 1fr',\r\n                gap: 'var(--space-5)', marginBottom: 'var(--space-5)',\r\n            }}>\r\n                {/* Tasks by Venture */}\r\n                <div className=\"chart-container\">\r\n                    <div className=\"chart-title\">\r\n                        <Target size={16} style={{ display: 'inline', marginRight: 6, verticalAlign: 'middle' }} />\r\n                        Tasks by Venture\r\n                    </div>\r\n                    <ResponsiveContainer width=\"100%\" height={280}>\r\n                        <BarChart data={tasksByVenture}>\r\n                            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255,255,255,0.04)\" />\r\n                            <XAxis dataKey=\"name\" tick={{ fontSize: 11, fill: '#94A3B8' }} />\r\n                            <YAxis tick={{ fontSize: 11, fill: '#94A3B8' }} />\r\n                            <Tooltip {...tooltipStyle} />\r\n                            <Bar dataKey=\"done\" stackId=\"a\" fill=\"#10B981\" name=\"Done\" radius={[0, 0, 0, 0]} />\r\n                            <Bar dataKey=\"active\" stackId=\"a\" fill=\"#6366F1\" name=\"Active\" />\r\n                            <Bar dataKey=\"blocked\" stackId=\"a\" fill=\"#EF4444\" name=\"Blocked\" />\r\n                            <Bar dataKey=\"remaining\" stackId=\"a\" fill=\"#64748B\" name=\"Remaining\" radius={[4, 4, 0, 0]} />\r\n                        </BarChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n\r\n                {/* Task Status Distribution */}\r\n                <div className=\"chart-container\">\r\n                    <div className=\"chart-title\">\r\n                        <Activity size={16} style={{ display: 'inline', marginRight: 6, verticalAlign: 'middle' }} />\r\n                        Task Status Distribution\r\n                    </div>\r\n                    <ResponsiveContainer width=\"100%\" height={280}>\r\n                        <PieChart>\r\n                            <Pie\r\n                                data={taskStatusData}\r\n                                cx=\"50%\" cy=\"50%\"\r\n                                innerRadius={60} outerRadius={100}\r\n                                paddingAngle={3}\r\n                                dataKey=\"value\"\r\n                            >\r\n                                {taskStatusData.map((entry, i) => (\r\n                                    <Cell key={i} fill={entry.color} />\r\n                                ))}\r\n                            </Pie>\r\n                            <Tooltip {...tooltipStyle} />\r\n                        </PieChart>\r\n                    </ResponsiveContainer>\r\n                    <div style={{\r\n                        display: 'flex', flexWrap: 'wrap', justifyContent: 'center',\r\n                        gap: 'var(--space-3)', marginTop: 'var(--space-2)',\r\n                    }}>\r\n                        {taskStatusData.map(item => (\r\n                            <div key={item.name} style={{\r\n                                display: 'flex', alignItems: 'center', gap: 4,\r\n                                fontSize: 'var(--font-size-xs)', color: 'var(--color-text-secondary)',\r\n                            }}>\r\n                                <span style={{ width: 8, height: 8, borderRadius: 2, background: item.color }} />\r\n                                {item.name}: {item.value}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Velocity Trend */}\r\n                <div className=\"chart-container\">\r\n                    <div className=\"chart-title\">\r\n                        <TrendingUp size={16} style={{ display: 'inline', marginRight: 6, verticalAlign: 'middle' }} />\r\n                        Task Completion Velocity\r\n                    </div>\r\n                    <ResponsiveContainer width=\"100%\" height={280}>\r\n                        <AreaChart data={velocityData}>\r\n                            <defs>\r\n                                <linearGradient id=\"velocityGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                    <stop offset=\"5%\" stopColor=\"#6366F1\" stopOpacity={0.3} />\r\n                                    <stop offset=\"95%\" stopColor=\"#6366F1\" stopOpacity={0} />\r\n                                </linearGradient>\r\n                            </defs>\r\n                            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255,255,255,0.04)\" />\r\n                            <XAxis dataKey=\"week\" tick={{ fontSize: 11, fill: '#94A3B8' }} />\r\n                            <YAxis tick={{ fontSize: 11, fill: '#94A3B8' }} />\r\n                            <Tooltip {...tooltipStyle} />\r\n                            <Area type=\"monotone\" dataKey=\"tasks\" stroke=\"#6366F1\" fill=\"url(#velocityGradient)\" strokeWidth={2} name=\"Tasks Completed\" />\r\n                        </AreaChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n\r\n                {/* Priority Distribution */}\r\n                <div className=\"chart-container\">\r\n                    <div className=\"chart-title\">\r\n                        <Users size={16} style={{ display: 'inline', marginRight: 6, verticalAlign: 'middle' }} />\r\n                        Open Tasks by Priority\r\n                    </div>\r\n                    <ResponsiveContainer width=\"100%\" height={280}>\r\n                        <BarChart data={priorityData} layout=\"vertical\">\r\n                            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255,255,255,0.04)\" />\r\n                            <XAxis type=\"number\" tick={{ fontSize: 11, fill: '#94A3B8' }} />\r\n                            <YAxis dataKey=\"name\" type=\"category\" tick={{ fontSize: 11, fill: '#94A3B8' }} width={90} />\r\n                            <Tooltip {...tooltipStyle} />\r\n                            <Bar dataKey=\"value\" name=\"Tasks\" radius={[0, 4, 4, 0]}>\r\n                                {priorityData.map((entry, i) => (\r\n                                    <Cell key={i} fill={entry.color} />\r\n                                ))}\r\n                            </Bar>\r\n                        </BarChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\Dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":36,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TrendingUp"},"fix":{"range":[383,395],"text":""},"desc":"Remove unused variable \"TrendingUp\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// Dashboard View ÔÇö Portfolio Overview\r\n// ============================================================\r\n\r\nimport { useStore } from '../lib/store';\r\nimport VentureCard from './VentureCard';\r\nimport DetailPanel from './DetailPanel';\r\nimport {\r\n    Briefcase, CheckCircle2, AlertTriangle, Users,\r\n    FileCheck, Activity, TrendingUp\r\n} from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nexport default function Dashboard() {\r\n    const {\r\n        state, dispatch, filteredVentures, selectedVenture, portfolioStats\r\n    } = useStore();\r\n\r\n    const { filters } = state;\r\n\r\n    const stats = [\r\n        {\r\n            label: 'Ventures',\r\n            val: portfolioStats.totalVentures,\r\n            sub: `${state.ventures.filter(v => v.geo === 'UK').length} UK ┬À ${state.ventures.filter(v => v.geo === 'NG').length} NG`,\r\n            accent: '#6366F1',\r\n            accentBg: 'rgba(99, 102, 241, 0.12)',\r\n            icon: Briefcase,\r\n        },\r\n        {\r\n            label: 'Tasks Done',\r\n            val: `${portfolioStats.doneTasks}/${portfolioStats.totalTasks}`,\r\n            sub: `${portfolioStats.totalTasks > 0 ? Math.round((portfolioStats.doneTasks / portfolioStats.totalTasks) * 100) : 0}% complete`,\r\n            accent: '#10B981',\r\n            accentBg: 'rgba(16, 185, 129, 0.12)',\r\n            icon: CheckCircle2,\r\n        },\r\n        {\r\n            label: 'Blocked',\r\n            val: portfolioStats.blockedTasks,\r\n            sub: portfolioStats.blockedTasks > 0 ? 'Needs attention' : 'All clear Ô£ô',\r\n            accent: portfolioStats.blockedTasks > 0 ? '#EF4444' : '#10B981',\r\n            accentBg: portfolioStats.blockedTasks > 0 ? 'rgba(239, 68, 68, 0.12)' : 'rgba(16, 185, 129, 0.12)',\r\n            icon: AlertTriangle,\r\n        },\r\n        {\r\n            label: 'Team',\r\n            val: `${portfolioStats.filledTeam}/${portfolioStats.totalTeam}`,\r\n            sub: `${portfolioStats.totalTeam - portfolioStats.filledTeam} roles to fill`,\r\n            accent: '#8B5CF6',\r\n            accentBg: 'rgba(139, 92, 246, 0.12)',\r\n            icon: Users,\r\n        },\r\n        {\r\n            label: 'Registrations',\r\n            val: `${portfolioStats.regsComplete}/${portfolioStats.regsTotal}`,\r\n            sub: `${portfolioStats.regsTotal > 0 ? Math.round((portfolioStats.regsComplete / portfolioStats.regsTotal) * 100) : 0}% complete`,\r\n            accent: '#F59E0B',\r\n            accentBg: 'rgba(245, 158, 11, 0.12)',\r\n            icon: FileCheck,\r\n        },\r\n        {\r\n            label: 'Avg Health',\r\n            val: portfolioStats.avgHealth,\r\n            sub: portfolioStats.avgHealth >= 50 ? 'Good shape' : 'Needs work',\r\n            accent: portfolioStats.avgHealth >= 50 ? '#10B981' : '#F59E0B',\r\n            accentBg: portfolioStats.avgHealth >= 50 ? 'rgba(16, 185, 129, 0.12)' : 'rgba(245, 158, 11, 0.12)',\r\n            icon: Activity,\r\n        },\r\n    ];\r\n\r\n    return (\r\n        <div>\r\n            {/* KPI Stats Grid */}\r\n            <div className=\"stat-grid\">\r\n                {stats.map((s, i) => (\r\n                    <motion.div\r\n                        key={s.label}\r\n                        className=\"stat-card\"\r\n                        style={{ '--stat-accent': s.accent, '--stat-accent-bg': s.accentBg } as React.CSSProperties}\r\n                        initial={{ opacity: 0, y: 16 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ duration: 0.3, delay: i * 0.05 }}\r\n                    >\r\n                        <div className=\"stat-card-icon\">\r\n                            <s.icon size={16} />\r\n                        </div>\r\n                        <div className=\"stat-card-label\">{s.label}</div>\r\n                        <div className=\"stat-card-value\">{s.val}</div>\r\n                        <div className=\"stat-card-sub\">{s.sub}</div>\r\n                    </motion.div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <div className=\"filter-bar\">\r\n                {[\r\n                    { key: 'all' as const, label: 'All Ventures' },\r\n                    { key: 'Active Build' as const, label: 'Active Build' },\r\n                    { key: 'Incubating' as const, label: 'Incubating' },\r\n                    { key: 'Parked' as const, label: 'Parked' },\r\n                ].map(f => (\r\n                    <button\r\n                        key={f.key}\r\n                        className={`filter-pill${filters.tier === f.key ? ' active' : ''}`}\r\n                        onClick={() => dispatch({ type: 'SET_FILTERS', payload: { tier: f.key } })}\r\n                    >\r\n                        {f.label}\r\n                    </button>\r\n                ))}\r\n                <div className=\"filter-divider\" />\r\n                {[\r\n                    { key: 'all' as const, label: 'All Geos' },\r\n                    { key: 'UK' as const, label: '­ƒç¼­ƒçº UK' },\r\n                    { key: 'NG' as const, label: '­ƒç│­ƒç¼ Nigeria' },\r\n                ].map(f => (\r\n                    <button\r\n                        key={f.key}\r\n                        className={`filter-pill${filters.geo === f.key ? ' active' : ''}`}\r\n                        onClick={() => dispatch({ type: 'SET_FILTERS', payload: { geo: f.key } })}\r\n                    >\r\n                        {f.label}\r\n                    </button>\r\n                ))}\r\n                <div className=\"filter-divider\" />\r\n                {[\r\n                    { key: 'name' as const, label: 'A-Z' },\r\n                    { key: 'health' as const, label: 'Health' },\r\n                    { key: 'tasks' as const, label: 'Tasks' },\r\n                ].map(f => (\r\n                    <button\r\n                        key={f.key}\r\n                        className={`filter-pill${filters.sortBy === f.key ? ' active' : ''}`}\r\n                        onClick={() => dispatch({ type: 'SET_FILTERS', payload: { sortBy: f.key } })}\r\n                    >\r\n                        Sort: {f.label}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Blockers Alert */}\r\n            {portfolioStats.blockedTasks > 0 && (\r\n                <motion.div\r\n                    initial={{ opacity: 0, height: 0 }}\r\n                    animate={{ opacity: 1, height: 'auto' }}\r\n                    style={{\r\n                        padding: 'var(--space-4)',\r\n                        background: 'var(--color-danger-bg)',\r\n                        border: '1px solid rgba(239, 68, 68, 0.2)',\r\n                        borderRadius: 'var(--border-radius-md)',\r\n                        marginBottom: 'var(--space-5)',\r\n                    }}\r\n                >\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: 'var(--space-2)', marginBottom: 'var(--space-2)' }}>\r\n                        <AlertTriangle size={14} color=\"var(--color-danger)\" />\r\n                        <span style={{ fontSize: 'var(--font-size-sm)', fontWeight: 600, color: 'var(--color-danger)' }}>\r\n                            {portfolioStats.blockedTasks} Active Blocker{portfolioStats.blockedTasks > 1 ? 's' : ''}\r\n                        </span>\r\n                    </div>\r\n                    {filteredVentures.filter(v => v.tasks.blocked > 0).map(v => (\r\n                        <div key={v.id} style={{\r\n                            fontSize: 'var(--font-size-sm)',\r\n                            color: 'var(--color-text-secondary)',\r\n                            padding: '2px 0',\r\n                        }}>\r\n                            <strong style={{ color: v.color }}>{v.name}:</strong>{' '}\r\n                            {v.tasks.blocked} blocked task{v.tasks.blocked > 1 ? 's' : ''}\r\n                        </div>\r\n                    ))}\r\n                </motion.div>\r\n            )}\r\n\r\n            {/* Main: Venture Grid + Detail Panel */}\r\n            <div style={{\r\n                display: 'grid',\r\n                gridTemplateColumns: selectedVenture ? '1fr 400px' : '1fr',\r\n                gap: 'var(--space-5)',\r\n                transition: 'all var(--transition-base)',\r\n            }}>\r\n                {/* Venture Grid */}\r\n                <div className=\"venture-grid\">\r\n                    {filteredVentures.map((v, i) => (\r\n                        <VentureCard\r\n                            key={v.id}\r\n                            venture={v}\r\n                            selected={state.selectedVentureId === v.id}\r\n                            onClick={() => dispatch({\r\n                                type: 'SELECT_VENTURE',\r\n                                payload: state.selectedVentureId === v.id ? null : v.id,\r\n                            })}\r\n                            index={i}\r\n                        />\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Detail Panel */}\r\n                <AnimatePresence>\r\n                    {selectedVenture && (\r\n                        <motion.div\r\n                            initial={{ opacity: 0, x: 20 }}\r\n                            animate={{ opacity: 1, x: 0 }}\r\n                            exit={{ opacity: 0, x: 20 }}\r\n                            transition={{ duration: 0.25 }}\r\n                        >\r\n                            <DetailPanel\r\n                                venture={selectedVenture}\r\n                                onClose={() => dispatch({ type: 'SELECT_VENTURE', payload: null })}\r\n                            />\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\DetailPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ExternalLink' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":35,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ExternalLink"},"fix":{"range":[361,375],"text":""},"desc":"Remove unused variable \"ExternalLink\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// Detail Panel ÔÇö Right side venture detail view\r\n// ============================================================\r\n\r\nimport type { VentureWithStats } from '../lib/types';\r\nimport { useStore } from '../lib/store';\r\nimport {\r\n    X, CheckCircle2, AlertTriangle, Clock, Target,\r\n    Users, GitBranch, ExternalLink, FileText\r\n} from 'lucide-react';\r\n\r\ninterface Props {\r\n    venture: VentureWithStats;\r\n    onClose: () => void;\r\n}\r\n\r\nexport default function DetailPanel({ venture: v, onClose }: Props) {\r\n    const { state } = useStore();\r\n    const progress = v.tasks.total > 0 ? Math.round((v.tasks.done / v.tasks.total) * 100) : 0;\r\n\r\n    const healthColor = v.healthScore >= 60 ? 'var(--color-success)'\r\n        : v.healthScore >= 35 ? 'var(--color-warning)'\r\n            : 'var(--color-danger)';\r\n\r\n    // Recent tasks for this venture\r\n    const ventureTasks = state.tasks\r\n        .filter(t => t.venture_id === v.id)\r\n        .sort((a, b) => new Date(b.updated_at).getTime() - new Date(a.updated_at).getTime());\r\n\r\n    return (\r\n        <div className=\"detail-panel animate-slide-in\">\r\n            {/* Header */}\r\n            <div className=\"detail-panel-header\">\r\n                <div style={{\r\n                    width: 44, height: 44, borderRadius: 'var(--border-radius-md)',\r\n                    background: v.color, display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                    color: '#fff', fontWeight: 700, fontSize: 'var(--font-size-lg)', flexShrink: 0,\r\n                }}>\r\n                    {v.prefix}\r\n                </div>\r\n                <div style={{ flex: 1, minWidth: 0 }}>\r\n                    <div style={{ fontSize: 'var(--font-size-xl)', fontWeight: 700, color: 'var(--color-text-primary)' }}>\r\n                        {v.name}\r\n                    </div>\r\n                    <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-tertiary)' }}>\r\n                        {v.geo === 'UK' ? '­ƒç¼­ƒçº' : '­ƒç│­ƒç¼'} {v.geo} ┬À {v.tier} ┬À {v.status}\r\n                    </div>\r\n                </div>\r\n                <div style={{\r\n                    fontSize: 'var(--font-size-2xl)', fontWeight: 800, color: healthColor,\r\n                    textAlign: 'center', lineHeight: 1,\r\n                }}>\r\n                    {v.healthScore}\r\n                    <div style={{ fontSize: 'var(--font-size-xs)', fontWeight: 500, color: 'var(--color-text-muted)' }}>health</div>\r\n                </div>\r\n                <button className=\"btn btn-ghost btn-icon\" onClick={onClose}>\r\n                    <X size={18} />\r\n                </button>\r\n            </div>\r\n\r\n            {/* Body */}\r\n            <div className=\"detail-panel-body\">\r\n                {/* Description */}\r\n                {v.description && (\r\n                    <p style={{\r\n                        fontSize: 'var(--font-size-sm)', color: 'var(--color-text-secondary)',\r\n                        marginBottom: 'var(--space-4)', lineHeight: 1.6,\r\n                    }}>\r\n                        {v.description}\r\n                    </p>\r\n                )}\r\n\r\n                {/* Task Progress */}\r\n                <div className=\"detail-panel-section\">\r\n                    <div className=\"detail-section-title\">\r\n                        <Target size={14} />\r\n                        Task Progress\r\n                    </div>\r\n                    <div className=\"progress-bar lg\" style={{ marginBottom: 'var(--space-3)' }}>\r\n                        <div className=\"progress-bar-fill\" style={{\r\n                            width: `${progress}%`,\r\n                            background: `linear-gradient(90deg, ${v.color}, ${v.color}CC)`,\r\n                        }} />\r\n                    </div>\r\n                    <div style={{\r\n                        display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: 'var(--space-3)',\r\n                        textAlign: 'center',\r\n                    }}>\r\n                        {[\r\n                            { label: 'Done', val: v.tasks.done, icon: CheckCircle2, c: 'var(--color-success)' },\r\n                            { label: 'Active', val: v.tasks.inProgress, icon: Clock, c: 'var(--color-info)' },\r\n                            { label: 'Blocked', val: v.tasks.blocked, icon: AlertTriangle, c: 'var(--color-danger)' },\r\n                        ].map(s => (\r\n                            <div key={s.label}>\r\n                                <div style={{ fontSize: 'var(--font-size-2xl)', fontWeight: 700, color: s.c }}>{s.val}</div>\r\n                                <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: 4 }}>\r\n                                    <s.icon size={10} />\r\n                                    {s.label}\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                    <div style={{\r\n                        display: 'flex', justifyContent: 'space-between', marginTop: 'var(--space-3)',\r\n                        paddingTop: 'var(--space-3)', borderTop: '1px solid var(--border-color)',\r\n                        fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)',\r\n                    }}>\r\n                        <span>Todo: {v.tasks.todo}</span>\r\n                        <span>Review: {v.tasks.review}</span>\r\n                        <span>Backlog: {v.tasks.backlog}</span>\r\n                        <span>Total: {v.tasks.total}</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Registration Checklist */}\r\n                <div className=\"detail-panel-section\">\r\n                    <div className=\"detail-section-title\">\r\n                        <FileText size={14} />\r\n                        Registration Checklist\r\n                    </div>\r\n                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 'var(--space-2)' }}>\r\n                        {[\r\n                            { label: 'Domain', done: v.regs.domain },\r\n                            { label: 'Company Reg', done: v.regs.company },\r\n                            { label: 'Bank Account', done: v.regs.bank },\r\n                            { label: 'Legal Docs', done: v.regs.legal },\r\n                        ].map(r => (\r\n                            <div key={r.label} className=\"reg-item\">\r\n                                <span className={`reg-dot ${r.done ? 'done' : 'pending'}`} />\r\n                                <span style={{ color: r.done ? 'var(--color-success)' : 'var(--color-text-muted)' }}>\r\n                                    {r.label}\r\n                                </span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Team */}\r\n                {v.team.total > 0 && (\r\n                    <div className=\"detail-panel-section\">\r\n                        <div className=\"detail-section-title\">\r\n                            <Users size={14} />\r\n                            Team ({v.team.filled}/{v.team.total} filled)\r\n                        </div>\r\n                        <div className=\"progress-bar\" style={{ marginBottom: 'var(--space-3)' }}>\r\n                            <div className=\"progress-bar-fill\" style={{\r\n                                width: `${(v.team.filled / v.team.total) * 100}%`,\r\n                                background: v.color,\r\n                            }} />\r\n                        </div>\r\n                        {v.team.roles.map(role => (\r\n                            <div key={role.id} style={{\r\n                                display: 'flex', alignItems: 'center', justifyContent: 'space-between',\r\n                                padding: '6px 0', borderBottom: '1px solid var(--border-color)',\r\n                                fontSize: 'var(--font-size-sm)',\r\n                            }}>\r\n                                <span style={{ color: 'var(--color-text-secondary)' }}>{role.role_name}</span>\r\n                                <span style={{\r\n                                    fontSize: 'var(--font-size-xs)', fontWeight: 600,\r\n                                    padding: '1px 8px', borderRadius: 'var(--border-radius-full)',\r\n                                    background: role.status === 'filled' ? 'var(--color-success-bg)' : role.status === 'hiring' ? 'var(--color-warning-bg)' : 'var(--color-bg-tertiary)',\r\n                                    color: role.status === 'filled' ? 'var(--color-success)' : role.status === 'hiring' ? 'var(--color-warning)' : 'var(--color-text-muted)',\r\n                                }}>\r\n                                    {role.status === 'filled' ? role.assignee_name || 'Filled' : role.status.charAt(0).toUpperCase() + role.status.slice(1)}\r\n                                </span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n\r\n                {/* GitHub */}\r\n                {v.github && (\r\n                    <div className=\"detail-panel-section\">\r\n                        <div className=\"detail-section-title\">\r\n                            <GitBranch size={14} />\r\n                            GitHub Activity\r\n                        </div>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: 'var(--space-3)', textAlign: 'center' }}>\r\n                            <div>\r\n                                <div style={{ fontSize: 'var(--font-size-xl)', fontWeight: 700, color: 'var(--color-text-primary)' }}>{v.github.repos}</div>\r\n                                <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)' }}>Repos</div>\r\n                            </div>\r\n                            <div>\r\n                                <div style={{ fontSize: 'var(--font-size-xl)', fontWeight: 700, color: 'var(--color-text-primary)' }}>{v.github.commits_7d}</div>\r\n                                <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)' }}>Commits 7d</div>\r\n                            </div>\r\n                            <div>\r\n                                <div style={{ fontSize: 'var(--font-size-xl)', fontWeight: 700, color: 'var(--color-text-primary)' }}>{v.github.prs_open}</div>\r\n                                <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)' }}>Open PRs</div>\r\n                            </div>\r\n                        </div>\r\n                        <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)', textAlign: 'center', marginTop: 'var(--space-2)' }}>\r\n                            {v.github.last_activity}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Milestones */}\r\n                {v.milestones.length > 0 && (\r\n                    <div className=\"detail-panel-section\">\r\n                        <div className=\"detail-section-title\">\r\n                            <Target size={14} />\r\n                            Milestones\r\n                        </div>\r\n                        {v.milestones.map(m => (\r\n                            <div key={m.id} style={{ marginBottom: 'var(--space-3)' }}>\r\n                                <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: 'var(--font-size-sm)', marginBottom: 4 }}>\r\n                                    <span style={{ color: 'var(--color-text-secondary)', fontWeight: 500 }}>{m.name}</span>\r\n                                    <span style={{ color: 'var(--color-text-muted)', fontSize: 'var(--font-size-xs)' }}>{m.target_date}</span>\r\n                                </div>\r\n                                <div className=\"progress-bar\">\r\n                                    <div className=\"progress-bar-fill\" style={{ width: `${m.progress}%`, background: v.color }} />\r\n                                </div>\r\n                                <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)', marginTop: 2 }}>{m.progress}%</div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Recent Tasks */}\r\n                <div className=\"detail-panel-section\">\r\n                    <div className=\"detail-section-title\">Recent Tasks</div>\r\n                    {ventureTasks.slice(0, 8).map(task => {\r\n                        const statusColor = task.status === 'done' ? 'var(--color-success)'\r\n                            : task.status === 'blocked' ? 'var(--color-danger)'\r\n                                : task.status === 'in-progress' ? 'var(--color-info)'\r\n                                    : 'var(--color-text-muted)';\r\n                        return (\r\n                            <div key={task.id} style={{\r\n                                display: 'flex', alignItems: 'center', gap: 'var(--space-2)',\r\n                                padding: '5px 0', borderBottom: '1px solid var(--border-color)',\r\n                                fontSize: 'var(--font-size-sm)',\r\n                            }}>\r\n                                <span style={{ width: 6, height: 6, borderRadius: '50%', background: statusColor, flexShrink: 0 }} />\r\n                                <span style={{ flex: 1, color: 'var(--color-text-secondary)', minWidth: 0, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>\r\n                                    {task.title}\r\n                                </span>\r\n                                <span style={{\r\n                                    fontSize: 'var(--font-size-xs)', fontWeight: 600, color: statusColor,\r\n                                    flexShrink: 0,\r\n                                }}>\r\n                                    {task.status}\r\n                                </span>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\DocumentVault.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":44,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2227,2230],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2227,2230],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// Document Vault ÔÇö Per-venture document links\r\n// ============================================================\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport { useStore } from '../lib/store';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport type { VentureDocument, DocCategory } from '../lib/types';\r\nimport {\r\n    FileText, Plus, X, ExternalLink, Search,\r\n    Briefcase, BarChart3, Code, Scale, Megaphone, FolderOpen\r\n} from 'lucide-react';\r\n\r\nconst categoryConfig: Record<DocCategory, { label: string; color: string; icon: typeof FileText }> = {\r\n    legal: { label: 'Legal', color: '#EF4444', icon: Scale },\r\n    pitch: { label: 'Pitch', color: '#6366F1', icon: Briefcase },\r\n    technical: { label: 'Technical', color: '#3B82F6', icon: Code },\r\n    financial: { label: 'Financial', color: '#10B981', icon: BarChart3 },\r\n    marketing: { label: 'Marketing', color: '#F59E0B', icon: Megaphone },\r\n    other: { label: 'Other', color: '#64748B', icon: FolderOpen },\r\n};\r\n\r\nexport default function DocumentVault() {\r\n    const { state, addDocument, dispatch } = useStore();\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [ventureFilter, setVentureFilter] = useState<string>('all');\r\n    const [catFilter, setCatFilter] = useState<string>('all');\r\n    const [search, setSearch] = useState('');\r\n    const [form, setForm] = useState<Partial<VentureDocument>>({ category: 'other', venture_id: '' });\r\n\r\n    const filtered = useMemo(() => {\r\n        let docs = state.documents;\r\n        if (ventureFilter !== 'all') docs = docs.filter(d => d.venture_id === ventureFilter);\r\n        if (catFilter !== 'all') docs = docs.filter(d => d.category === catFilter);\r\n        if (search) {\r\n            const q = search.toLowerCase();\r\n            docs = docs.filter(d => d.name.toLowerCase().includes(q) || d.notes?.toLowerCase().includes(q));\r\n        }\r\n        return docs.sort((a, b) => new Date(b.added_at).getTime() - new Date(a.added_at).getTime());\r\n    }, [state.documents, ventureFilter, catFilter, search]);\r\n\r\n    // Group by venture\r\n    const grouped = useMemo(() => {\r\n        const groups: Record<string, { venture: any; docs: typeof filtered }> = {};\r\n        filtered.forEach(d => {\r\n            const v = state.ventures.find(v => v.id === d.venture_id);\r\n            if (!v) return;\r\n            if (!groups[v.id]) groups[v.id] = { venture: v, docs: [] };\r\n            groups[v.id].docs.push(d);\r\n        });\r\n        return Object.values(groups);\r\n    }, [filtered, state.ventures]);\r\n\r\n    const handleSubmit = () => {\r\n        if (!form.venture_id || !form.name || !form.url) return;\r\n        addDocument(form as Omit<VentureDocument, 'id' | 'added_at'>);\r\n        setShowForm(false);\r\n        setForm({ category: 'other', venture_id: '' });\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div style={{\r\n                display: 'flex', alignItems: 'center', justifyContent: 'space-between',\r\n                marginBottom: 'var(--space-5)',\r\n            }}>\r\n                <div>\r\n                    <h2 style={{ fontSize: 'var(--font-size-xl)', fontWeight: 700, color: 'var(--color-text-primary)', marginBottom: 4 }}>\r\n                        <FileText size={20} style={{ display: 'inline', marginRight: 8, verticalAlign: 'middle' }} />\r\n                        Document Vault\r\n                    </h2>\r\n                    <p style={{ fontSize: 'var(--font-size-sm)', color: 'var(--color-text-muted)' }}>\r\n                        {state.documents.length} documents across {new Set(state.documents.map(d => d.venture_id)).size} ventures\r\n                    </p>\r\n                </div>\r\n                <button className=\"btn btn-primary btn-sm\" onClick={() => setShowForm(true)}>\r\n                    <Plus size={14} /> Add Document\r\n                </button>\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <div style={{\r\n                display: 'flex', gap: 'var(--space-3)', marginBottom: 'var(--space-5)', flexWrap: 'wrap',\r\n            }}>\r\n                <div className=\"search-wrapper\" style={{ flex: 1, minWidth: 200 }}>\r\n                    <Search size={14} className=\"search-icon\" />\r\n                    <input className=\"form-input\" placeholder=\"Search documents...\"\r\n                        value={search} onChange={e => setSearch(e.target.value)}\r\n                        style={{ paddingLeft: 32 }} />\r\n                </div>\r\n                <select className=\"form-select\" style={{ width: 'auto' }} value={ventureFilter}\r\n                    onChange={e => setVentureFilter(e.target.value)}>\r\n                    <option value=\"all\">All Ventures</option>\r\n                    {state.ventures.map(v => <option key={v.id} value={v.id}>{v.prefix} ÔÇö {v.name}</option>)}\r\n                </select>\r\n                <select className=\"form-select\" style={{ width: 'auto' }} value={catFilter}\r\n                    onChange={e => setCatFilter(e.target.value)}>\r\n                    <option value=\"all\">All Categories</option>\r\n                    {(Object.keys(categoryConfig) as DocCategory[]).map(c =>\r\n                        <option key={c} value={c}>{categoryConfig[c].label}</option>\r\n                    )}\r\n                </select>\r\n            </div>\r\n\r\n            {/* Category stat badges */}\r\n            <div style={{\r\n                display: 'flex', gap: 'var(--space-2)', marginBottom: 'var(--space-5)', flexWrap: 'wrap',\r\n            }}>\r\n                {(Object.entries(categoryConfig) as [DocCategory, typeof categoryConfig.legal][]).map(([key, cfg]) => {\r\n                    const count = state.documents.filter(d => d.category === key).length;\r\n                    return (\r\n                        <span key={key} style={{\r\n                            padding: '4px 12px', borderRadius: 'var(--border-radius-full)',\r\n                            background: `${cfg.color}18`, color: cfg.color, fontSize: 'var(--font-size-xs)',\r\n                            fontWeight: 600, cursor: 'pointer',\r\n                            border: catFilter === key ? `1px solid ${cfg.color}` : '1px solid transparent',\r\n                        }} onClick={() => setCatFilter(catFilter === key ? 'all' : key)}>\r\n                            {cfg.label} ({count})\r\n                        </span>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* Document Groups */}\r\n            {grouped.length === 0 ? (\r\n                <div className=\"empty-state\" style={{ padding: 'var(--space-8)' }}>\r\n                    <FileText size={40} style={{ opacity: 0.15, marginBottom: 'var(--space-3)' }} />\r\n                    <div className=\"empty-state-title\">No documents yet</div>\r\n                    <div className=\"empty-state-text\">Add links to pitch decks, contracts, specs, and more.</div>\r\n                </div>\r\n            ) : (\r\n                grouped.map((group, gi) => (\r\n                    <motion.div key={group.venture.id} initial={{ opacity: 0 }} animate={{ opacity: 1 }}\r\n                        transition={{ delay: gi * 0.05 }} style={{ marginBottom: 'var(--space-5)' }}>\r\n                        <div style={{\r\n                            display: 'flex', alignItems: 'center', gap: 'var(--space-2)',\r\n                            marginBottom: 'var(--space-3)',\r\n                        }}>\r\n                            <span style={{\r\n                                width: 8, height: 8, borderRadius: '50%', background: group.venture.color,\r\n                            }} />\r\n                            <h3 style={{ fontSize: 'var(--font-size-md)', fontWeight: 600, color: 'var(--color-text-primary)' }}>\r\n                                {group.venture.name}\r\n                            </h3>\r\n                            <span style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)' }}>\r\n                                ({group.docs.length})\r\n                            </span>\r\n                        </div>\r\n\r\n                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))', gap: 'var(--space-3)' }}>\r\n                            {group.docs.map(doc => {\r\n                                const cat = categoryConfig[doc.category];\r\n                                const CatIcon = cat.icon;\r\n                                return (\r\n                                    <div key={doc.id} className=\"card card-body\" style={{\r\n                                        padding: 'var(--space-3)', display: 'flex', alignItems: 'flex-start', gap: 'var(--space-3)',\r\n                                        cursor: 'pointer', transition: 'border-color 0.2s',\r\n                                    }}\r\n                                        onClick={() => window.open(doc.url, '_blank')}>\r\n                                        <div style={{\r\n                                            width: 36, height: 36, borderRadius: 'var(--border-radius-md)',\r\n                                            background: `${cat.color}18`, display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                                            flexShrink: 0,\r\n                                        }}>\r\n                                            <CatIcon size={16} color={cat.color} />\r\n                                        </div>\r\n                                        <div style={{ flex: 1, minWidth: 0 }}>\r\n                                            <div style={{\r\n                                                fontSize: 'var(--font-size-sm)', fontWeight: 600, color: 'var(--color-text-primary)',\r\n                                                overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap',\r\n                                            }}>\r\n                                                {doc.name}\r\n                                            </div>\r\n                                            <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)' }}>\r\n                                                {cat.label} ┬À {new Date(doc.added_at).toLocaleDateString('en-GB', { day: 'numeric', month: 'short' })}\r\n                                            </div>\r\n                                        </div>\r\n                                        <div style={{ display: 'flex', gap: 4 }}>\r\n                                            <ExternalLink size={12} color=\"var(--color-text-muted)\" />\r\n                                            <button className=\"btn btn-secondary btn-sm btn-icon\" style={{ padding: 2 }}\r\n                                                onClick={e => { e.stopPropagation(); dispatch({ type: 'DELETE_DOCUMENT', payload: doc.id }); }}>\r\n                                                <X size={10} />\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </motion.div>\r\n                ))\r\n            )}\r\n\r\n            {/* Add form modal */}\r\n            <AnimatePresence>\r\n                {showForm && (\r\n                    <motion.div className=\"modal-overlay\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}\r\n                        onClick={() => setShowForm(false)}>\r\n                        <motion.div className=\"modal\" style={{ width: 480 }}\r\n                            initial={{ scale: 0.9, opacity: 0 }} animate={{ scale: 1, opacity: 1 }} exit={{ scale: 0.9, opacity: 0 }}\r\n                            onClick={e => e.stopPropagation()}>\r\n                            <div className=\"modal-header\">\r\n                                <h3 className=\"modal-title\">Add Document</h3>\r\n                                <button className=\"btn btn-secondary btn-sm btn-icon\" onClick={() => setShowForm(false)}><X size={14} /></button>\r\n                            </div>\r\n                            <div style={{ padding: 'var(--space-4)', display: 'flex', flexDirection: 'column', gap: 'var(--space-3)' }}>\r\n                                <select className=\"form-select\" value={form.venture_id}\r\n                                    onChange={e => setForm(f => ({ ...f, venture_id: e.target.value }))}>\r\n                                    <option value=\"\">Select venture...</option>\r\n                                    {state.ventures.map(v => <option key={v.id} value={v.id}>{v.prefix} ÔÇö {v.name}</option>)}\r\n                                </select>\r\n                                <input className=\"form-input\" placeholder=\"Document name\" value={form.name || ''}\r\n                                    onChange={e => setForm(f => ({ ...f, name: e.target.value }))} />\r\n                                <input className=\"form-input\" placeholder=\"URL (Google Drive, Notion, etc.)\" value={form.url || ''}\r\n                                    onChange={e => setForm(f => ({ ...f, url: e.target.value }))} />\r\n                                <select className=\"form-select\" value={form.category}\r\n                                    onChange={e => setForm(f => ({ ...f, category: e.target.value as DocCategory }))}>\r\n                                    {(Object.entries(categoryConfig) as [DocCategory, typeof categoryConfig.legal][]).map(([k, v]) =>\r\n                                        <option key={k} value={k}>{v.label}</option>\r\n                                    )}\r\n                                </select>\r\n                                <textarea className=\"form-textarea\" placeholder=\"Notes (optional)\" value={form.notes || ''}\r\n                                    onChange={e => setForm(f => ({ ...f, notes: e.target.value }))} rows={2} />\r\n                                <button className=\"btn btn-primary\" onClick={handleSubmit}>Add Document</button>\r\n                            </div>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\FinancialTracker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\FocusMode.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Circle' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":30,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Circle"},"fix":{"range":[345,353],"text":""},"desc":"Remove unused variable \"Circle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronDown' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":22,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ChevronDown"},"fix":{"range":[386,399],"text":""},"desc":"Remove unused variable \"ChevronDown\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RotateCcw' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":46,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"RotateCcw"},"fix":{"range":[412,423],"text":""},"desc":"Remove unused variable \"RotateCcw\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'venturesWithStats' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":14,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":49}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// Focus Mode ÔÇö Daily Sprint Planner\r\n// ============================================================\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport { useStore } from '../lib/store';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    Zap, CheckCircle2, Circle, AlertTriangle, Clock,\r\n    Star, ChevronDown, Play, Pause, RotateCcw\r\n} from 'lucide-react';\r\n\r\nexport default function FocusMode() {\r\n    const { state, updateTask, venturesWithStats } = useStore();\r\n    const [activeTimer, setActiveTimer] = useState<string | null>(null);\r\n    const [elapsed, setElapsed] = useState(0);\r\n    const [timerInterval, setTimerInterval] = useState<number | null>(null);\r\n    const [completedToday, setCompletedToday] = useState<string[]>([]);\r\n\r\n    const today = new Date().toISOString().split('T')[0];\r\n\r\n    // Top priority tasks ÔÇö P0/P1 in-progress or todo, not done\r\n    const focusTasks = useMemo(() => {\r\n        return state.tasks\r\n            .filter(t => ['todo', 'in-progress'].includes(t.status) && ['P0', 'P1'].includes(t.priority))\r\n            .sort((a, b) => {\r\n                const prioOrder = { P0: 0, P1: 1, P2: 2, P3: 3 };\r\n                return (prioOrder[a.priority] ?? 3) - (prioOrder[b.priority] ?? 3);\r\n            })\r\n            .slice(0, 5);\r\n    }, [state.tasks]);\r\n\r\n    // Today's completed\r\n    const todayDone = useMemo(() => {\r\n        return state.tasks.filter(t =>\r\n            t.status === 'done' &&\r\n            t.updated_at.startsWith(today)\r\n        );\r\n    }, [state.tasks, today]);\r\n\r\n    // Blockers\r\n    const blockers = useMemo(() =>\r\n        state.tasks.filter(t => t.status === 'blocked'),\r\n        [state.tasks]);\r\n\r\n    // Due today\r\n    const dueToday = useMemo(() =>\r\n        state.tasks.filter(t => t.due_date && t.due_date.startsWith(today) && t.status !== 'done'),\r\n        [state.tasks, today]);\r\n\r\n    // Timer functions\r\n    const startTimer = (taskId: string) => {\r\n        if (timerInterval) clearInterval(timerInterval);\r\n        setActiveTimer(taskId);\r\n        setElapsed(0);\r\n        const id = window.setInterval(() => {\r\n            setElapsed(prev => prev + 1);\r\n        }, 1000);\r\n        setTimerInterval(id);\r\n    };\r\n\r\n    const stopTimer = () => {\r\n        if (timerInterval) clearInterval(timerInterval);\r\n        setTimerInterval(null);\r\n        setActiveTimer(null);\r\n        setElapsed(0);\r\n    };\r\n\r\n    const markDone = (taskId: string) => {\r\n        const task = state.tasks.find(t => t.id === taskId);\r\n        if (task) {\r\n            updateTask({ ...task, status: 'done' });\r\n            setCompletedToday(prev => [...prev, taskId]);\r\n            if (activeTimer === taskId) stopTimer();\r\n        }\r\n    };\r\n\r\n    const formatTime = (seconds: number) => {\r\n        const m = Math.floor(seconds / 60);\r\n        const s = seconds % 60;\r\n        return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;\r\n    };\r\n\r\n    const greeting = new Date().getHours() < 12 ? 'Good morning' : new Date().getHours() < 17 ? 'Good afternoon' : 'Good evening';\r\n\r\n    return (\r\n        <div style={{ maxWidth: 800, margin: '0 auto' }}>\r\n            {/* Greeting */}\r\n            <motion.div\r\n                initial={{ opacity: 0, y: -10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                style={{ textAlign: 'center', marginBottom: 'var(--space-8)' }}\r\n            >\r\n                <h1 style={{\r\n                    fontSize: 'var(--font-size-3xl)', fontWeight: 800,\r\n                    background: 'linear-gradient(135deg, var(--color-accent-primary), var(--color-accent-secondary))',\r\n                    WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent',\r\n                    marginBottom: 'var(--space-2)',\r\n                }}>\r\n                    {greeting}, Ade ÔÜí\r\n                </h1>\r\n                <p style={{ fontSize: 'var(--font-size-md)', color: 'var(--color-text-muted)' }}>\r\n                    {todayDone.length + completedToday.length} tasks done today ┬À {focusTasks.length} in focus ┬À {blockers.length} blockers\r\n                </p>\r\n            </motion.div>\r\n\r\n            {/* Today's Focus ÔÇö Top 5 */}\r\n            <div style={{ marginBottom: 'var(--space-6)' }}>\r\n                <div style={{\r\n                    display: 'flex', alignItems: 'center', gap: 'var(--space-2)',\r\n                    marginBottom: 'var(--space-4)',\r\n                }}>\r\n                    <Zap size={18} color=\"var(--color-warning)\" />\r\n                    <h2 style={{ fontSize: 'var(--font-size-lg)', fontWeight: 700, color: 'var(--color-text-primary)' }}>\r\n                        Today's Focus\r\n                    </h2>\r\n                    <span style={{\r\n                        fontSize: 'var(--font-size-xs)', padding: '2px 8px',\r\n                        background: 'var(--color-warning-bg)', color: 'var(--color-warning)',\r\n                        borderRadius: 'var(--border-radius-full)', fontWeight: 600,\r\n                    }}>\r\n                        Top {focusTasks.length}\r\n                    </span>\r\n                </div>\r\n\r\n                <AnimatePresence>\r\n                    {focusTasks.map((task, i) => {\r\n                        const venture = state.ventures.find(v => v.id === task.venture_id);\r\n                        const isActive = activeTimer === task.id;\r\n\r\n                        return (\r\n                            <motion.div\r\n                                key={task.id}\r\n                                className=\"card focus-task-card\"\r\n                                initial={{ opacity: 0, x: -20 }}\r\n                                animate={{ opacity: 1, x: 0 }}\r\n                                exit={{ opacity: 0, x: 20, height: 0 }}\r\n                                transition={{ delay: i * 0.08 }}\r\n                                style={{\r\n                                    display: 'flex', alignItems: 'center', gap: 'var(--space-3)',\r\n                                    padding: 'var(--space-4)',\r\n                                    marginBottom: 'var(--space-3)',\r\n                                    border: isActive ? '1px solid var(--color-accent-primary)' : '1px solid var(--border-color)',\r\n                                    boxShadow: isActive ? '0 0 20px rgba(99, 102, 241, 0.15)' : 'none',\r\n                                }}\r\n                            >\r\n                                {/* Order badge */}\r\n                                <div style={{\r\n                                    width: 32, height: 32, borderRadius: '50%',\r\n                                    background: i === 0 ? 'linear-gradient(135deg, var(--color-accent-primary), var(--color-accent-secondary))' : 'var(--color-bg-tertiary)',\r\n                                    display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                                    color: i === 0 ? '#fff' : 'var(--color-text-muted)',\r\n                                    fontWeight: 700, fontSize: 'var(--font-size-sm)', flexShrink: 0,\r\n                                }}>\r\n                                    {i + 1}\r\n                                </div>\r\n\r\n                                {/* Task info */}\r\n                                <div style={{ flex: 1, minWidth: 0 }}>\r\n                                    <div style={{\r\n                                        fontSize: 'var(--font-size-md)', fontWeight: 600,\r\n                                        color: 'var(--color-text-primary)',\r\n                                        overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap',\r\n                                    }}>\r\n                                        {task.title}\r\n                                    </div>\r\n                                    <div style={{\r\n                                        display: 'flex', alignItems: 'center', gap: 'var(--space-2)',\r\n                                        marginTop: 4, fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)',\r\n                                    }}>\r\n                                        {venture && (\r\n                                            <span style={{ display: 'flex', alignItems: 'center', gap: 3 }}>\r\n                                                <span style={{ width: 6, height: 6, borderRadius: '50%', background: venture.color }} />\r\n                                                {venture.name}\r\n                                            </span>\r\n                                        )}\r\n                                        <span style={{\r\n                                            color: task.priority === 'P0' ? 'var(--color-danger)' : 'var(--color-warning)',\r\n                                            fontWeight: 600,\r\n                                        }}>\r\n                                            {task.priority === 'P0' ? '­ƒö┤' : '­ƒƒá'} {task.priority}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Timer */}\r\n                                {isActive && (\r\n                                    <div style={{\r\n                                        fontSize: 'var(--font-size-xl)', fontWeight: 700,\r\n                                        fontFamily: 'monospace', color: 'var(--color-accent-primary)',\r\n                                        minWidth: 60, textAlign: 'center',\r\n                                    }}>\r\n                                        {formatTime(elapsed)}\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Actions */}\r\n                                <div style={{ display: 'flex', gap: 'var(--space-2)', flexShrink: 0 }}>\r\n                                    {!isActive ? (\r\n                                        <button\r\n                                            className=\"btn btn-secondary btn-sm btn-icon\"\r\n                                            onClick={() => startTimer(task.id)}\r\n                                            title=\"Start timer\"\r\n                                        >\r\n                                            <Play size={14} />\r\n                                        </button>\r\n                                    ) : (\r\n                                        <button\r\n                                            className=\"btn btn-secondary btn-sm btn-icon\"\r\n                                            onClick={stopTimer}\r\n                                            title=\"Stop timer\"\r\n                                        >\r\n                                            <Pause size={14} />\r\n                                        </button>\r\n                                    )}\r\n                                    <button\r\n                                        className=\"btn btn-primary btn-sm btn-icon\"\r\n                                        onClick={() => markDone(task.id)}\r\n                                        title=\"Mark done\"\r\n                                    >\r\n                                        <CheckCircle2 size={14} />\r\n                                    </button>\r\n                                </div>\r\n                            </motion.div>\r\n                        );\r\n                    })}\r\n                </AnimatePresence>\r\n\r\n                {focusTasks.length === 0 && (\r\n                    <div className=\"empty-state\" style={{ padding: 'var(--space-8)' }}>\r\n                        <Star size={40} style={{ opacity: 0.15, marginBottom: 'var(--space-3)' }} />\r\n                        <div className=\"empty-state-title\">All clear! ­ƒÄë</div>\r\n                        <div className=\"empty-state-text\">\r\n                            No P0/P1 tasks in queue. Time to plan or review.\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Side panels */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 'var(--space-5)' }}>\r\n                {/* Due Today */}\r\n                <div className=\"card card-body\">\r\n                    <h3 style={{\r\n                        fontSize: 'var(--font-size-md)', fontWeight: 600,\r\n                        color: 'var(--color-text-primary)', marginBottom: 'var(--space-3)',\r\n                        display: 'flex', alignItems: 'center', gap: 6,\r\n                    }}>\r\n                        <Clock size={14} />\r\n                        Due Today\r\n                    </h3>\r\n                    {dueToday.length === 0 ? (\r\n                        <p style={{ fontSize: 'var(--font-size-sm)', color: 'var(--color-text-muted)' }}>Nothing due today</p>\r\n                    ) : (\r\n                        dueToday.map(t => {\r\n                            const v = state.ventures.find(v => v.id === t.venture_id);\r\n                            return (\r\n                                <div key={t.id} style={{\r\n                                    display: 'flex', alignItems: 'center', gap: 'var(--space-2)',\r\n                                    padding: '6px 0', borderBottom: '1px solid var(--border-color)',\r\n                                    fontSize: 'var(--font-size-sm)',\r\n                                }}>\r\n                                    <span style={{ width: 6, height: 6, borderRadius: '50%', background: v?.color || '#666' }} />\r\n                                    <span style={{ flex: 1, color: 'var(--color-text-secondary)' }}>{t.title}</span>\r\n                                </div>\r\n                            );\r\n                        })\r\n                    )}\r\n                </div>\r\n\r\n                {/* Blockers */}\r\n                <div className=\"card card-body\">\r\n                    <h3 style={{\r\n                        fontSize: 'var(--font-size-md)', fontWeight: 600,\r\n                        color: 'var(--color-text-primary)', marginBottom: 'var(--space-3)',\r\n                        display: 'flex', alignItems: 'center', gap: 6,\r\n                    }}>\r\n                        <AlertTriangle size={14} color=\"var(--color-danger)\" />\r\n                        Blockers ({blockers.length})\r\n                    </h3>\r\n                    {blockers.length === 0 ? (\r\n                        <p style={{ fontSize: 'var(--font-size-sm)', color: 'var(--color-success)' }}>No blockers Ô£ô</p>\r\n                    ) : (\r\n                        blockers.slice(0, 6).map(t => {\r\n                            const v = state.ventures.find(v => v.id === t.venture_id);\r\n                            return (\r\n                                <div key={t.id} style={{\r\n                                    display: 'flex', alignItems: 'center', gap: 'var(--space-2)',\r\n                                    padding: '6px 0', borderBottom: '1px solid var(--border-color)',\r\n                                    fontSize: 'var(--font-size-sm)',\r\n                                }}>\r\n                                    <AlertTriangle size={10} color=\"var(--color-danger)\" />\r\n                                    <span style={{ flex: 1, color: 'var(--color-text-secondary)' }}>{t.title}</span>\r\n                                    <span style={{ fontSize: 'var(--font-size-xs)', color: v?.color }}>{v?.prefix}</span>\r\n                                </div>\r\n                            );\r\n                        })\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Completed Today */}\r\n            {(todayDone.length + completedToday.length) > 0 && (\r\n                <div style={{ marginTop: 'var(--space-6)' }}>\r\n                    <h3 style={{\r\n                        fontSize: 'var(--font-size-md)', fontWeight: 600,\r\n                        color: 'var(--color-text-primary)', marginBottom: 'var(--space-3)',\r\n                        display: 'flex', alignItems: 'center', gap: 6,\r\n                    }}>\r\n                        <CheckCircle2 size={14} color=\"var(--color-success)\" />\r\n                        Completed Today ({todayDone.length + completedToday.length})\r\n                    </h3>\r\n                    <div className=\"card card-body\" style={{ padding: 0 }}>\r\n                        {todayDone.map(t => (\r\n                            <div key={t.id} style={{\r\n                                display: 'flex', alignItems: 'center', gap: 'var(--space-2)',\r\n                                padding: 'var(--space-3) var(--space-4)',\r\n                                borderBottom: '1px solid var(--border-color)',\r\n                                opacity: 0.6,\r\n                            }}>\r\n                                <CheckCircle2 size={12} color=\"var(--color-success)\" />\r\n                                <span style={{ fontSize: 'var(--font-size-sm)', color: 'var(--color-text-secondary)', textDecoration: 'line-through' }}>\r\n                                    {t.title}\r\n                                </span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\KanbanBoard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'GripVertical' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":23,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"GripVertical"},"fix":{"range":[432,446],"text":""},"desc":"Remove unused variable \"GripVertical\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronDown' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":36,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ChevronDown"},"fix":{"range":[446,459],"text":""},"desc":"Remove unused variable \"ChevronDown\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'dispatch' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":33,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deleteTask' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":33,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'venturesWithStats' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":33,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":71},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":156,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7469,7472],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7469,7472],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// Kanban Board ÔÇö Task Engine View\r\n// ============================================================\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport { useStore } from '../lib/store';\r\nimport type { Task, TaskStatus as TStatus } from '../lib/types';\r\nimport TaskForm from './TaskForm';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    Plus, GripVertical, ChevronDown, Filter,\r\n    AlertTriangle, Clock, CheckCircle2, Circle,\r\n    Eye, Archive\r\n} from 'lucide-react';\r\n\r\nconst COLUMNS: { key: TStatus; label: string; color: string; icon: React.ElementType }[] = [\r\n    { key: 'backlog', label: 'Backlog', color: '#64748B', icon: Archive },\r\n    { key: 'todo', label: 'Todo', color: '#3B82F6', icon: Circle },\r\n    { key: 'in-progress', label: 'In Progress', color: '#6366F1', icon: Clock },\r\n    { key: 'review', label: 'Review', color: '#8B5CF6', icon: Eye },\r\n    { key: 'done', label: 'Done', color: '#10B981', icon: CheckCircle2 },\r\n    { key: 'blocked', label: 'Blocked', color: '#EF4444', icon: AlertTriangle },\r\n];\r\n\r\nconst priorityLabels: Record<string, { emoji: string; color: string }> = {\r\n    P0: { emoji: '­ƒö┤', color: '#EF4444' },\r\n    P1: { emoji: '­ƒƒá', color: '#F59E0B' },\r\n    P2: { emoji: '­ƒƒí', color: '#EAB308' },\r\n    P3: { emoji: 'ÔÜ¬', color: '#64748B' },\r\n};\r\n\r\nexport default function KanbanBoard() {\r\n    const { state, dispatch, updateTask, deleteTask, venturesWithStats } = useStore();\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [editingTask, setEditingTask] = useState<Task | null>(null);\r\n    const [ventureFilter, setVentureFilter] = useState<string>('all');\r\n    const [priorityFilter, setPriorityFilter] = useState<string>('all');\r\n    const [draggedTask, setDraggedTask] = useState<Task | null>(null);\r\n\r\n    const filteredTasks = useMemo(() => {\r\n        let tasks = state.tasks;\r\n        if (ventureFilter !== 'all') tasks = tasks.filter(t => t.venture_id === ventureFilter);\r\n        if (priorityFilter !== 'all') tasks = tasks.filter(t => t.priority === priorityFilter);\r\n        return tasks;\r\n    }, [state.tasks, ventureFilter, priorityFilter]);\r\n\r\n    const handleDragStart = (e: React.DragEvent, task: Task) => {\r\n        setDraggedTask(task);\r\n        e.dataTransfer.effectAllowed = 'move';\r\n        e.dataTransfer.setData('text/plain', task.id);\r\n    };\r\n\r\n    const handleDragOver = (e: React.DragEvent) => {\r\n        e.preventDefault();\r\n        e.dataTransfer.dropEffect = 'move';\r\n    };\r\n\r\n    const handleDrop = (e: React.DragEvent, newStatus: TStatus) => {\r\n        e.preventDefault();\r\n        if (draggedTask && draggedTask.status !== newStatus) {\r\n            updateTask({ ...draggedTask, status: newStatus });\r\n        }\r\n        setDraggedTask(null);\r\n    };\r\n\r\n    const getVentureName = (ventureId: string) => {\r\n        return state.ventures.find(v => v.id === ventureId);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {/* Filters */}\r\n            <div style={{\r\n                display: 'flex', alignItems: 'center', gap: 'var(--space-3)',\r\n                marginBottom: 'var(--space-5)', flexWrap: 'wrap',\r\n            }}>\r\n                <button className=\"btn btn-primary btn-sm\" onClick={() => { setEditingTask(null); setShowForm(true); }}>\r\n                    <Plus size={14} /> New Task\r\n                </button>\r\n\r\n                <div className=\"filter-divider\" />\r\n\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 'var(--space-2)' }}>\r\n                    <Filter size={13} style={{ color: 'var(--color-text-muted)' }} />\r\n                    <select\r\n                        className=\"form-select\"\r\n                        style={{ width: 'auto', padding: '4px 12px', fontSize: 'var(--font-size-sm)' }}\r\n                        value={ventureFilter}\r\n                        onChange={e => setVentureFilter(e.target.value)}\r\n                    >\r\n                        <option value=\"all\">All Ventures</option>\r\n                        {state.ventures.map(v => (\r\n                            <option key={v.id} value={v.id}>{v.prefix} ÔÇö {v.name}</option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n\r\n                <select\r\n                    className=\"form-select\"\r\n                    style={{ width: 'auto', padding: '4px 12px', fontSize: 'var(--font-size-sm)' }}\r\n                    value={priorityFilter}\r\n                    onChange={e => setPriorityFilter(e.target.value)}\r\n                >\r\n                    <option value=\"all\">All Priorities</option>\r\n                    <option value=\"P0\">­ƒö┤ Critical</option>\r\n                    <option value=\"P1\">­ƒƒá High</option>\r\n                    <option value=\"P2\">­ƒƒí Medium</option>\r\n                    <option value=\"P3\">ÔÜ¬ Low</option>\r\n                </select>\r\n\r\n                <div style={{ marginLeft: 'auto', fontSize: 'var(--font-size-sm)', color: 'var(--color-text-muted)' }}>\r\n                    {filteredTasks.length} tasks\r\n                </div>\r\n            </div>\r\n\r\n            {/* Kanban Columns */}\r\n            <div className=\"kanban-board\">\r\n                {COLUMNS.map(col => {\r\n                    const columnTasks = filteredTasks\r\n                        .filter(t => t.status === col.key)\r\n                        .sort((a, b) => {\r\n                            const prioOrder = { P0: 0, P1: 1, P2: 2, P3: 3 };\r\n                            return (prioOrder[a.priority] ?? 3) - (prioOrder[b.priority] ?? 3);\r\n                        });\r\n\r\n                    return (\r\n                        <div\r\n                            key={col.key}\r\n                            className=\"kanban-column\"\r\n                            onDragOver={handleDragOver}\r\n                            onDrop={e => handleDrop(e, col.key)}\r\n                        >\r\n                            {/* Column Header */}\r\n                            <div className=\"kanban-column-header\">\r\n                                <div className=\"kanban-column-title\">\r\n                                    <span style={{ width: 8, height: 8, borderRadius: '50%', background: col.color }} />\r\n                                    {col.label}\r\n                                </div>\r\n                                <span className=\"kanban-column-count\">{columnTasks.length}</span>\r\n                            </div>\r\n\r\n                            {/* Column Body */}\r\n                            <div className=\"kanban-column-body\">\r\n                                <AnimatePresence>\r\n                                    {columnTasks.map(task => {\r\n                                        const venture = getVentureName(task.venture_id);\r\n                                        const prio = priorityLabels[task.priority];\r\n                                        const blockedByTask = task.blocked_by ? state.tasks.find(t => t.id === task.blocked_by) : null;\r\n                                        const hasDependents = state.tasks.some(t => t.blocked_by === task.id);\r\n\r\n                                        return (\r\n                                            <motion.div\r\n                                                key={task.id}\r\n                                                className=\"kanban-task-card\"\r\n                                                draggable\r\n                                                onDragStart={(e: any) => handleDragStart(e, task)}\r\n                                                onClick={() => { setEditingTask(task); setShowForm(true); }}\r\n                                                layout\r\n                                                initial={{ opacity: 0, scale: 0.95 }}\r\n                                                animate={{ opacity: 1, scale: 1 }}\r\n                                                exit={{ opacity: 0, scale: 0.95 }}\r\n                                                transition={{ duration: 0.2 }}\r\n                                            >\r\n                                                <div className=\"kanban-task-title\">{task.title}</div>\r\n                                                {/* Dependency indicator */}\r\n                                                {blockedByTask && (\r\n                                                    <div style={{\r\n                                                        display: 'flex', alignItems: 'center', gap: 4,\r\n                                                        fontSize: 'var(--font-size-xs)', color: 'var(--color-warning)',\r\n                                                        padding: '2px 0', marginBottom: 2,\r\n                                                    }}>\r\n                                                        ­ƒöù Blocked by: <em style={{ color: 'var(--color-text-muted)' }}>{blockedByTask.title}</em>\r\n                                                    </div>\r\n                                                )}\r\n                                                {hasDependents && (\r\n                                                    <div style={{\r\n                                                        display: 'flex', alignItems: 'center', gap: 4,\r\n                                                        fontSize: 'var(--font-size-xs)', color: 'var(--color-info)',\r\n                                                        padding: '2px 0', marginBottom: 2,\r\n                                                    }}>\r\n                                                        Ôøô´©Å Has dependents\r\n                                                    </div>\r\n                                                )}\r\n                                                <div className=\"kanban-task-meta\">\r\n                                                    <span className=\"kanban-task-priority\" style={{\r\n                                                        background: `${prio.color}18`,\r\n                                                        color: prio.color,\r\n                                                    }}>\r\n                                                        {prio.emoji} {task.priority}\r\n                                                    </span>\r\n                                                    {venture && (\r\n                                                        <span className=\"kanban-task-venture\">\r\n                                                            <span style={{\r\n                                                                display: 'inline-block', width: 6, height: 6,\r\n                                                                borderRadius: '50%', background: venture.color,\r\n                                                                marginRight: 4,\r\n                                                            }} />\r\n                                                            {venture.prefix}\r\n                                                        </span>\r\n                                                    )}\r\n                                                    {task.due_date && (\r\n                                                        <span style={{\r\n                                                            fontSize: 'var(--font-size-xs)',\r\n                                                            color: new Date(task.due_date) < new Date() ? 'var(--color-danger)' : 'var(--color-text-muted)',\r\n                                                        }}>\r\n                                                            {new Date(task.due_date).toLocaleDateString('en-GB', { day: 'numeric', month: 'short' })}\r\n                                                        </span>\r\n                                                    )}\r\n                                                </div>\r\n                                            </motion.div>\r\n                                        );\r\n                                    })}\r\n                                </AnimatePresence>\r\n\r\n                                {columnTasks.length === 0 && (\r\n                                    <div style={{\r\n                                        textAlign: 'center',\r\n                                        padding: 'var(--space-6) var(--space-3)',\r\n                                        color: 'var(--color-text-muted)',\r\n                                        fontSize: 'var(--font-size-xs)',\r\n                                    }}>\r\n                                        No tasks\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* Task Form Modal */}\r\n            {showForm && (\r\n                <TaskForm\r\n                    task={editingTask}\r\n                    ventureId={ventureFilter !== 'all' ? ventureFilter : undefined}\r\n                    onClose={() => { setShowForm(false); setEditingTask(null); }}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\PredictiveAlerts.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":26,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Calendar"},"fix":{"range":[584,594],"text":""},"desc":"Remove unused variable \"Calendar\"."}]},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. This value was memoized in source but not in compilation output.\n\nC:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\PredictiveAlerts.tsx:46:20\n   44 |     const { state, venturesWithStats, dispatch } = useStore();\n   45 |\n>  46 |     const alerts = useMemo<PredictiveAlert[]>(() => {\n      |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  47 |         const now = new Date();\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  48 |         const result: PredictiveAlert[] = [];\n      ÔÇª\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 194 |         });\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 195 |     }, [state, venturesWithStats]);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Could not preserve existing memoization\n  196 |\n  197 |     const criticalCount = alerts.filter(a => a.severity === 'critical').length;\n  198 |     const warningCount = alerts.filter(a => a.severity === 'warning').length;","line":46,"column":20,"nodeType":null,"endLine":195,"endColumn":35},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":313,"column":125,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":313,"endColumn":128,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15650,15653],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15650,15653],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// Predictive Alerts ÔÇö Proactive risk / deadline warnings\r\n// ============================================================\r\n// Scans ventures, tasks, milestones, risks, and financials to\r\n// surface timely alerts the user hasn't asked for yet.\r\n// ============================================================\r\n\r\nimport { useMemo } from 'react';\r\nimport { useStore } from '../lib/store';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    AlertTriangle, Clock, TrendingDown, Users,\r\n    ShieldAlert, Calendar, DollarSign, Zap, ArrowRight\r\n} from 'lucide-react';\r\n\r\n// --- Alert types ---\r\ninterface PredictiveAlert {\r\n    id: string;\r\n    severity: 'critical' | 'warning' | 'info';\r\n    category: 'deadline' | 'blocker' | 'velocity' | 'team' | 'risk' | 'financial';\r\n    title: string;\r\n    detail: string;\r\n    ventureId?: string;\r\n    actionLabel?: string;\r\n    actionView?: string;\r\n}\r\n\r\nconst categoryIcons: Record<string, typeof AlertTriangle> = {\r\n    deadline: Clock,\r\n    blocker: AlertTriangle,\r\n    velocity: TrendingDown,\r\n    team: Users,\r\n    risk: ShieldAlert,\r\n    financial: DollarSign,\r\n};\r\n\r\nconst severityColors: Record<string, string> = {\r\n    critical: 'var(--color-danger)',\r\n    warning: 'var(--color-warning)',\r\n    info: 'var(--color-info)',\r\n};\r\n\r\nexport default function PredictiveAlerts() {\r\n    const { state, venturesWithStats, dispatch } = useStore();\r\n\r\n    const alerts = useMemo<PredictiveAlert[]>(() => {\r\n        const now = new Date();\r\n        const result: PredictiveAlert[] = [];\r\n\r\n        // 1. Milestone deadline alerts\r\n        state.milestones.forEach(m => {\r\n            const target = new Date(m.target_date);\r\n            const daysUntil = Math.ceil((target.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\r\n            const v = state.ventures.find(v => v.id === m.venture_id);\r\n            if (daysUntil < 0 && m.progress < 100) {\r\n                result.push({\r\n                    id: `ms-overdue-${m.id}`,\r\n                    severity: 'critical',\r\n                    category: 'deadline',\r\n                    title: `\"${m.name}\" is overdue`,\r\n                    detail: `${v?.name}: This milestone was due ${Math.abs(daysUntil)} days ago and is only ${m.progress}% complete.`,\r\n                    ventureId: m.venture_id,\r\n                    actionLabel: 'View Timeline',\r\n                    actionView: 'timeline',\r\n                });\r\n            } else if (daysUntil <= 14 && daysUntil > 0 && m.progress < 50) {\r\n                result.push({\r\n                    id: `ms-atrisk-${m.id}`,\r\n                    severity: 'warning',\r\n                    category: 'deadline',\r\n                    title: `\"${m.name}\" at risk`,\r\n                    detail: `${v?.name}: Due in ${daysUntil} days but only ${m.progress}% done. Needs acceleration.`,\r\n                    ventureId: m.venture_id,\r\n                    actionLabel: 'View Timeline',\r\n                    actionView: 'timeline',\r\n                });\r\n            } else if (daysUntil <= 30 && daysUntil > 14 && m.progress < 25) {\r\n                result.push({\r\n                    id: `ms-slow-${m.id}`,\r\n                    severity: 'info',\r\n                    category: 'velocity',\r\n                    title: `\"${m.name}\" progressing slowly`,\r\n                    detail: `${v?.name}: ${daysUntil} days remaining but only ${m.progress}% progress.`,\r\n                    ventureId: m.venture_id,\r\n                });\r\n            }\r\n        });\r\n\r\n        // 2. Blocker accumulation\r\n        venturesWithStats.forEach(v => {\r\n            if (v.tasks.blocked >= 2) {\r\n                result.push({\r\n                    id: `blocker-${v.id}`,\r\n                    severity: v.tasks.blocked >= 3 ? 'critical' : 'warning',\r\n                    category: 'blocker',\r\n                    title: `${v.name} has ${v.tasks.blocked} blocked tasks`,\r\n                    detail: `Multiple blockers suggest systemic issues. Review dependencies and external requirements.`,\r\n                    ventureId: v.id,\r\n                    actionLabel: 'View Tasks',\r\n                    actionView: 'tasks',\r\n                });\r\n            }\r\n        });\r\n\r\n        // 3. Team capacity gaps\r\n        venturesWithStats.forEach(v => {\r\n            const hiringCount = state.teamRoles.filter(r => r.venture_id === v.id && r.status === 'hiring').length;\r\n            if (hiringCount >= 3 && v.tier === 'Active Build') {\r\n                result.push({\r\n                    id: `team-${v.id}`,\r\n                    severity: 'warning',\r\n                    category: 'team',\r\n                    title: `${v.name}: ${hiringCount} unfilled roles`,\r\n                    detail: `Active Build venture with significant team gaps. This could delay milestones.`,\r\n                    ventureId: v.id,\r\n                });\r\n            }\r\n        });\r\n\r\n        // 4. Health score decline\r\n        venturesWithStats.forEach(v => {\r\n            const snapshots = state.healthSnapshots\r\n                .filter(s => s.venture_id === v.id)\r\n                .sort((a, b) => new Date(b.recorded_at).getTime() - new Date(a.recorded_at).getTime());\r\n            if (snapshots.length >= 2) {\r\n                const latest = snapshots[0].score;\r\n                const previous = snapshots[1].score;\r\n                if (latest < previous - 5) {\r\n                    result.push({\r\n                        id: `health-decline-${v.id}`,\r\n                        severity: 'warning',\r\n                        category: 'velocity',\r\n                        title: `${v.name} health declining`,\r\n                        detail: `Health dropped from ${previous} ÔåÆ ${latest}. Review recent changes and blockers.`,\r\n                        ventureId: v.id,\r\n                        actionLabel: 'View Analytics',\r\n                        actionView: 'analytics',\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        // 5. Active high-impact risks\r\n        state.risks.filter(r => r.status === 'active' && r.likelihood >= 3 && r.impact >= 4).forEach(r => {\r\n            const v = state.ventures.find(v => v.id === r.venture_id);\r\n            result.push({\r\n                id: `risk-${r.id}`,\r\n                severity: r.likelihood >= 4 && r.impact >= 4 ? 'critical' : 'warning',\r\n                category: 'risk',\r\n                title: r.title,\r\n                detail: `${v?.name}: ${r.description || 'High likelihood ├ù high impact risk'}.${r.mitigation ? ' Mitigation: ' + r.mitigation : ''}`,\r\n                ventureId: r.venture_id,\r\n                actionLabel: 'View Risks',\r\n                actionView: 'risks',\r\n            });\r\n        });\r\n\r\n        // 6. No tasks due soon (stagnation)\r\n        const tasksInProgress = state.tasks.filter(t => t.status === 'in-progress');\r\n        if (tasksInProgress.length === 0) {\r\n            result.push({\r\n                id: 'stagnation',\r\n                severity: 'warning',\r\n                category: 'velocity',\r\n                title: 'No tasks currently in progress',\r\n                detail: 'There are no active tasks across your entire portfolio. Consider starting work on high-priority items.',\r\n                actionLabel: 'View Tasks',\r\n                actionView: 'tasks',\r\n            });\r\n        }\r\n\r\n        // 7. Overdue recurring tasks\r\n        state.recurringTasks.filter(rt => rt.active).forEach(rt => {\r\n            const due = new Date(rt.next_due);\r\n            if (due < now) {\r\n                const v = state.ventures.find(v => v.id === rt.venture_id);\r\n                result.push({\r\n                    id: `recurring-${rt.id}`,\r\n                    severity: 'info',\r\n                    category: 'deadline',\r\n                    title: `Recurring task overdue: ${rt.title}`,\r\n                    detail: `${v?.name}: Was due ${Math.ceil((now.getTime() - due.getTime()) / (1000 * 60 * 60 * 24))} days ago. Generate or reschedule.`,\r\n                    ventureId: rt.venture_id,\r\n                    actionLabel: 'View Recurring',\r\n                    actionView: 'recurring',\r\n                });\r\n            }\r\n        });\r\n\r\n        // Sort: critical first, then warning, then info\r\n        return result.sort((a, b) => {\r\n            const sev = { critical: 0, warning: 1, info: 2 };\r\n            return sev[a.severity] - sev[b.severity];\r\n        });\r\n    }, [state, venturesWithStats]);\r\n\r\n    const criticalCount = alerts.filter(a => a.severity === 'critical').length;\r\n    const warningCount = alerts.filter(a => a.severity === 'warning').length;\r\n    const infoCount = alerts.filter(a => a.severity === 'info').length;\r\n\r\n    return (\r\n        <div>\r\n            <div style={{\r\n                display: 'flex', alignItems: 'center', justifyContent: 'space-between',\r\n                marginBottom: 'var(--space-5)',\r\n            }}>\r\n                <div>\r\n                    <h2 style={{\r\n                        fontSize: 'var(--font-size-xl)', fontWeight: 700,\r\n                        color: 'var(--color-text-primary)', marginBottom: 4,\r\n                    }}>\r\n                        <Zap size={20} style={{ display: 'inline', marginRight: 8, verticalAlign: 'middle' }} />\r\n                        Predictive Alerts\r\n                    </h2>\r\n                    <p style={{ fontSize: 'var(--font-size-sm)', color: 'var(--color-text-muted)' }}>\r\n                        AI-powered early warnings across your portfolio\r\n                    </p>\r\n                </div>\r\n                <div style={{ display: 'flex', gap: 'var(--space-3)' }}>\r\n                    {criticalCount > 0 && (\r\n                        <span className=\"badge\" style={{ background: 'var(--color-danger)', color: '#fff', padding: '4px 12px' }}>\r\n                            ­ƒÜ¿ {criticalCount} critical\r\n                        </span>\r\n                    )}\r\n                    {warningCount > 0 && (\r\n                        <span className=\"badge\" style={{ background: 'var(--color-warning)', color: '#000', padding: '4px 12px' }}>\r\n                            ÔÜá´©Å {warningCount} warning\r\n                        </span>\r\n                    )}\r\n                    {infoCount > 0 && (\r\n                        <span className=\"badge\" style={{ background: 'var(--color-info)', color: '#fff', padding: '4px 12px' }}>\r\n                            ­ƒÆí {infoCount} info\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Alert cards */}\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: 'var(--space-3)' }}>\r\n                <AnimatePresence>\r\n                    {alerts.map((alert, i) => {\r\n                        const Icon = categoryIcons[alert.category] || AlertTriangle;\r\n                        const v = alert.ventureId ? state.ventures.find(v => v.id === alert.ventureId) : null;\r\n                        return (\r\n                            <motion.div\r\n                                key={alert.id}\r\n                                className=\"card card-body\"\r\n                                initial={{ opacity: 0, y: 10 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                transition={{ delay: i * 0.03 }}\r\n                                style={{\r\n                                    borderLeft: `3px solid ${severityColors[alert.severity]}`,\r\n                                }}\r\n                            >\r\n                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\r\n                                    <div style={{ flex: 1 }}>\r\n                                        <div style={{\r\n                                            display: 'flex', alignItems: 'center', gap: 'var(--space-2)',\r\n                                            marginBottom: 'var(--space-2)',\r\n                                        }}>\r\n                                            <Icon size={14} color={severityColors[alert.severity]} />\r\n                                            <span style={{\r\n                                                fontSize: 'var(--font-size-xs)',\r\n                                                textTransform: 'uppercase',\r\n                                                fontWeight: 700,\r\n                                                letterSpacing: '0.5px',\r\n                                                color: severityColors[alert.severity],\r\n                                            }}>\r\n                                                {alert.severity}\r\n                                            </span>\r\n                                            {v && (\r\n                                                <span style={{\r\n                                                    fontSize: 'var(--font-size-xs)',\r\n                                                    padding: '1px 8px',\r\n                                                    borderRadius: 'var(--border-radius-full)',\r\n                                                    background: `${v.color}18`,\r\n                                                    color: v.color,\r\n                                                    fontWeight: 600,\r\n                                                }}>\r\n                                                    {v.prefix}\r\n                                                </span>\r\n                                            )}\r\n                                            <span style={{\r\n                                                fontSize: 'var(--font-size-xs)',\r\n                                                padding: '1px 8px',\r\n                                                borderRadius: 'var(--border-radius-full)',\r\n                                                background: 'var(--color-bg-secondary)',\r\n                                                color: 'var(--color-text-muted)',\r\n                                            }}>\r\n                                                {alert.category}\r\n                                            </span>\r\n                                        </div>\r\n                                        <div style={{\r\n                                            fontWeight: 600,\r\n                                            fontSize: 'var(--font-size-md)',\r\n                                            color: 'var(--color-text-primary)',\r\n                                            marginBottom: 4,\r\n                                        }}>\r\n                                            {alert.title}\r\n                                        </div>\r\n                                        <div style={{\r\n                                            fontSize: 'var(--font-size-sm)',\r\n                                            color: 'var(--color-text-secondary)',\r\n                                            lineHeight: 1.5,\r\n                                        }}>\r\n                                            {alert.detail}\r\n                                        </div>\r\n                                    </div>\r\n                                    {alert.actionLabel && alert.actionView && (\r\n                                        <button\r\n                                            className=\"btn btn-secondary btn-sm\"\r\n                                            style={{ whiteSpace: 'nowrap', marginLeft: 'var(--space-3)' }}\r\n                                            onClick={() => dispatch({ type: 'SET_ACTIVE_VIEW', payload: alert.actionView as any })}\r\n                                        >\r\n                                            {alert.actionLabel}\r\n                                            <ArrowRight size={12} />\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            </motion.div>\r\n                        );\r\n                    })}\r\n                </AnimatePresence>\r\n            </div>\r\n\r\n            {alerts.length === 0 && (\r\n                <div className=\"empty-state\" style={{ padding: 'var(--space-8)' }}>\r\n                    <Zap size={40} style={{ opacity: 0.15, marginBottom: 'var(--space-3)' }} />\r\n                    <div className=\"empty-state-title\">All clear! ­ƒÄë</div>\r\n                    <div className=\"empty-state-text\">\r\n                        No predictive alerts at this time. Your portfolio looks healthy.\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\RecurringTasks.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":43,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Clock"},"fix":{"range":[420,427],"text":""},"desc":"Remove unused variable \"Clock\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":29,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1175,1178],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1175,1178],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":213,"column":106,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":213,"endColumn":109,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12672,12675],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12672,12675],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// Recurring Tasks Manager\r\n// ============================================================\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport { useStore } from '../lib/store';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport type { RecurringTask, RecurrencePattern } from '../lib/types';\r\nimport {\r\n    RefreshCw, Plus, X, Play, Pause, Clock, Calendar\r\n} from 'lucide-react';\r\n\r\nconst recurrenceLabels: Record<RecurrencePattern, string> = {\r\n    daily: 'Daily', weekly: 'Weekly', biweekly: 'Bi-Weekly', monthly: 'Monthly',\r\n};\r\n\r\nconst recurrenceColors: Record<RecurrencePattern, string> = {\r\n    daily: '#EF4444', weekly: '#3B82F6', biweekly: '#6366F1', monthly: '#10B981',\r\n};\r\n\r\nexport default function RecurringTasks() {\r\n    const { state, addRecurringTask, dispatch, addTask } = useStore();\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [form, setForm] = useState<Partial<RecurringTask>>({\r\n        recurrence: 'weekly', priority: 'P2', active: true, venture_id: '',\r\n    });\r\n\r\n    const grouped = useMemo(() => {\r\n        const groups: Record<string, { venture: any; tasks: RecurringTask[] }> = {};\r\n        state.recurringTasks.forEach(t => {\r\n            const v = state.ventures.find(v => v.id === t.venture_id);\r\n            if (!v) return;\r\n            if (!groups[v.id]) groups[v.id] = { venture: v, tasks: [] };\r\n            groups[v.id].tasks.push(t);\r\n        });\r\n        return Object.values(groups);\r\n    }, [state.recurringTasks, state.ventures]);\r\n\r\n    const handleSubmit = () => {\r\n        if (!form.venture_id || !form.title) return;\r\n        addRecurringTask({\r\n            ...form,\r\n            next_due: form.next_due || new Date().toISOString().split('T')[0],\r\n        } as Omit<RecurringTask, 'id' | 'created_at'>);\r\n        setShowForm(false);\r\n        setForm({ recurrence: 'weekly', priority: 'P2', active: true, venture_id: '' });\r\n    };\r\n\r\n    const generateTask = (rt: RecurringTask) => {\r\n        addTask({\r\n            venture_id: rt.venture_id,\r\n            title: `${rt.title} (${new Date().toLocaleDateString('en-GB', { day: 'numeric', month: 'short' })})`,\r\n            description: rt.description,\r\n            status: 'todo',\r\n            priority: rt.priority,\r\n            due_date: rt.next_due,\r\n            tags: ['recurring'],\r\n        });\r\n        // Update next_due\r\n        const d = new Date(rt.next_due);\r\n        switch (rt.recurrence) {\r\n            case 'daily': d.setDate(d.getDate() + 1); break;\r\n            case 'weekly': d.setDate(d.getDate() + 7); break;\r\n            case 'biweekly': d.setDate(d.getDate() + 14); break;\r\n            case 'monthly': d.setMonth(d.getMonth() + 1); break;\r\n        }\r\n        dispatch({\r\n            type: 'UPDATE_RECURRING_TASK',\r\n            payload: { ...rt, next_due: d.toISOString().split('T')[0], last_generated: new Date().toISOString() }\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div style={{\r\n                display: 'flex', alignItems: 'center', justifyContent: 'space-between',\r\n                marginBottom: 'var(--space-5)',\r\n            }}>\r\n                <div>\r\n                    <h2 style={{ fontSize: 'var(--font-size-xl)', fontWeight: 700, color: 'var(--color-text-primary)', marginBottom: 4 }}>\r\n                        <RefreshCw size={20} style={{ display: 'inline', marginRight: 8, verticalAlign: 'middle' }} />\r\n                        Recurring Tasks\r\n                    </h2>\r\n                    <p style={{ fontSize: 'var(--font-size-sm)', color: 'var(--color-text-muted)' }}>\r\n                        {state.recurringTasks.filter(t => t.active).length} active ┬À {state.recurringTasks.length} total\r\n                    </p>\r\n                </div>\r\n                <button className=\"btn btn-primary btn-sm\" onClick={() => setShowForm(true)}>\r\n                    <Plus size={14} /> Add Recurring Task\r\n                </button>\r\n            </div>\r\n\r\n            {/* Due now alert */}\r\n            {state.recurringTasks.filter(t => t.active && t.next_due <= new Date().toISOString().split('T')[0]).length > 0 && (\r\n                <div className=\"card card-body\" style={{\r\n                    marginBottom: 'var(--space-5)',\r\n                    borderLeft: '3px solid var(--color-warning)',\r\n                    background: 'var(--color-warning-bg)',\r\n                }}>\r\n                    <div style={{ fontWeight: 600, marginBottom: 'var(--space-2)', color: 'var(--color-warning)' }}>\r\n                        ÔÅ░ Tasks due for generation\r\n                    </div>\r\n                    {state.recurringTasks\r\n                        .filter(t => t.active && t.next_due <= new Date().toISOString().split('T')[0])\r\n                        .map(t => (\r\n                            <div key={t.id} style={{\r\n                                display: 'flex', alignItems: 'center', gap: 'var(--space-3)',\r\n                                padding: '6px 0',\r\n                            }}>\r\n                                <span style={{ flex: 1, fontSize: 'var(--font-size-sm)', color: 'var(--color-text-secondary)' }}>\r\n                                    {t.title}\r\n                                </span>\r\n                                <button className=\"btn btn-primary btn-sm\" onClick={() => generateTask(t)}>\r\n                                    <Play size={12} /> Generate\r\n                                </button>\r\n                            </div>\r\n                        ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Grouped by venture */}\r\n            {grouped.length === 0 ? (\r\n                <div className=\"empty-state\" style={{ padding: 'var(--space-8)' }}>\r\n                    <RefreshCw size={40} style={{ opacity: 0.15, marginBottom: 'var(--space-3)' }} />\r\n                    <div className=\"empty-state-title\">No recurring tasks</div>\r\n                    <div className=\"empty-state-text\">Create recurring tasks for routine work like \"Check analytics every Friday\"</div>\r\n                </div>\r\n            ) : (\r\n                grouped.map((group, gi) => (\r\n                    <motion.div key={group.venture.id}\r\n                        initial={{ opacity: 0 }} animate={{ opacity: 1 }}\r\n                        transition={{ delay: gi * 0.05 }}\r\n                        style={{ marginBottom: 'var(--space-5)' }}>\r\n                        <div style={{\r\n                            display: 'flex', alignItems: 'center', gap: 'var(--space-2)',\r\n                            marginBottom: 'var(--space-3)',\r\n                        }}>\r\n                            <span style={{ width: 8, height: 8, borderRadius: '50%', background: group.venture.color }} />\r\n                            <h3 style={{ fontSize: 'var(--font-size-md)', fontWeight: 600, color: 'var(--color-text-primary)' }}>\r\n                                {group.venture.name}\r\n                            </h3>\r\n                        </div>\r\n\r\n                        {group.tasks.map(rt => (\r\n                            <div key={rt.id} className=\"card card-body\" style={{\r\n                                display: 'flex', alignItems: 'center', gap: 'var(--space-3)',\r\n                                marginBottom: 'var(--space-2)', opacity: rt.active ? 1 : 0.5,\r\n                            }}>\r\n                                <RefreshCw size={14} color={recurrenceColors[rt.recurrence]} />\r\n                                <div style={{ flex: 1 }}>\r\n                                    <div style={{ fontWeight: 600, fontSize: 'var(--font-size-sm)', color: 'var(--color-text-primary)' }}>\r\n                                        {rt.title}\r\n                                    </div>\r\n                                    <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)', display: 'flex', gap: 'var(--space-2)' }}>\r\n                                        <span style={{\r\n                                            padding: '1px 6px', borderRadius: 'var(--border-radius-full)',\r\n                                            background: `${recurrenceColors[rt.recurrence]}18`, color: recurrenceColors[rt.recurrence],\r\n                                        }}>\r\n                                            {recurrenceLabels[rt.recurrence]}\r\n                                        </span>\r\n                                        <span>Next: {new Date(rt.next_due).toLocaleDateString('en-GB', { day: 'numeric', month: 'short' })}</span>\r\n                                        <span>{rt.priority}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <button className=\"btn btn-secondary btn-sm btn-icon\"\r\n                                    onClick={() => dispatch({ type: 'UPDATE_RECURRING_TASK', payload: { ...rt, active: !rt.active } })}\r\n                                    title={rt.active ? 'Pause' : 'Resume'}>\r\n                                    {rt.active ? <Pause size={12} /> : <Play size={12} />}\r\n                                </button>\r\n                                <button className=\"btn btn-primary btn-sm btn-icon\" onClick={() => generateTask(rt)} title=\"Generate now\">\r\n                                    <Calendar size={12} />\r\n                                </button>\r\n                                <button className=\"btn btn-secondary btn-sm btn-icon\" style={{ padding: 4 }}\r\n                                    onClick={() => dispatch({ type: 'DELETE_RECURRING_TASK', payload: rt.id })}>\r\n                                    <X size={12} />\r\n                                </button>\r\n                            </div>\r\n                        ))}\r\n                    </motion.div>\r\n                ))\r\n            )}\r\n\r\n            {/* Add form modal */}\r\n            <AnimatePresence>\r\n                {showForm && (\r\n                    <motion.div className=\"modal-overlay\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}\r\n                        onClick={() => setShowForm(false)}>\r\n                        <motion.div className=\"modal\" style={{ width: 480 }}\r\n                            initial={{ scale: 0.9, opacity: 0 }} animate={{ scale: 1, opacity: 1 }} exit={{ scale: 0.9, opacity: 0 }}\r\n                            onClick={e => e.stopPropagation()}>\r\n                            <div className=\"modal-header\">\r\n                                <h3 className=\"modal-title\">Add Recurring Task</h3>\r\n                                <button className=\"btn btn-secondary btn-sm btn-icon\" onClick={() => setShowForm(false)}><X size={14} /></button>\r\n                            </div>\r\n                            <div style={{ padding: 'var(--space-4)', display: 'flex', flexDirection: 'column', gap: 'var(--space-3)' }}>\r\n                                <select className=\"form-select\" value={form.venture_id}\r\n                                    onChange={e => setForm(f => ({ ...f, venture_id: e.target.value }))}>\r\n                                    <option value=\"\">Select venture...</option>\r\n                                    {state.ventures.map(v => <option key={v.id} value={v.id}>{v.prefix} ÔÇö {v.name}</option>)}\r\n                                </select>\r\n                                <input className=\"form-input\" placeholder=\"Task title (e.g., Check Twitter analytics)\" value={form.title || ''}\r\n                                    onChange={e => setForm(f => ({ ...f, title: e.target.value }))} />\r\n                                <textarea className=\"form-textarea\" placeholder=\"Description (optional)\" value={form.description || ''}\r\n                                    onChange={e => setForm(f => ({ ...f, description: e.target.value }))} rows={2} />\r\n                                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 'var(--space-3)' }}>\r\n                                    <select className=\"form-select\" value={form.recurrence}\r\n                                        onChange={e => setForm(f => ({ ...f, recurrence: e.target.value as RecurrencePattern }))}>\r\n                                        {(Object.entries(recurrenceLabels) as [RecurrencePattern, string][]).map(([k, v]) =>\r\n                                            <option key={k} value={k}>{v}</option>\r\n                                        )}\r\n                                    </select>\r\n                                    <select className=\"form-select\" value={form.priority}\r\n                                        onChange={e => setForm(f => ({ ...f, priority: e.target.value as any }))}>\r\n                                        <option value=\"P0\">­ƒö┤ P0 ÔÇö Critical</option>\r\n                                        <option value=\"P1\">­ƒƒá P1 ÔÇö High</option>\r\n                                        <option value=\"P2\">­ƒƒí P2 ÔÇö Medium</option>\r\n                                        <option value=\"P3\">ÔÜ¬ P3 ÔÇö Low</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)', marginBottom: 4, display: 'block' }}>\r\n                                        First due date\r\n                                    </label>\r\n                                    <input className=\"form-input\" type=\"date\" value={form.next_due || ''}\r\n                                        onChange={e => setForm(f => ({ ...f, next_due: e.target.value }))} />\r\n                                </div>\r\n                                <button className=\"btn btn-primary\" onClick={handleSubmit}>Create Recurring Task</button>\r\n                            </div>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\ResourceSharing.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useMemo' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":27,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useMemo"},"fix":{"range":[206,215],"text":""},"desc":"Remove unused variable \"useMemo\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":49,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Users"},"fix":{"range":[438,445],"text":""},"desc":"Remove unused variable \"Users\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":56,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Clock"},"fix":{"range":[445,452],"text":""},"desc":"Remove unused variable \"Clock\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":157,"column":107,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":157,"endColumn":110,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8878,8881],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8878,8881],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// Resource Sharing ÔÇö Cross-venture resource allocation\r\n// ============================================================\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport { useStore } from '../lib/store';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport type { ResourceSharing } from '../lib/types';\r\nimport {\r\n    Share2, Plus, X, ArrowRight, Calendar, Users, Clock\r\n} from 'lucide-react';\r\n\r\nconst resourceTypeColors: Record<string, string> = {\r\n    person: '#3B82F6', tool: '#10B981', budget: '#F59E0B', knowledge: '#6366F1',\r\n};\r\n\r\nexport default function ResourceSharingView() {\r\n    const { state, addResourceSharing, dispatch } = useStore();\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [form, setForm] = useState<Partial<ResourceSharing>>({\r\n        resource_type: 'person', status: 'active',\r\n    });\r\n\r\n    const active = state.resourceSharing.filter(r => r.status === 'active');\r\n    const completed = state.resourceSharing.filter(r => r.status === 'completed');\r\n\r\n    const handleSubmit = () => {\r\n        if (!form.from_venture_id || !form.to_venture_id || !form.resource_name) return;\r\n        addResourceSharing(form as Omit<ResourceSharing, 'id' | 'created_at'>);\r\n        setShowForm(false);\r\n        setForm({ resource_type: 'person', status: 'active' });\r\n    };\r\n\r\n    const renderCard = (rs: ResourceSharing) => {\r\n        const fromV = state.ventures.find(v => v.id === rs.from_venture_id);\r\n        const toV = state.ventures.find(v => v.id === rs.to_venture_id);\r\n        return (\r\n            <motion.div key={rs.id} className=\"card card-body\"\r\n                initial={{ opacity: 0, y: 8 }} animate={{ opacity: 1, y: 0 }}\r\n                style={{ opacity: rs.status === 'completed' ? 0.6 : 1 }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: 'var(--space-2)' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: 'var(--space-2)' }}>\r\n                        <span style={{\r\n                            padding: '2px 8px', borderRadius: 'var(--border-radius-full)',\r\n                            background: `${resourceTypeColors[rs.resource_type] || '#666'}18`,\r\n                            color: resourceTypeColors[rs.resource_type] || '#666',\r\n                            fontSize: 'var(--font-size-xs)', fontWeight: 600,\r\n                        }}>\r\n                            {rs.resource_type}\r\n                        </span>\r\n                    </div>\r\n                    <button className=\"btn btn-secondary btn-sm btn-icon\" style={{ padding: 4 }}\r\n                        onClick={() => dispatch({ type: 'DELETE_RESOURCE_SHARING', payload: rs.id })}>\r\n                        <X size={12} />\r\n                    </button>\r\n                </div>\r\n                <div style={{ fontWeight: 600, fontSize: 'var(--font-size-md)', color: 'var(--color-text-primary)', marginBottom: 'var(--space-2)' }}>\r\n                    {rs.resource_name}\r\n                </div>\r\n                <div style={{\r\n                    display: 'flex', alignItems: 'center', gap: 'var(--space-2)',\r\n                    fontSize: 'var(--font-size-sm)',\r\n                }}>\r\n                    {fromV && (\r\n                        <span style={{ display: 'flex', alignItems: 'center', gap: 4, color: fromV.color }}>\r\n                            <span style={{ width: 6, height: 6, borderRadius: '50%', background: fromV.color }} />\r\n                            {fromV.prefix}\r\n                        </span>\r\n                    )}\r\n                    <ArrowRight size={14} color=\"var(--color-text-muted)\" />\r\n                    {toV && (\r\n                        <span style={{ display: 'flex', alignItems: 'center', gap: 4, color: toV.color }}>\r\n                            <span style={{ width: 6, height: 6, borderRadius: '50%', background: toV.color }} />\r\n                            {toV.prefix}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n                {rs.start_date && (\r\n                    <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)', marginTop: 'var(--space-2)' }}>\r\n                        <Calendar size={10} style={{ display: 'inline', marginRight: 4 }} />\r\n                        {new Date(rs.start_date).toLocaleDateString('en-GB', { day: 'numeric', month: 'short' })}\r\n                        {rs.end_date && ` ÔÇö ${new Date(rs.end_date).toLocaleDateString('en-GB', { day: 'numeric', month: 'short' })}`}\r\n                    </div>\r\n                )}\r\n            </motion.div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div style={{\r\n                display: 'flex', alignItems: 'center', justifyContent: 'space-between',\r\n                marginBottom: 'var(--space-5)',\r\n            }}>\r\n                <div>\r\n                    <h2 style={{ fontSize: 'var(--font-size-xl)', fontWeight: 700, color: 'var(--color-text-primary)', marginBottom: 4 }}>\r\n                        <Share2 size={20} style={{ display: 'inline', marginRight: 8, verticalAlign: 'middle' }} />\r\n                        Resource Sharing\r\n                    </h2>\r\n                    <p style={{ fontSize: 'var(--font-size-sm)', color: 'var(--color-text-muted)' }}>\r\n                        {active.length} active ┬À {completed.length} completed\r\n                    </p>\r\n                </div>\r\n                <button className=\"btn btn-primary btn-sm\" onClick={() => setShowForm(true)}>\r\n                    <Plus size={14} /> Share Resource\r\n                </button>\r\n            </div>\r\n\r\n            {/* Active */}\r\n            {active.length > 0 && (\r\n                <>\r\n                    <h3 style={{ fontSize: 'var(--font-size-md)', fontWeight: 600, marginBottom: 'var(--space-3)', color: 'var(--color-text-primary)' }}>\r\n                        Active Sharing\r\n                    </h3>\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))', gap: 'var(--space-3)', marginBottom: 'var(--space-6)' }}>\r\n                        {active.map(renderCard)}\r\n                    </div>\r\n                </>\r\n            )}\r\n\r\n            {/* Completed */}\r\n            {completed.length > 0 && (\r\n                <>\r\n                    <h3 style={{ fontSize: 'var(--font-size-md)', fontWeight: 600, marginBottom: 'var(--space-3)', color: 'var(--color-text-muted)' }}>\r\n                        Completed\r\n                    </h3>\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))', gap: 'var(--space-3)', marginBottom: 'var(--space-6)' }}>\r\n                        {completed.map(renderCard)}\r\n                    </div>\r\n                </>\r\n            )}\r\n\r\n            {state.resourceSharing.length === 0 && (\r\n                <div className=\"empty-state\" style={{ padding: 'var(--space-8)' }}>\r\n                    <Share2 size={40} style={{ opacity: 0.15, marginBottom: 'var(--space-3)' }} />\r\n                    <div className=\"empty-state-title\">No shared resources</div>\r\n                    <div className=\"empty-state-text\">Share team members, tools, or budget between ventures.</div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Form modal */}\r\n            <AnimatePresence>\r\n                {showForm && (\r\n                    <motion.div className=\"modal-overlay\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}\r\n                        onClick={() => setShowForm(false)}>\r\n                        <motion.div className=\"modal\" style={{ width: 480 }}\r\n                            initial={{ scale: 0.9, opacity: 0 }} animate={{ scale: 1, opacity: 1 }} exit={{ scale: 0.9, opacity: 0 }}\r\n                            onClick={e => e.stopPropagation()}>\r\n                            <div className=\"modal-header\">\r\n                                <h3 className=\"modal-title\">Share Resource</h3>\r\n                                <button className=\"btn btn-secondary btn-sm btn-icon\" onClick={() => setShowForm(false)}><X size={14} /></button>\r\n                            </div>\r\n                            <div style={{ padding: 'var(--space-4)', display: 'flex', flexDirection: 'column', gap: 'var(--space-3)' }}>\r\n                                <input className=\"form-input\" placeholder=\"Resource name (e.g., Sarah ÔÇö Designer)\" value={form.resource_name || ''}\r\n                                    onChange={e => setForm(f => ({ ...f, resource_name: e.target.value }))} />\r\n                                <select className=\"form-select\" value={form.resource_type}\r\n                                    onChange={e => setForm(f => ({ ...f, resource_type: e.target.value as any }))}>\r\n                                    <option value=\"person\">Person</option>\r\n                                    <option value=\"tool\">Tool / License</option>\r\n                                    <option value=\"budget\">Budget</option>\r\n                                    <option value=\"knowledge\">Knowledge</option>\r\n                                </select>\r\n                                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 'var(--space-3)' }}>\r\n                                    <div>\r\n                                        <label style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)', marginBottom: 4, display: 'block' }}>From venture</label>\r\n                                        <select className=\"form-select\" value={form.from_venture_id || ''}\r\n                                            onChange={e => setForm(f => ({ ...f, from_venture_id: e.target.value }))}>\r\n                                            <option value=\"\">Select...</option>\r\n                                            {state.ventures.map(v => <option key={v.id} value={v.id}>{v.prefix} ÔÇö {v.name}</option>)}\r\n                                        </select>\r\n                                    </div>\r\n                                    <div>\r\n                                        <label style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)', marginBottom: 4, display: 'block' }}>To venture</label>\r\n                                        <select className=\"form-select\" value={form.to_venture_id || ''}\r\n                                            onChange={e => setForm(f => ({ ...f, to_venture_id: e.target.value }))}>\r\n                                            <option value=\"\">Select...</option>\r\n                                            {state.ventures.map(v => <option key={v.id} value={v.id}>{v.prefix} ÔÇö {v.name}</option>)}\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 'var(--space-3)' }}>\r\n                                    <div>\r\n                                        <label style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)', marginBottom: 4, display: 'block' }}>Start date</label>\r\n                                        <input className=\"form-input\" type=\"date\" value={form.start_date || ''}\r\n                                            onChange={e => setForm(f => ({ ...f, start_date: e.target.value }))} />\r\n                                    </div>\r\n                                    <div>\r\n                                        <label style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)', marginBottom: 4, display: 'block' }}>End date (optional)</label>\r\n                                        <input className=\"form-input\" type=\"date\" value={form.end_date || ''}\r\n                                            onChange={e => setForm(f => ({ ...f, end_date: e.target.value }))} />\r\n                                    </div>\r\n                                </div>\r\n                                <button className=\"btn btn-primary\" onClick={handleSubmit}>Share Resource</button>\r\n                            </div>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\RiskMatrix.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":45,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AlertTriangle"},"fix":{"range":[449,464],"text":""},"desc":"Remove unused variable \"AlertTriangle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle2' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":59,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CheckCircle2"},"fix":{"range":[464,478],"text":""},"desc":"Remove unused variable \"CheckCircle2\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// Risk Matrix ÔÇö Severity/likelihood matrix with risk cards\r\n// ============================================================\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport { useStore } from '../lib/store';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport type { Risk, RiskLikelihood, RiskImpact, RiskStatus } from '../lib/types';\r\nimport { ShieldAlert, Plus, X, AlertTriangle, CheckCircle2, Shield } from 'lucide-react';\r\n\r\nconst statusColors: Record<RiskStatus, string> = {\r\n    active: '#EF4444', mitigated: '#F59E0B', accepted: '#6366F1', resolved: '#10B981',\r\n};\r\n\r\nexport default function RiskMatrix() {\r\n    const { state, addRisk, dispatch } = useStore();\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [ventureFilter, setVentureFilter] = useState<string>('all');\r\n    const [form, setForm] = useState<Partial<Risk>>({\r\n        likelihood: 3, impact: 3, status: 'active', venture_id: '',\r\n    });\r\n\r\n    const filtered = useMemo(() => {\r\n        let risks = state.risks;\r\n        if (ventureFilter !== 'all') risks = risks.filter(r => r.venture_id === ventureFilter);\r\n        return risks.sort((a, b) => (b.likelihood * b.impact) - (a.likelihood * a.impact));\r\n    }, [state.risks, ventureFilter]);\r\n\r\n    const activeCount = filtered.filter(r => r.status === 'active').length;\r\n    const criticalCount = filtered.filter(r => r.likelihood * r.impact >= 16).length;\r\n\r\n    const handleSubmit = () => {\r\n        if (!form.venture_id || !form.title) return;\r\n        addRisk(form as Omit<Risk, 'id' | 'created_at'>);\r\n        setShowForm(false);\r\n        setForm({ likelihood: 3, impact: 3, status: 'active', venture_id: '' });\r\n    };\r\n\r\n    const getRiskLevel = (l: number, i: number): { label: string; color: string } => {\r\n        const score = l * i;\r\n        if (score >= 16) return { label: 'Critical', color: '#EF4444' };\r\n        if (score >= 9) return { label: 'High', color: '#F59E0B' };\r\n        if (score >= 4) return { label: 'Medium', color: '#6366F1' };\r\n        return { label: 'Low', color: '#10B981' };\r\n    };\r\n\r\n    // 5├ù5 Matrix data\r\n    const matrixData = useMemo(() => {\r\n        const cells: Record<string, typeof filtered> = {};\r\n        for (let l = 1; l <= 5; l++) {\r\n            for (let i = 1; i <= 5; i++) {\r\n                cells[`${l}-${i}`] = filtered.filter(r => r.likelihood === l && r.impact === i);\r\n            }\r\n        }\r\n        return cells;\r\n    }, [filtered]);\r\n\r\n    return (\r\n        <div>\r\n            <div style={{\r\n                display: 'flex', alignItems: 'center', justifyContent: 'space-between',\r\n                marginBottom: 'var(--space-5)',\r\n            }}>\r\n                <div>\r\n                    <h2 style={{ fontSize: 'var(--font-size-xl)', fontWeight: 700, color: 'var(--color-text-primary)', marginBottom: 4 }}>\r\n                        <ShieldAlert size={20} style={{ display: 'inline', marginRight: 8, verticalAlign: 'middle' }} />\r\n                        Risk Matrix\r\n                    </h2>\r\n                    <p style={{ fontSize: 'var(--font-size-sm)', color: 'var(--color-text-muted)' }}>\r\n                        {activeCount} active ┬À {criticalCount} critical ┬À {filtered.length} total\r\n                    </p>\r\n                </div>\r\n                <div style={{ display: 'flex', gap: 'var(--space-2)' }}>\r\n                    <select className=\"form-select\" style={{ width: 'auto', fontSize: 'var(--font-size-sm)' }}\r\n                        value={ventureFilter} onChange={e => setVentureFilter(e.target.value)}>\r\n                        <option value=\"all\">All Ventures</option>\r\n                        {state.ventures.map(v => <option key={v.id} value={v.id}>{v.prefix} ÔÇö {v.name}</option>)}\r\n                    </select>\r\n                    <button className=\"btn btn-primary btn-sm\" onClick={() => setShowForm(true)}>\r\n                        <Plus size={14} /> Add Risk\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* 5├ù5 Heat Map Matrix */}\r\n            <div className=\"card card-body\" style={{ marginBottom: 'var(--space-6)', overflowX: 'auto' }}>\r\n                <h3 style={{ fontSize: 'var(--font-size-md)', fontWeight: 600, marginBottom: 'var(--space-4)', color: 'var(--color-text-primary)' }}>\r\n                    Likelihood ├ù Impact Heat Map\r\n                </h3>\r\n                <div style={{ display: 'grid', gridTemplateColumns: '60px repeat(5, 1fr)', gap: 2, minWidth: 500 }}>\r\n                    {/* Header */}\r\n                    <div></div>\r\n                    {[1, 2, 3, 4, 5].map(i => (\r\n                        <div key={i} style={{\r\n                            textAlign: 'center', fontSize: 'var(--font-size-xs)', fontWeight: 600,\r\n                            color: 'var(--color-text-muted)', padding: '4px 0',\r\n                        }}>\r\n                            Impact {i}\r\n                        </div>\r\n                    ))}\r\n\r\n                    {/* Matrix rows (top = likelihood 5, bottom = likelihood 1) */}\r\n                    {[5, 4, 3, 2, 1].map(l => (\r\n                        <>\r\n                            <div key={`l-${l}`} style={{\r\n                                display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                                fontSize: 'var(--font-size-xs)', fontWeight: 600, color: 'var(--color-text-muted)',\r\n                            }}>\r\n                                L{l}\r\n                            </div>\r\n                            {[1, 2, 3, 4, 5].map(i => {\r\n                                const level = getRiskLevel(l, i);\r\n                                const cellRisks = matrixData[`${l}-${i}`] || [];\r\n                                return (\r\n                                    <div key={`${l}-${i}`} style={{\r\n                                        background: `${level.color}${cellRisks.length > 0 ? '30' : '10'}`,\r\n                                        borderRadius: 'var(--border-radius-sm)',\r\n                                        padding: 'var(--space-2)',\r\n                                        minHeight: 48,\r\n                                        display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                                        border: `1px solid ${level.color}20`,\r\n                                    }}>\r\n                                        {cellRisks.length > 0 && (\r\n                                            <span style={{\r\n                                                width: 24, height: 24, borderRadius: '50%',\r\n                                                background: level.color, color: '#fff',\r\n                                                display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                                                fontWeight: 700, fontSize: 'var(--font-size-xs)',\r\n                                            }}>\r\n                                                {cellRisks.length}\r\n                                            </span>\r\n                                        )}\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Risk cards */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(340px, 1fr))', gap: 'var(--space-4)' }}>\r\n                {filtered.map((risk, i) => {\r\n                    const venture = state.ventures.find(v => v.id === risk.venture_id);\r\n                    const level = getRiskLevel(risk.likelihood, risk.impact);\r\n                    return (\r\n                        <motion.div key={risk.id} className=\"card card-body\"\r\n                            initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }}\r\n                            transition={{ delay: i * 0.05 }}\r\n                            style={{ borderLeft: `3px solid ${level.color}` }}>\r\n                            <div style={{ display: 'flex', alignItems: 'flex-start', justifyContent: 'space-between' }}>\r\n                                <div>\r\n                                    <div style={{ fontSize: 'var(--font-size-md)', fontWeight: 600, color: 'var(--color-text-primary)', marginBottom: 4 }}>\r\n                                        {risk.title}\r\n                                    </div>\r\n                                    {risk.description && (\r\n                                        <p style={{ fontSize: 'var(--font-size-sm)', color: 'var(--color-text-muted)', marginBottom: 'var(--space-3)' }}>\r\n                                            {risk.description}\r\n                                        </p>\r\n                                    )}\r\n                                </div>\r\n                                <button className=\"btn btn-secondary btn-sm btn-icon\" style={{ padding: 4 }}\r\n                                    onClick={() => dispatch({ type: 'DELETE_RISK', payload: risk.id })}>\r\n                                    <X size={12} />\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div style={{ display: 'flex', gap: 'var(--space-2)', flexWrap: 'wrap', marginBottom: 'var(--space-2)' }}>\r\n                                {venture && (\r\n                                    <span style={{\r\n                                        fontSize: 'var(--font-size-xs)', padding: '2px 8px',\r\n                                        background: `${venture.color}18`, color: venture.color,\r\n                                        borderRadius: 'var(--border-radius-full)', fontWeight: 600,\r\n                                    }}>\r\n                                        {venture.prefix}\r\n                                    </span>\r\n                                )}\r\n                                <span style={{\r\n                                    fontSize: 'var(--font-size-xs)', padding: '2px 8px',\r\n                                    background: `${level.color}18`, color: level.color,\r\n                                    borderRadius: 'var(--border-radius-full)', fontWeight: 600,\r\n                                }}>\r\n                                    {level.label} ({risk.likelihood}├ù{risk.impact})\r\n                                </span>\r\n                                <span style={{\r\n                                    fontSize: 'var(--font-size-xs)', padding: '2px 8px',\r\n                                    background: `${statusColors[risk.status]}18`, color: statusColors[risk.status],\r\n                                    borderRadius: 'var(--border-radius-full)', fontWeight: 600,\r\n                                }}>\r\n                                    {risk.status}\r\n                                </span>\r\n                            </div>\r\n\r\n                            {risk.mitigation && (\r\n                                <div style={{\r\n                                    fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)',\r\n                                    padding: 'var(--space-2)', background: 'var(--color-bg-tertiary)',\r\n                                    borderRadius: 'var(--border-radius-sm)', marginTop: 'var(--space-2)',\r\n                                }}>\r\n                                    <strong>Mitigation:</strong> {risk.mitigation}\r\n                                </div>\r\n                            )}\r\n                        </motion.div>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {filtered.length === 0 && (\r\n                <div className=\"empty-state\" style={{ padding: 'var(--space-8)' }}>\r\n                    <Shield size={40} style={{ opacity: 0.15, marginBottom: 'var(--space-3)' }} />\r\n                    <div className=\"empty-state-title\">No risks logged</div>\r\n                    <div className=\"empty-state-text\">Track potential risks across your ventures.</div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Add form modal */}\r\n            <AnimatePresence>\r\n                {showForm && (\r\n                    <motion.div className=\"modal-overlay\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}\r\n                        onClick={() => setShowForm(false)}>\r\n                        <motion.div className=\"modal\" style={{ width: 480 }}\r\n                            initial={{ scale: 0.9, opacity: 0 }} animate={{ scale: 1, opacity: 1 }} exit={{ scale: 0.9, opacity: 0 }}\r\n                            onClick={e => e.stopPropagation()}>\r\n                            <div className=\"modal-header\">\r\n                                <h3 className=\"modal-title\">Add Risk</h3>\r\n                                <button className=\"btn btn-secondary btn-sm btn-icon\" onClick={() => setShowForm(false)}><X size={14} /></button>\r\n                            </div>\r\n                            <div style={{ padding: 'var(--space-4)', display: 'flex', flexDirection: 'column', gap: 'var(--space-3)' }}>\r\n                                <select className=\"form-select\" value={form.venture_id}\r\n                                    onChange={e => setForm(f => ({ ...f, venture_id: e.target.value }))}>\r\n                                    <option value=\"\">Select venture...</option>\r\n                                    {state.ventures.map(v => <option key={v.id} value={v.id}>{v.prefix} ÔÇö {v.name}</option>)}\r\n                                </select>\r\n                                <input className=\"form-input\" placeholder=\"Risk title\" value={form.title || ''}\r\n                                    onChange={e => setForm(f => ({ ...f, title: e.target.value }))} />\r\n                                <textarea className=\"form-textarea\" placeholder=\"Description\" value={form.description || ''}\r\n                                    onChange={e => setForm(f => ({ ...f, description: e.target.value }))} rows={2} />\r\n                                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 'var(--space-3)' }}>\r\n                                    <div>\r\n                                        <label style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)', marginBottom: 4, display: 'block' }}>\r\n                                            Likelihood (1-5)\r\n                                        </label>\r\n                                        <select className=\"form-select\" value={form.likelihood}\r\n                                            onChange={e => setForm(f => ({ ...f, likelihood: Number(e.target.value) as RiskLikelihood }))}>\r\n                                            {[1, 2, 3, 4, 5].map(n => <option key={n} value={n}>{n} ÔÇö {['Rare', 'Unlikely', 'Possible', 'Likely', 'Almost Certain'][n - 1]}</option>)}\r\n                                        </select>\r\n                                    </div>\r\n                                    <div>\r\n                                        <label style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)', marginBottom: 4, display: 'block' }}>\r\n                                            Impact (1-5)\r\n                                        </label>\r\n                                        <select className=\"form-select\" value={form.impact}\r\n                                            onChange={e => setForm(f => ({ ...f, impact: Number(e.target.value) as RiskImpact }))}>\r\n                                            {[1, 2, 3, 4, 5].map(n => <option key={n} value={n}>{n} ÔÇö {['Negligible', 'Minor', 'Moderate', 'Major', 'Severe'][n - 1]}</option>)}\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <textarea className=\"form-textarea\" placeholder=\"Mitigation strategy (optional)\" value={form.mitigation || ''}\r\n                                    onChange={e => setForm(f => ({ ...f, mitigation: e.target.value }))} rows={2} />\r\n                                <button className=\"btn btn-primary\" onClick={handleSubmit}>Add Risk</button>\r\n                            </div>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\SettingsView.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":210,"column":156,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":210,"endColumn":159,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12704,12707],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12704,12707],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// Settings View\r\n// ============================================================\r\n\r\nimport { useState } from 'react';\r\nimport { useStore } from '../lib/store';\r\nimport { isSupabaseConfigured } from '../lib/supabase';\r\nimport {\r\n    Database, Github, Bot, FolderOpen, Save,\r\n    CheckCircle2, AlertCircle, Trash2, Plus, RefreshCw\r\n} from 'lucide-react';\r\n\r\nexport default function SettingsView() {\r\n    const { state, dispatch, addVenture } = useStore();\r\n    const [githubToken, setGithubToken] = useState('');\r\n    const [openaiKey, setOpenaiKey] = useState('');\r\n    const [scanInterval, setScanInterval] = useState(15);\r\n    const [showAddVenture, setShowAddVenture] = useState(false);\r\n    const [saved, setSaved] = useState(false);\r\n\r\n    // New venture form\r\n    const [newVenture, setNewVenture] = useState({\r\n        name: '', prefix: '', geo: 'UK' as 'UK' | 'NG', tier: 'Incubating' as 'Active Build' | 'Incubating' | 'Parked',\r\n        status: '', stage: '', color: '#6366F1', lightColor: '#E8DAEF', description: '',\r\n    });\r\n\r\n    const handleAddVenture = () => {\r\n        if (!newVenture.name || !newVenture.prefix) return;\r\n        addVenture(newVenture);\r\n        setNewVenture({ name: '', prefix: '', geo: 'UK', tier: 'Incubating', status: '', stage: '', color: '#6366F1', lightColor: '#E8DAEF', description: '' });\r\n        setShowAddVenture(false);\r\n    };\r\n\r\n    const handleSave = () => {\r\n        setSaved(true);\r\n        setTimeout(() => setSaved(false), 2000);\r\n    };\r\n\r\n    const handleResetData = () => {\r\n        if (confirm('This will reset ALL data to the initial seed data. Are you sure?')) {\r\n            localStorage.removeItem('vcc-state');\r\n            window.location.reload();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ maxWidth: 800 }}>\r\n            {/* Supabase Connection */}\r\n            <div className=\"settings-section\">\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 'var(--space-3)', marginBottom: 'var(--space-4)' }}>\r\n                    <Database size={20} style={{ color: 'var(--color-accent-primary)' }} />\r\n                    <div>\r\n                        <div className=\"settings-title\">Database Connection</div>\r\n                        <div className=\"settings-subtitle\" style={{ marginBottom: 0 }}>Supabase PostgreSQL backend</div>\r\n                    </div>\r\n                    <div style={{ marginLeft: 'auto', display: 'flex', alignItems: 'center', gap: 6 }}>\r\n                        {isSupabaseConfigured ? (\r\n                            <><CheckCircle2 size={14} color=\"var(--color-success)\" /><span style={{ fontSize: 'var(--font-size-sm)', color: 'var(--color-success)' }}>Connected</span></>\r\n                        ) : (\r\n                            <><AlertCircle size={14} color=\"var(--color-warning)\" /><span style={{ fontSize: 'var(--font-size-sm)', color: 'var(--color-warning)' }}>Local Mode</span></>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                {!isSupabaseConfigured && (\r\n                    <div style={{\r\n                        background: 'var(--color-warning-bg)', border: '1px solid rgba(245, 158, 11, 0.2)',\r\n                        borderRadius: 'var(--border-radius-md)', padding: 'var(--space-3) var(--space-4)',\r\n                        fontSize: 'var(--font-size-sm)', color: 'var(--color-text-secondary)', lineHeight: 1.6,\r\n                    }}>\r\n                        Running in <strong>local-only mode</strong>. Data is stored in your browser's localStorage.\r\n                        To connect Supabase, create a <code>.env</code> file with:<br />\r\n                        <code style={{ color: 'var(--color-accent-primary)' }}>VITE_SUPABASE_URL=https://your-project.supabase.co</code><br />\r\n                        <code style={{ color: 'var(--color-accent-primary)' }}>VITE_SUPABASE_ANON_KEY=your-anon-key</code>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* GitHub Integration */}\r\n            <div className=\"settings-section\">\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 'var(--space-3)', marginBottom: 'var(--space-4)' }}>\r\n                    <Github size={20} style={{ color: 'var(--color-text-primary)' }} />\r\n                    <div>\r\n                        <div className=\"settings-title\">GitHub Integration</div>\r\n                        <div className=\"settings-subtitle\" style={{ marginBottom: 0 }}>Auto-sync repo stats, commits, PRs</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label className=\"form-label\">Personal Access Token</label>\r\n                    <input\r\n                        type=\"password\"\r\n                        className=\"form-input\"\r\n                        value={githubToken}\r\n                        onChange={e => setGithubToken(e.target.value)}\r\n                        placeholder=\"ghp_xxxxxxxxxxxxxxxxxxxx\"\r\n                    />\r\n                    <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)', marginTop: 4 }}>\r\n                        Generate at github.com/settings/tokens ┬À Needs: repo, read:org scopes\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* AI Configuration */}\r\n            <div className=\"settings-section\">\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 'var(--space-3)', marginBottom: 'var(--space-4)' }}>\r\n                    <Bot size={20} style={{ color: 'var(--color-accent-secondary)' }} />\r\n                    <div>\r\n                        <div className=\"settings-title\">AI Configuration</div>\r\n                        <div className=\"settings-subtitle\" style={{ marginBottom: 0 }}>Powers copilot, summaries, and smart alerts</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label className=\"form-label\">OpenAI API Key</label>\r\n                    <input\r\n                        type=\"password\"\r\n                        className=\"form-input\"\r\n                        value={openaiKey}\r\n                        onChange={e => setOpenaiKey(e.target.value)}\r\n                        placeholder=\"sk-xxxxxxxxxxxxxxxxxxxx\"\r\n                    />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label className=\"form-label\">Scan Interval (minutes)</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        className=\"form-input\"\r\n                        value={scanInterval}\r\n                        onChange={e => setScanInterval(Number(e.target.value))}\r\n                        min={5}\r\n                        max={120}\r\n                        style={{ width: 120 }}\r\n                    />\r\n                    <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)', marginTop: 4 }}>\r\n                        How often the agent script scans for file changes and syncs data\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* File Watch Paths */}\r\n            <div className=\"settings-section\">\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 'var(--space-3)', marginBottom: 'var(--space-4)' }}>\r\n                    <FolderOpen size={20} style={{ color: 'var(--color-warning)' }} />\r\n                    <div>\r\n                        <div className=\"settings-title\">Project Directories</div>\r\n                        <div className=\"settings-subtitle\" style={{ marginBottom: 0 }}>Directories the agent watches for auto-sync</div>\r\n                    </div>\r\n                </div>\r\n                <div style={{ fontSize: 'var(--font-size-sm)', color: 'var(--color-text-muted)', lineHeight: 1.6 }}>\r\n                    Configure watch paths in the agent script's <code>agent/config.json</code> file.\r\n                    The agent will monitor these directories for README.md, TODO.md, package.json, and CHANGELOG changes.\r\n                </div>\r\n                <div style={{ marginTop: 'var(--space-3)' }}>\r\n                    {state.ventures.filter(v => v.tier !== 'Parked').map(v => (\r\n                        <div key={v.id} style={{\r\n                            display: 'flex', alignItems: 'center', gap: 'var(--space-3)',\r\n                            padding: 'var(--space-2) 0', borderBottom: '1px solid var(--border-color)',\r\n                            fontSize: 'var(--font-size-sm)',\r\n                        }}>\r\n                            <span style={{ width: 8, height: 8, borderRadius: '50%', background: v.color, flexShrink: 0 }} />\r\n                            <span style={{ color: 'var(--color-text-secondary)', fontWeight: 500 }}>{v.name}</span>\r\n                            <span style={{ flex: 1, color: 'var(--color-text-muted)', fontFamily: 'monospace', fontSize: 'var(--font-size-xs)' }}>\r\n                                ~/projects/{v.name.toLowerCase().replace(/\\s/g, '-')}/\r\n                            </span>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Venture Management */}\r\n            <div className=\"settings-section\">\r\n                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: 'var(--space-4)' }}>\r\n                    <div>\r\n                        <div className=\"settings-title\">Venture Management</div>\r\n                        <div className=\"settings-subtitle\" style={{ marginBottom: 0 }}>{state.ventures.length} ventures in portfolio</div>\r\n                    </div>\r\n                    <button className=\"btn btn-primary btn-sm\" onClick={() => setShowAddVenture(!showAddVenture)}>\r\n                        <Plus size={14} />\r\n                        Add Venture\r\n                    </button>\r\n                </div>\r\n\r\n                {showAddVenture && (\r\n                    <div style={{\r\n                        background: 'var(--color-bg-tertiary)', borderRadius: 'var(--border-radius-md)',\r\n                        padding: 'var(--space-4)', marginBottom: 'var(--space-4)',\r\n                    }}>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 100px 100px', gap: 'var(--space-3)' }}>\r\n                            <div className=\"form-group\" style={{ marginBottom: 0 }}>\r\n                                <label className=\"form-label\">Name</label>\r\n                                <input className=\"form-input\" value={newVenture.name} onChange={e => setNewVenture(p => ({ ...p, name: e.target.value }))} placeholder=\"Venture name\" />\r\n                            </div>\r\n                            <div className=\"form-group\" style={{ marginBottom: 0 }}>\r\n                                <label className=\"form-label\">Prefix</label>\r\n                                <input className=\"form-input\" value={newVenture.prefix} onChange={e => setNewVenture(p => ({ ...p, prefix: e.target.value.toUpperCase() }))} placeholder=\"XX\" maxLength={3} />\r\n                            </div>\r\n                            <div className=\"form-group\" style={{ marginBottom: 0 }}>\r\n                                <label className=\"form-label\">Geo</label>\r\n                                <select className=\"form-select\" value={newVenture.geo} onChange={e => setNewVenture(p => ({ ...p, geo: e.target.value as 'UK' | 'NG' }))}>\r\n                                    <option value=\"UK\">UK</option>\r\n                                    <option value=\"NG\">NG</option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 80px', gap: 'var(--space-3)', marginTop: 'var(--space-3)' }}>\r\n                            <div className=\"form-group\" style={{ marginBottom: 0 }}>\r\n                                <label className=\"form-label\">Stage</label>\r\n                                <input className=\"form-input\" value={newVenture.stage} onChange={e => setNewVenture(p => ({ ...p, stage: e.target.value }))} placeholder=\"e.g. MVP Development\" />\r\n                            </div>\r\n                            <div className=\"form-group\" style={{ marginBottom: 0 }}>\r\n                                <label className=\"form-label\">Tier</label>\r\n                                <select className=\"form-select\" value={newVenture.tier} onChange={e => setNewVenture(p => ({ ...p, tier: e.target.value as any }))}>\r\n                                    <option value=\"Active Build\">Active Build</option>\r\n                                    <option value=\"Incubating\">Incubating</option>\r\n                                    <option value=\"Parked\">Parked</option>\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"form-group\" style={{ marginBottom: 0 }}>\r\n                                <label className=\"form-label\">Color</label>\r\n                                <input type=\"color\" className=\"form-input\" value={newVenture.color} onChange={e => setNewVenture(p => ({ ...p, color: e.target.value }))} style={{ height: 36, padding: 2 }} />\r\n                            </div>\r\n                        </div>\r\n                        <div style={{ display: 'flex', justifyContent: 'flex-end', gap: 'var(--space-3)', marginTop: 'var(--space-3)' }}>\r\n                            <button className=\"btn btn-secondary btn-sm\" onClick={() => setShowAddVenture(false)}>Cancel</button>\r\n                            <button className=\"btn btn-primary btn-sm\" onClick={handleAddVenture}>Add</button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Venture list */}\r\n                {state.ventures.map(v => (\r\n                    <div key={v.id} style={{\r\n                        display: 'flex', alignItems: 'center', gap: 'var(--space-3)',\r\n                        padding: 'var(--space-3) 0', borderBottom: '1px solid var(--border-color)',\r\n                    }}>\r\n                        <span style={{\r\n                            width: 32, height: 32, borderRadius: 'var(--border-radius-sm)',\r\n                            background: v.color, display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                            color: '#fff', fontWeight: 700, fontSize: 'var(--font-size-xs)', flexShrink: 0,\r\n                        }}>\r\n                            {v.prefix}\r\n                        </span>\r\n                        <div style={{ flex: 1 }}>\r\n                            <div style={{ fontSize: 'var(--font-size-sm)', fontWeight: 600, color: 'var(--color-text-primary)' }}>{v.name}</div>\r\n                            <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)' }}>{v.geo} ┬À {v.tier} ┬À {v.stage}</div>\r\n                        </div>\r\n                        <button\r\n                            className=\"btn btn-ghost btn-icon btn-sm\"\r\n                            onClick={() => {\r\n                                if (confirm(`Delete ${v.name}? This will also remove all associated tasks.`)) {\r\n                                    dispatch({ type: 'DELETE_VENTURE', payload: v.id });\r\n                                }\r\n                            }}\r\n                            title=\"Delete venture\"\r\n                        >\r\n                            <Trash2 size={14} />\r\n                        </button>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Actions */}\r\n            <div style={{ display: 'flex', gap: 'var(--space-3)', marginTop: 'var(--space-4)' }}>\r\n                <button className=\"btn btn-primary\" onClick={handleSave}>\r\n                    <Save size={14} />\r\n                    {saved ? 'Saved Ô£ô' : 'Save Settings'}\r\n                </button>\r\n                <button className=\"btn btn-danger\" onClick={handleResetData}>\r\n                    <RefreshCw size={14} />\r\n                    Reset All Data\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\StandupGenerator.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":61,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AlertTriangle"},"fix":{"range":[377,392],"text":""},"desc":"Remove unused variable \"AlertTriangle\"."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'now'. Either include it or remove the dependency array.","line":139,"column":8,"nodeType":"ArrayExpression","endLine":139,"endColumn":68,"suggestions":[{"desc":"Update the dependencies array to be: [now, period, state.tasks, state.ventures, state.risks, state.teamRoles, state.milestones, venturesWithStats, selectedVentures, cutoff]","fix":{"range":[6236,6296],"text":"[now, period, state.tasks, state.ventures, state.risks, state.teamRoles, state.milestones, venturesWithStats, selectedVentures, cutoff]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// Standup Report Generator ÔÇö Structured daily/weekly standup\r\n// ============================================================\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport { useStore } from '../lib/store';\r\nimport { motion } from 'framer-motion';\r\nimport {\r\n    FileText, Copy, Download, Calendar, Check, AlertTriangle,\r\n    RotateCcw, Filter\r\n} from 'lucide-react';\r\n\r\ntype ReportPeriod = 'daily' | 'weekly';\r\n\r\nexport default function StandupGenerator() {\r\n    const { state, venturesWithStats } = useStore();\r\n    const [period, setPeriod] = useState<ReportPeriod>('weekly');\r\n    const [selectedVentures, setSelectedVentures] = useState<string[]>(\r\n        state.ventures.filter(v => v.tier === 'Active Build' || v.tier === 'Incubating').map(v => v.id)\r\n    );\r\n    const [copied, setCopied] = useState(false);\r\n\r\n    const now = new Date();\r\n    const cutoffDays = period === 'daily' ? 1 : 7;\r\n    const cutoff = new Date(now.getTime() - cutoffDays * 24 * 60 * 60 * 1000);\r\n\r\n    const report = useMemo(() => {\r\n        const lines: string[] = [];\r\n        const dateStr = now.toLocaleDateString('en-GB', { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' });\r\n        const periodLabel = period === 'daily' ? 'Daily Standup' : 'Weekly Standup';\r\n\r\n        lines.push(`# ${periodLabel} Report`);\r\n        lines.push(`­ƒôà ${dateStr}`);\r\n        lines.push('');\r\n\r\n        // --- Portfolio summary ---\r\n        const totalTasks = state.tasks.length;\r\n        const doneTasks = state.tasks.filter(t => t.status === 'done').length;\r\n        const blockedTasks = state.tasks.filter(t => t.status === 'blocked').length;\r\n        const inProgressTasks = state.tasks.filter(t => t.status === 'in-progress').length;\r\n\r\n        lines.push('## ­ƒôè Portfolio Snapshot');\r\n        lines.push(`- Active ventures: ${state.ventures.filter(v => v.tier === 'Active Build').length}`);\r\n        lines.push(`- Tasks: ${doneTasks}/${totalTasks} done (${inProgressTasks} in progress, ${blockedTasks} blocked)`);\r\n        lines.push(`- Average health: ${Math.round(venturesWithStats.reduce((sum, v) => sum + v.healthScore, 0) / (venturesWithStats.length || 1))}/100`);\r\n        lines.push('');\r\n\r\n        // --- Per-venture sections ---\r\n        const filteredVentures = venturesWithStats.filter(v => selectedVentures.includes(v.id));\r\n        filteredVentures.forEach(v => {\r\n            const ventureTasks = state.tasks.filter(t => t.venture_id === v.id);\r\n            const recentlyDone = ventureTasks.filter(t =>\r\n                t.status === 'done' && new Date(t.updated_at) >= cutoff\r\n            );\r\n            const inProgress = ventureTasks.filter(t => t.status === 'in-progress');\r\n            const blocked = ventureTasks.filter(t => t.status === 'blocked');\r\n            const upcoming = ventureTasks.filter(t =>\r\n                (t.status === 'todo' || t.status === 'backlog') && t.priority === 'P0'\r\n            );\r\n\r\n            const healthEmoji = v.healthScore >= 60 ? '­ƒƒó' : v.healthScore >= 35 ? '­ƒƒí' : '­ƒö┤';\r\n\r\n            lines.push(`## ${v.prefix} ÔÇö ${v.name} ${healthEmoji} ${v.healthScore}/100`);\r\n            lines.push('');\r\n\r\n            // What was done\r\n            if (recentlyDone.length > 0) {\r\n                lines.push(`### Ô£à Completed (${period === 'daily' ? 'today' : 'this week'})`);\r\n                recentlyDone.forEach(t => lines.push(`- ${t.title}`));\r\n                lines.push('');\r\n            }\r\n\r\n            // What's in progress\r\n            if (inProgress.length > 0) {\r\n                lines.push('### ­ƒöä In Progress');\r\n                inProgress.forEach(t => {\r\n                    const priLabel = t.priority === 'P0' ? '­ƒö┤' : t.priority === 'P1' ? '­ƒƒá' : '­ƒƒí';\r\n                    lines.push(`- ${priLabel} ${t.title}`);\r\n                });\r\n                lines.push('');\r\n            }\r\n\r\n            // Blockers\r\n            if (blocked.length > 0) {\r\n                lines.push('### ­ƒÜ½ Blockers');\r\n                blocked.forEach(t => lines.push(`- Ôøö ${t.title}`));\r\n                lines.push('');\r\n            }\r\n\r\n            // What's next\r\n            if (upcoming.length > 0) {\r\n                lines.push('### ­ƒôï Up Next (P0)');\r\n                upcoming.slice(0, 3).forEach(t => lines.push(`- ${t.title}`));\r\n                lines.push('');\r\n            }\r\n\r\n            // Milestones\r\n            const mstones = state.milestones.filter(m => m.venture_id === v.id);\r\n            if (mstones.length > 0) {\r\n                lines.push('### ­ƒÄ» Milestones');\r\n                mstones.forEach(m => {\r\n                    const daysUntil = Math.ceil((new Date(m.target_date).getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\r\n                    const statusEmoji = daysUntil < 0 ? 'ÔÜá´©Å OVERDUE' : daysUntil <= 14 ? `ÔÅ░ ${daysUntil}d left` : `${daysUntil}d left`;\r\n                    lines.push(`- ${m.name} ÔÇö ${m.progress}% ÔÇö ${statusEmoji}`);\r\n                });\r\n                lines.push('');\r\n            }\r\n\r\n            lines.push('---');\r\n            lines.push('');\r\n        });\r\n\r\n        // --- Risks ---\r\n        const activeRisks = state.risks.filter(r => r.status === 'active' && r.likelihood >= 3 && r.impact >= 4);\r\n        if (activeRisks.length > 0) {\r\n            lines.push('## ÔÜá´©Å High-Priority Risks');\r\n            activeRisks.forEach(r => {\r\n                const v = state.ventures.find(v => v.id === r.venture_id);\r\n                lines.push(`- **${v?.prefix}**: ${r.title} (L${r.likelihood}├ùI${r.impact})`);\r\n            });\r\n            lines.push('');\r\n        }\r\n\r\n        // --- Hiring ---\r\n        const hiringRoles = state.teamRoles.filter(r => r.status === 'hiring');\r\n        if (hiringRoles.length > 0) {\r\n            lines.push('## ­ƒæÑ Open Hiring');\r\n            hiringRoles.forEach(r => {\r\n                const v = state.ventures.find(v => v.id === r.venture_id);\r\n                lines.push(`- ${v?.prefix}: ${r.role_name}`);\r\n            });\r\n            lines.push('');\r\n        }\r\n\r\n        lines.push('---');\r\n        lines.push(`_Generated by Venture Command Center on ${now.toISOString().slice(0, 16)}_`);\r\n\r\n        return lines.join('\\n');\r\n    }, [state, venturesWithStats, selectedVentures, period, cutoff]);\r\n\r\n    const handleCopy = async () => {\r\n        await navigator.clipboard.writeText(report);\r\n        setCopied(true);\r\n        setTimeout(() => setCopied(false), 2000);\r\n    };\r\n\r\n    const handleDownload = () => {\r\n        const blob = new Blob([report], { type: 'text/markdown' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `standup-${period}-${now.toISOString().slice(0, 10)}.md`;\r\n        a.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    const toggleVenture = (id: string) => {\r\n        setSelectedVentures(prev =>\r\n            prev.includes(id) ? prev.filter(x => x !== id) : [...prev, id]\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div style={{\r\n                display: 'flex', alignItems: 'center', justifyContent: 'space-between',\r\n                marginBottom: 'var(--space-5)',\r\n            }}>\r\n                <div>\r\n                    <h2 style={{\r\n                        fontSize: 'var(--font-size-xl)', fontWeight: 700,\r\n                        color: 'var(--color-text-primary)', marginBottom: 4,\r\n                    }}>\r\n                        <FileText size={20} style={{ display: 'inline', marginRight: 8, verticalAlign: 'middle' }} />\r\n                        Standup Report\r\n                    </h2>\r\n                    <p style={{ fontSize: 'var(--font-size-sm)', color: 'var(--color-text-muted)' }}>\r\n                        Auto-generated structured standup for sharing\r\n                    </p>\r\n                </div>\r\n                <div style={{ display: 'flex', gap: 'var(--space-2)' }}>\r\n                    <button className=\"btn btn-primary btn-sm\" onClick={handleCopy}>\r\n                        {copied ? <Check size={14} /> : <Copy size={14} />}\r\n                        {copied ? 'Copied!' : 'Copy'}\r\n                    </button>\r\n                    <button className=\"btn btn-secondary btn-sm\" onClick={handleDownload}>\r\n                        <Download size={14} /> Download .md\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Controls */}\r\n            <div style={{\r\n                display: 'flex', flexWrap: 'wrap', gap: 'var(--space-3)',\r\n                marginBottom: 'var(--space-5)', alignItems: 'center',\r\n            }}>\r\n                <div style={{ display: 'flex', gap: 'var(--space-2)' }}>\r\n                    <button\r\n                        className={`btn btn-sm ${period === 'daily' ? 'btn-primary' : 'btn-secondary'}`}\r\n                        onClick={() => setPeriod('daily')}\r\n                    >\r\n                        <Calendar size={12} /> Daily\r\n                    </button>\r\n                    <button\r\n                        className={`btn btn-sm ${period === 'weekly' ? 'btn-primary' : 'btn-secondary'}`}\r\n                        onClick={() => setPeriod('weekly')}\r\n                    >\r\n                        <RotateCcw size={12} /> Weekly\r\n                    </button>\r\n                </div>\r\n\r\n                <div style={{\r\n                    display: 'flex', alignItems: 'center', gap: 'var(--space-2)',\r\n                    marginLeft: 'var(--space-4)',\r\n                }}>\r\n                    <Filter size={12} color=\"var(--color-text-muted)\" />\r\n                    {state.ventures.filter(v => v.tier !== 'Parked').map(v => (\r\n                        <button\r\n                            key={v.id}\r\n                            className={`btn btn-sm ${selectedVentures.includes(v.id) ? '' : 'btn-secondary'}`}\r\n                            onClick={() => toggleVenture(v.id)}\r\n                            style={{\r\n                                padding: '2px 10px',\r\n                                fontSize: 'var(--font-size-xs)',\r\n                                fontWeight: 600,\r\n                                background: selectedVentures.includes(v.id) ? `${v.color}20` : undefined,\r\n                                color: selectedVentures.includes(v.id) ? v.color : 'var(--color-text-muted)',\r\n                                border: selectedVentures.includes(v.id) ? `1px solid ${v.color}40` : undefined,\r\n                            }}\r\n                        >\r\n                            {v.prefix}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Preview */}\r\n            <motion.div\r\n                className=\"card\"\r\n                style={{\r\n                    padding: 'var(--space-5)',\r\n                    fontFamily: '\"JetBrains Mono\", \"Fira Code\", \"Cascadia Code\", monospace',\r\n                    fontSize: 'var(--font-size-sm)',\r\n                    lineHeight: 1.7,\r\n                    whiteSpace: 'pre-wrap',\r\n                    color: 'var(--color-text-secondary)',\r\n                    maxHeight: 'calc(100vh - 300px)',\r\n                    overflowY: 'auto',\r\n                }}\r\n                initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                dangerouslySetInnerHTML={{\r\n                    __html: report\r\n                        .replace(/^# (.+)$/gm, '<span style=\"font-size:1.3em;font-weight:700;color:var(--color-text-primary)\">$1</span>')\r\n                        .replace(/^## (.+)$/gm, '<span style=\"font-size:1.1em;font-weight:600;color:var(--color-text-primary)\">$1</span>')\r\n                        .replace(/^### (.+)$/gm, '<span style=\"font-weight:600;color:var(--color-text-primary)\">$1</span>')\r\n                        .replace(/\\*\\*(.*?)\\*\\*/g, '<strong style=\"color:var(--color-text-primary)\">$1</strong>')\r\n                        .replace(/^---$/gm, '<hr style=\"border:none;border-top:1px solid var(--border-color);margin:8px 0\"/>')\r\n                        .replace(/^_(.+)_$/gm, '<em style=\"opacity:0.5\">$1</em>')\r\n                        .replace(/\\n/g, '<br/>')\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\TaskForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\TimelineView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Flag' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":24,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Flag"},"fix":{"range":[318,324],"text":""},"desc":"Remove unused variable \"Flag\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":31,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Clock"},"fix":{"range":[324,331],"text":""},"desc":"Remove unused variable \"Clock\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronLeft' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":44,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ChevronLeft"},"fix":{"range":[331,344],"text":""},"desc":"Remove unused variable \"ChevronLeft\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronRight' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":58,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ChevronRight"},"fix":{"range":[344,358],"text":""},"desc":"Remove unused variable \"ChevronRight\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'venturesWithStats' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":11,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":37},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\TimelineView.tsx:66:75\n  64 |         ? Math.ceil((months[months.length - 1].end.getTime() - months[0].start.getTime()) / (1000 * 60 * 60 * 24))\n  65 |         : 1;\n> 66 |     const timelineStart = months.length > 0 ? months[0].start.getTime() : Date.now();\n     |                                                                           ^^^^^^^^^^ Cannot call impure function\n  67 |\n  68 |     const getPosition = (dateStr: string) => {\n  69 |         const d = new Date(dateStr).getTime();","line":66,"column":75,"nodeType":null,"endLine":66,"endColumn":85}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// Timeline View ÔÇö Gantt-style horizontal timeline\r\n// ============================================================\r\n\r\nimport { useMemo } from 'react';\r\nimport { useStore } from '../lib/store';\r\nimport { motion } from 'framer-motion';\r\nimport { Calendar, Flag, Clock, ChevronLeft, ChevronRight } from 'lucide-react';\r\n\r\nexport default function TimelineView() {\r\n    const { state, venturesWithStats } = useStore();\r\n\r\n    // Build timeline items from milestones and tasks with due dates\r\n    const timelineItems = useMemo(() => {\r\n        const items: {\r\n            id: string; type: 'milestone' | 'task'; title: string;\r\n            ventureId: string; ventureName: string; ventureColor: string; venturePrefix: string;\r\n            date: string; progress?: number; status?: string; priority?: string;\r\n        }[] = [];\r\n\r\n        // Milestones\r\n        state.milestones.forEach(m => {\r\n            const v = state.ventures.find(v => v.id === m.venture_id);\r\n            if (!v) return;\r\n            items.push({\r\n                id: m.id, type: 'milestone', title: m.name,\r\n                ventureId: v.id, ventureName: v.name, ventureColor: v.color, venturePrefix: v.prefix,\r\n                date: m.target_date, progress: m.progress,\r\n            });\r\n        });\r\n\r\n        // Tasks with due dates\r\n        state.tasks.filter(t => t.due_date).forEach(t => {\r\n            const v = state.ventures.find(v => v.id === t.venture_id);\r\n            if (!v) return;\r\n            items.push({\r\n                id: t.id, type: 'task', title: t.title,\r\n                ventureId: v.id, ventureName: v.name, ventureColor: v.color, venturePrefix: v.prefix,\r\n                date: t.due_date!, status: t.status, priority: t.priority,\r\n            });\r\n        });\r\n\r\n        return items.sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());\r\n    }, [state.milestones, state.tasks, state.ventures]);\r\n\r\n    // Generate months for the timeline header\r\n    const months = useMemo(() => {\r\n        if (timelineItems.length === 0) return [];\r\n        const now = new Date();\r\n        const result: { label: string; year: number; month: number; start: Date; end: Date }[] = [];\r\n        for (let i = -2; i <= 8; i++) {\r\n            const d = new Date(now.getFullYear(), now.getMonth() + i, 1);\r\n            const end = new Date(d.getFullYear(), d.getMonth() + 1, 0);\r\n            result.push({\r\n                label: d.toLocaleDateString('en-GB', { month: 'short', year: '2-digit' }),\r\n                year: d.getFullYear(), month: d.getMonth(),\r\n                start: d, end,\r\n            });\r\n        }\r\n        return result;\r\n    }, [timelineItems.length]);\r\n\r\n    const totalDays = months.length > 0\r\n        ? Math.ceil((months[months.length - 1].end.getTime() - months[0].start.getTime()) / (1000 * 60 * 60 * 24))\r\n        : 1;\r\n    const timelineStart = months.length > 0 ? months[0].start.getTime() : Date.now();\r\n\r\n    const getPosition = (dateStr: string) => {\r\n        const d = new Date(dateStr).getTime();\r\n        const days = (d - timelineStart) / (1000 * 60 * 60 * 24);\r\n        return Math.max(0, Math.min(100, (days / totalDays) * 100));\r\n    };\r\n\r\n    // Group by venture\r\n    const ventureGroups = useMemo(() => {\r\n        const groups: Record<string, typeof timelineItems> = {};\r\n        timelineItems.forEach(item => {\r\n            if (!groups[item.ventureId]) groups[item.ventureId] = [];\r\n            groups[item.ventureId].push(item);\r\n        });\r\n        return Object.entries(groups).map(([ventureId, items]) => ({\r\n            ventureId,\r\n            ventureName: items[0].ventureName,\r\n            ventureColor: items[0].ventureColor,\r\n            venturePrefix: items[0].venturePrefix,\r\n            items,\r\n        }));\r\n    }, [timelineItems]);\r\n\r\n    const today = new Date();\r\n    const todayPos = getPosition(today.toISOString());\r\n\r\n    return (\r\n        <div>\r\n            <div style={{\r\n                display: 'flex', alignItems: 'center', justifyContent: 'space-between',\r\n                marginBottom: 'var(--space-5)',\r\n            }}>\r\n                <div>\r\n                    <h2 style={{ fontSize: 'var(--font-size-xl)', fontWeight: 700, color: 'var(--color-text-primary)', marginBottom: 4 }}>\r\n                        <Calendar size={20} style={{ display: 'inline', marginRight: 8, verticalAlign: 'middle' }} />\r\n                        Portfolio Timeline\r\n                    </h2>\r\n                    <p style={{ fontSize: 'var(--font-size-sm)', color: 'var(--color-text-muted)' }}>\r\n                        {timelineItems.filter(i => i.type === 'milestone').length} milestones ┬À {timelineItems.filter(i => i.type === 'task').length} dated tasks\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Timeline Header ÔÇö Months */}\r\n            <div className=\"card card-body\" style={{ overflowX: 'auto', padding: 0 }}>\r\n                <div style={{ minWidth: 900 }}>\r\n                    {/* Month labels */}\r\n                    <div style={{\r\n                        display: 'flex', borderBottom: '1px solid var(--border-color)',\r\n                        position: 'relative',\r\n                    }}>\r\n                        {months.map((m, i) => (\r\n                            <div key={i} style={{\r\n                                flex: 1, textAlign: 'center',\r\n                                padding: 'var(--space-3)',\r\n                                fontSize: 'var(--font-size-xs)',\r\n                                fontWeight: 600,\r\n                                color: 'var(--color-text-secondary)',\r\n                                borderRight: '1px solid var(--border-color)',\r\n                            }}>\r\n                                {m.label}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Today indicator */}\r\n                    <div style={{ position: 'relative' }}>\r\n                        <div style={{\r\n                            position: 'absolute', left: `${todayPos}%`, top: 0, bottom: 0,\r\n                            width: 2, background: 'var(--color-accent-primary)',\r\n                            zIndex: 10, opacity: 0.6,\r\n                        }} />\r\n                        <div style={{\r\n                            position: 'absolute', left: `${todayPos}%`, top: -2,\r\n                            transform: 'translateX(-50%)',\r\n                            fontSize: 'var(--font-size-xs)', fontWeight: 600,\r\n                            color: 'var(--color-accent-primary)',\r\n                            background: 'var(--color-bg-card)', padding: '0 4px',\r\n                            zIndex: 11,\r\n                        }}>\r\n                            Today\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Venture rows */}\r\n                    {ventureGroups.map((group, gi) => (\r\n                        <motion.div\r\n                            key={group.ventureId}\r\n                            initial={{ opacity: 0, x: -10 }}\r\n                            animate={{ opacity: 1, x: 0 }}\r\n                            transition={{ delay: gi * 0.05 }}\r\n                            style={{\r\n                                display: 'flex', alignItems: 'center',\r\n                                borderBottom: '1px solid var(--border-color)',\r\n                                minHeight: 56,\r\n                            }}\r\n                        >\r\n                            {/* Venture label */}\r\n                            <div style={{\r\n                                width: 120, flexShrink: 0, padding: 'var(--space-2) var(--space-3)',\r\n                                display: 'flex', alignItems: 'center', gap: 6,\r\n                                borderRight: '1px solid var(--border-color)',\r\n                            }}>\r\n                                <span style={{\r\n                                    width: 24, height: 24, borderRadius: 'var(--border-radius-sm)',\r\n                                    background: group.ventureColor, display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                                    color: '#fff', fontWeight: 700, fontSize: 9, flexShrink: 0,\r\n                                }}>\r\n                                    {group.venturePrefix}\r\n                                </span>\r\n                                <span style={{\r\n                                    fontSize: 'var(--font-size-xs)', fontWeight: 600,\r\n                                    color: 'var(--color-text-secondary)',\r\n                                    overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap',\r\n                                }}>\r\n                                    {group.ventureName}\r\n                                </span>\r\n                            </div>\r\n\r\n                            {/* Timeline bar */}\r\n                            <div style={{ flex: 1, position: 'relative', height: '100%', padding: '8px 0' }}>\r\n                                {group.items.map(item => {\r\n                                    const left = getPosition(item.date);\r\n                                    const isMilestone = item.type === 'milestone';\r\n                                    const isPast = new Date(item.date) < today;\r\n                                    const isDone = item.status === 'done' || (item.progress !== undefined && item.progress >= 100);\r\n\r\n                                    return (\r\n                                        <div\r\n                                            key={item.id}\r\n                                            title={`${item.title}\\n${new Date(item.date).toLocaleDateString('en-GB')}`}\r\n                                            style={{\r\n                                                position: 'absolute',\r\n                                                left: `${left}%`,\r\n                                                top: '50%',\r\n                                                transform: 'translate(-50%, -50%)',\r\n                                                cursor: 'pointer',\r\n                                            }}\r\n                                        >\r\n                                            {isMilestone ? (\r\n                                                <div style={{\r\n                                                    width: 14, height: 14, borderRadius: 3,\r\n                                                    background: isDone ? 'var(--color-success)' : group.ventureColor,\r\n                                                    transform: 'rotate(45deg)',\r\n                                                    border: `2px solid ${isDone ? 'var(--color-success)' : isPast ? 'var(--color-warning)' : group.ventureColor}`,\r\n                                                    opacity: isDone ? 0.7 : 1,\r\n                                                }} />\r\n                                            ) : (\r\n                                                <div style={{\r\n                                                    width: 10, height: 10, borderRadius: '50%',\r\n                                                    background: isDone ? 'var(--color-success)' :\r\n                                                        item.status === 'blocked' ? 'var(--color-danger)' :\r\n                                                            item.status === 'in-progress' ? 'var(--color-info)' :\r\n                                                                group.ventureColor,\r\n                                                    opacity: isDone ? 0.5 : isPast && !isDone ? 0.9 : 1,\r\n                                                    border: isPast && !isDone ? '2px solid var(--color-warning)' : 'none',\r\n                                                }} />\r\n                                            )}\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </motion.div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Legend */}\r\n            <div style={{\r\n                display: 'flex', gap: 'var(--space-5)', marginTop: 'var(--space-4)',\r\n                fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)',\r\n            }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\r\n                    <div style={{ width: 10, height: 10, borderRadius: 2, background: 'var(--color-accent-primary)', transform: 'rotate(45deg)' }} />\r\n                    Milestone\r\n                </div>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\r\n                    <div style={{ width: 8, height: 8, borderRadius: '50%', background: 'var(--color-info)' }} />\r\n                    Task\r\n                </div>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\r\n                    <div style={{ width: 8, height: 8, borderRadius: '50%', background: 'var(--color-success)' }} />\r\n                    Done\r\n                </div>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\r\n                    <div style={{ width: 8, height: 8, borderRadius: '50%', background: 'var(--color-danger)' }} />\r\n                    Blocked\r\n                </div>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\r\n                    <div style={{ width: 8, height: 8, borderRadius: '50%', border: '2px solid var(--color-warning)' }} />\r\n                    Overdue\r\n                </div>\r\n            </div>\r\n\r\n            {/* Upcoming List */}\r\n            <div style={{ marginTop: 'var(--space-6)' }}>\r\n                <h3 style={{ fontSize: 'var(--font-size-md)', fontWeight: 600, color: 'var(--color-text-primary)', marginBottom: 'var(--space-3)' }}>\r\n                    Upcoming Deadlines\r\n                </h3>\r\n                <div className=\"card card-body\" style={{ padding: 0 }}>\r\n                    {timelineItems\r\n                        .filter(i => new Date(i.date) >= today && i.status !== 'done')\r\n                        .slice(0, 12)\r\n                        .map(item => {\r\n                            const daysUntil = Math.ceil((new Date(item.date).getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\r\n                            return (\r\n                                <div key={item.id} style={{\r\n                                    display: 'flex', alignItems: 'center', gap: 'var(--space-3)',\r\n                                    padding: 'var(--space-3) var(--space-4)',\r\n                                    borderBottom: '1px solid var(--border-color)',\r\n                                }}>\r\n                                    <span style={{\r\n                                        width: 8, height: 8, borderRadius: item.type === 'milestone' ? 2 : '50%',\r\n                                        background: item.ventureColor, flexShrink: 0,\r\n                                        transform: item.type === 'milestone' ? 'rotate(45deg)' : 'none',\r\n                                    }} />\r\n                                    <span style={{\r\n                                        width: 28, height: 20, borderRadius: 'var(--border-radius-sm)',\r\n                                        background: item.ventureColor, display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                                        color: '#fff', fontWeight: 700, fontSize: 8, flexShrink: 0,\r\n                                    }}>\r\n                                        {item.venturePrefix}\r\n                                    </span>\r\n                                    <span style={{ flex: 1, fontSize: 'var(--font-size-sm)', color: 'var(--color-text-secondary)' }}>\r\n                                        {item.title}\r\n                                    </span>\r\n                                    <span style={{\r\n                                        fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)',\r\n                                    }}>\r\n                                        {new Date(item.date).toLocaleDateString('en-GB', { day: 'numeric', month: 'short' })}\r\n                                    </span>\r\n                                    <span style={{\r\n                                        fontSize: 'var(--font-size-xs)', fontWeight: 600,\r\n                                        color: daysUntil <= 7 ? 'var(--color-warning)' : 'var(--color-text-muted)',\r\n                                        padding: '1px 8px', borderRadius: 'var(--border-radius-full)',\r\n                                        background: daysUntil <= 7 ? 'var(--color-warning-bg)' : 'var(--color-bg-tertiary)',\r\n                                    }}>\r\n                                        {daysUntil === 0 ? 'Today' : daysUntil === 1 ? 'Tomorrow' : `${daysUntil}d`}\r\n                                    </span>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\VentureCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\VentureComparisons.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronDown' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":33,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ChevronDown"},"fix":{"range":[327,340],"text":""},"desc":"Remove unused variable \"ChevronDown\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":45,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TrendingUp"},"fix":{"range":[340,352],"text":""},"desc":"Remove unused variable \"TrendingUp\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":52,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Users"},"fix":{"range":[352,359],"text":""},"desc":"Remove unused variable \"Users\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle2' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":66,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CheckCircle2"},"fix":{"range":[359,373],"text":""},"desc":"Remove unused variable \"CheckCircle2\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":68,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":81,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AlertTriangle"},"fix":{"range":[373,388],"text":""},"desc":"Remove unused variable \"AlertTriangle\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// Venture Comparisons ÔÇö Side-by-side analytics\r\n// ============================================================\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport { useStore } from '../lib/store';\r\nimport { motion } from 'framer-motion';\r\nimport { GitCompare, ChevronDown, TrendingUp, Users, CheckCircle2, AlertTriangle } from 'lucide-react';\r\n\r\nexport default function VentureComparisons() {\r\n    const { state, venturesWithStats } = useStore();\r\n    const [selectedA, setSelectedA] = useState<string>(state.ventures[0]?.id || '');\r\n    const [selectedB, setSelectedB] = useState<string>(state.ventures[1]?.id || '');\r\n\r\n    const ventureA = venturesWithStats.find(v => v.id === selectedA);\r\n    const ventureB = venturesWithStats.find(v => v.id === selectedB);\r\n\r\n    const metrics = useMemo(() => {\r\n        if (!ventureA || !ventureB) return [];\r\n        return [\r\n            { label: 'Health Score', a: ventureA.healthScore, b: ventureB.healthScore, format: (v: number) => `${v}%`, higherBetter: true },\r\n            { label: 'Total Tasks', a: ventureA.tasks.total, b: ventureB.tasks.total, format: (v: number) => `${v}`, higherBetter: false },\r\n            { label: 'Done Tasks', a: ventureA.tasks.done, b: ventureB.tasks.done, format: (v: number) => `${v}`, higherBetter: true },\r\n            { label: 'In Progress', a: ventureA.tasks.inProgress, b: ventureB.tasks.inProgress, format: (v: number) => `${v}`, higherBetter: true },\r\n            { label: 'Blocked', a: ventureA.tasks.blocked, b: ventureB.tasks.blocked, format: (v: number) => `${v}`, higherBetter: false },\r\n            { label: 'Completion Rate', a: ventureA.tasks.total ? Math.round((ventureA.tasks.done / ventureA.tasks.total) * 100) : 0, b: ventureB.tasks.total ? Math.round((ventureB.tasks.done / ventureB.tasks.total) * 100) : 0, format: (v: number) => `${v}%`, higherBetter: true },\r\n            { label: 'Team Filled', a: ventureA.team.filled, b: ventureB.team.filled, format: (v: number) => `${v}`, higherBetter: true },\r\n            { label: 'Team Capacity', a: ventureA.team.total, b: ventureB.team.total, format: (v: number) => `${v}`, higherBetter: false },\r\n            { label: 'Milestones', a: ventureA.milestones.length, b: ventureB.milestones.length, format: (v: number) => `${v}`, higherBetter: true },\r\n            { label: 'Registrations Done', a: ventureA.regs.completedCount, b: ventureB.regs.completedCount, format: (v: number) => `${v}/${ventureA.regs.totalCount}`, higherBetter: true },\r\n            { label: 'GitHub Commits (7d)', a: ventureA.github?.commits_7d || 0, b: ventureB.github?.commits_7d || 0, format: (v: number) => `${v}`, higherBetter: true },\r\n            { label: 'Open PRs', a: ventureA.github?.prs_open || 0, b: ventureB.github?.prs_open || 0, format: (v: number) => `${v}`, higherBetter: false },\r\n        ];\r\n    }, [ventureA, ventureB]);\r\n\r\n    const getWinner = (a: number, b: number, higherBetter: boolean) => {\r\n        if (a === b) return 'tie';\r\n        if (higherBetter) return a > b ? 'a' : 'b';\r\n        return a < b ? 'a' : 'b';\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div style={{ marginBottom: 'var(--space-5)' }}>\r\n                <h2 style={{ fontSize: 'var(--font-size-xl)', fontWeight: 700, color: 'var(--color-text-primary)', marginBottom: 4 }}>\r\n                    <GitCompare size={20} style={{ display: 'inline', marginRight: 8, verticalAlign: 'middle' }} />\r\n                    Venture Comparison\r\n                </h2>\r\n                <p style={{ fontSize: 'var(--font-size-sm)', color: 'var(--color-text-muted)' }}>\r\n                    Side-by-side analytics for any two ventures\r\n                </p>\r\n            </div>\r\n\r\n            {/* Selectors */}\r\n            <div style={{\r\n                display: 'grid', gridTemplateColumns: '1fr auto 1fr', gap: 'var(--space-4)',\r\n                alignItems: 'center', marginBottom: 'var(--space-6)',\r\n            }}>\r\n                <div className=\"card card-body\" style={{\r\n                    textAlign: 'center', padding: 'var(--space-4)',\r\n                    borderTop: `3px solid ${ventureA?.color || '#666'}`,\r\n                }}>\r\n                    <select className=\"form-select\" style={{ textAlign: 'center', fontWeight: 600, fontSize: 'var(--font-size-md)' }}\r\n                        value={selectedA} onChange={e => setSelectedA(e.target.value)}>\r\n                        {state.ventures.map(v => <option key={v.id} value={v.id}>{v.prefix} ÔÇö {v.name}</option>)}\r\n                    </select>\r\n                    {ventureA && (\r\n                        <div style={{\r\n                            fontSize: '2.5rem', fontWeight: 800, marginTop: 'var(--space-3)',\r\n                            background: `linear-gradient(135deg, ${ventureA.color}, ${ventureA.color}88)`,\r\n                            WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent',\r\n                        }}>\r\n                            {ventureA.healthScore}%\r\n                        </div>\r\n                    )}\r\n                    <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)' }}>Health Score</div>\r\n                </div>\r\n\r\n                <div style={{\r\n                    width: 48, height: 48, borderRadius: '50%',\r\n                    background: 'var(--color-bg-tertiary)',\r\n                    display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                    fontWeight: 700, color: 'var(--color-text-muted)',\r\n                }}>\r\n                    VS\r\n                </div>\r\n\r\n                <div className=\"card card-body\" style={{\r\n                    textAlign: 'center', padding: 'var(--space-4)',\r\n                    borderTop: `3px solid ${ventureB?.color || '#666'}`,\r\n                }}>\r\n                    <select className=\"form-select\" style={{ textAlign: 'center', fontWeight: 600, fontSize: 'var(--font-size-md)' }}\r\n                        value={selectedB} onChange={e => setSelectedB(e.target.value)}>\r\n                        {state.ventures.map(v => <option key={v.id} value={v.id}>{v.prefix} ÔÇö {v.name}</option>)}\r\n                    </select>\r\n                    {ventureB && (\r\n                        <div style={{\r\n                            fontSize: '2.5rem', fontWeight: 800, marginTop: 'var(--space-3)',\r\n                            background: `linear-gradient(135deg, ${ventureB.color}, ${ventureB.color}88)`,\r\n                            WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent',\r\n                        }}>\r\n                            {ventureB.healthScore}%\r\n                        </div>\r\n                    )}\r\n                    <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)' }}>Health Score</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Metrics comparison */}\r\n            <div className=\"card card-body\" style={{ padding: 0 }}>\r\n                <div style={{\r\n                    display: 'grid', gridTemplateColumns: '100px 1fr 150px 1fr 100px',\r\n                    padding: 'var(--space-3) var(--space-4)', borderBottom: '1px solid var(--border-color)',\r\n                    fontSize: 'var(--font-size-xs)', fontWeight: 600, color: 'var(--color-text-muted)',\r\n                }}>\r\n                    <span style={{ textAlign: 'right' }}>{ventureA?.prefix || 'A'}</span>\r\n                    <span></span>\r\n                    <span style={{ textAlign: 'center' }}>Metric</span>\r\n                    <span></span>\r\n                    <span>{ventureB?.prefix || 'B'}</span>\r\n                </div>\r\n\r\n                {metrics.map((m, i) => {\r\n                    const winner = getWinner(m.a, m.b, m.higherBetter);\r\n                    const maxVal = Math.max(m.a, m.b, 1);\r\n                    return (\r\n                        <motion.div key={m.label}\r\n                            initial={{ opacity: 0 }} animate={{ opacity: 1 }}\r\n                            transition={{ delay: i * 0.04 }}\r\n                            style={{\r\n                                display: 'grid', gridTemplateColumns: '100px 1fr 150px 1fr 100px',\r\n                                alignItems: 'center', padding: 'var(--space-3) var(--space-4)',\r\n                                borderBottom: '1px solid var(--border-color)',\r\n                            }}\r\n                        >\r\n                            {/* Value A */}\r\n                            <span style={{\r\n                                textAlign: 'right', fontWeight: 600,\r\n                                color: winner === 'a' ? 'var(--color-success)' : 'var(--color-text-secondary)',\r\n                                fontSize: 'var(--font-size-sm)',\r\n                            }}>\r\n                                {m.format(m.a)}\r\n                            </span>\r\n\r\n                            {/* Bar A (right-aligned) */}\r\n                            <div style={{ display: 'flex', justifyContent: 'flex-end', padding: '0 8px' }}>\r\n                                <div style={{\r\n                                    width: `${(m.a / maxVal) * 100}%`,\r\n                                    height: 8, borderRadius: 4,\r\n                                    background: winner === 'a'\r\n                                        ? `linear-gradient(90deg, transparent, ${ventureA?.color || '#6366F1'})`\r\n                                        : `linear-gradient(90deg, transparent, var(--color-bg-tertiary))`,\r\n                                    minWidth: m.a > 0 ? 4 : 0,\r\n                                }} />\r\n                            </div>\r\n\r\n                            {/* Label */}\r\n                            <span style={{\r\n                                textAlign: 'center', fontSize: 'var(--font-size-xs)',\r\n                                color: 'var(--color-text-muted)', fontWeight: 500,\r\n                            }}>\r\n                                {m.label}\r\n                            </span>\r\n\r\n                            {/* Bar B (left-aligned) */}\r\n                            <div style={{ display: 'flex', justifyContent: 'flex-start', padding: '0 8px' }}>\r\n                                <div style={{\r\n                                    width: `${(m.b / maxVal) * 100}%`,\r\n                                    height: 8, borderRadius: 4,\r\n                                    background: winner === 'b'\r\n                                        ? `linear-gradient(270deg, transparent, ${ventureB?.color || '#6366F1'})`\r\n                                        : `linear-gradient(270deg, transparent, var(--color-bg-tertiary))`,\r\n                                    minWidth: m.b > 0 ? 4 : 0,\r\n                                }} />\r\n                            </div>\r\n\r\n                            {/* Value B */}\r\n                            <span style={{\r\n                                fontWeight: 600,\r\n                                color: winner === 'b' ? 'var(--color-success)' : 'var(--color-text-secondary)',\r\n                                fontSize: 'var(--font-size-sm)',\r\n                            }}>\r\n                                {m.format(m.b)}\r\n                            </span>\r\n                        </motion.div>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* Summary */}\r\n            {ventureA && ventureB && (\r\n                <div style={{\r\n                    display: 'grid', gridTemplateColumns: '1fr 1fr',\r\n                    gap: 'var(--space-4)', marginTop: 'var(--space-6)',\r\n                }}>\r\n                    {[ventureA, ventureB].map(v => (\r\n                        <div key={v.id} className=\"card card-body\" style={{ borderTop: `3px solid ${v.color}` }}>\r\n                            <h3 style={{ fontSize: 'var(--font-size-md)', fontWeight: 600, marginBottom: 'var(--space-3)' }}>\r\n                                {v.name}\r\n                            </h3>\r\n                            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 'var(--space-2)', fontSize: 'var(--font-size-sm)' }}>\r\n                                <div>\r\n                                    <span style={{ color: 'var(--color-text-muted)' }}>Tier: </span>\r\n                                    <span style={{ fontWeight: 600 }}>{v.tier}</span>\r\n                                </div>\r\n                                <div>\r\n                                    <span style={{ color: 'var(--color-text-muted)' }}>Geo: </span>\r\n                                    <span style={{ fontWeight: 600 }}>{v.geo}</span>\r\n                                </div>\r\n                                <div>\r\n                                    <span style={{ color: 'var(--color-text-muted)' }}>Stage: </span>\r\n                                    <span style={{ fontWeight: 600 }}>{v.stage}</span>\r\n                                </div>\r\n                                <div>\r\n                                    <span style={{ color: 'var(--color-text-muted)' }}>Status: </span>\r\n                                    <span style={{ fontWeight: 600 }}>{v.status}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\WeeklyDigest.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingDown' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":35,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TrendingDown"},"fix":{"range":[332,346],"text":""},"desc":"Remove unused variable \"TrendingDown\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":10,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Clock"},"fix":{"range":[375,387],"text":""},"desc":"Remove unused variable \"Clock\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Users"},"fix":{"range":[387,394],"text":""},"desc":"Remove unused variable \"Users\"."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'weekAgo'. Either include it or remove the dependency array.","line":23,"column":8,"nodeType":"ArrayExpression","endLine":23,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [state.tasks, weekAgo]","fix":{"range":[1000,1013],"text":"[state.tasks, weekAgo]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has missing dependencies: 'today' and 'weekAgo'. Either include them or remove the dependency array.","line":43,"column":8,"nodeType":"ArrayExpression","endLine":43,"endColumn":58,"suggestions":[{"desc":"Update the dependencies array to be: [venturesWithStats, state.tasks, state.milestones, weekAgo, today]","fix":{"range":[2172,2222],"text":"[venturesWithStats, state.tasks, state.milestones, weekAgo, today]"}}]},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `state.tasks`, but the source dependencies were [ventureSummaries, portfolioStats, completedThisWeek, newTasksThisWeek, blockedNow, weekLabel]. Inferred different dependency than source.\n\nC:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\WeeklyDigest.tsx:46:32\n  44 |\n  45 |     // Generate digest text\n> 46 |     const digestText = useMemo(() => {\n     |                                ^^^^^^^\n> 47 |         let text = `­ƒôè VENTURE COMMAND CENTER ÔÇö WEEKLY DIGEST\\n`;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 48 |         text += `${weekLabel}\\n\\n`;\n     ÔÇª\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 84 |         return text;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 85 |     }, [ventureSummaries, portfolioStats, completedThisWeek, newTasksThisWeek, blockedNow, weekLabel]);\n     | ^^^^^^ Could not preserve existing manual memoization\n  86 |\n  87 |     const copyToClipboard = () => {\n  88 |         navigator.clipboard.writeText(digestText);","line":46,"column":32,"nodeType":null,"endLine":85,"endColumn":6},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `state.ventures`, but the source dependencies were [ventureSummaries, portfolioStats, completedThisWeek, newTasksThisWeek, blockedNow, weekLabel]. Inferred different dependency than source.\n\nC:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\components\\WeeklyDigest.tsx:46:32\n  44 |\n  45 |     // Generate digest text\n> 46 |     const digestText = useMemo(() => {\n     |                                ^^^^^^^\n> 47 |         let text = `­ƒôè VENTURE COMMAND CENTER ÔÇö WEEKLY DIGEST\\n`;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 48 |         text += `${weekLabel}\\n\\n`;\n     ÔÇª\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 84 |         return text;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 85 |     }, [ventureSummaries, portfolioStats, completedThisWeek, newTasksThisWeek, blockedNow, weekLabel]);\n     | ^^^^^^ Could not preserve existing manual memoization\n  86 |\n  87 |     const copyToClipboard = () => {\n  88 |         navigator.clipboard.writeText(digestText);","line":46,"column":32,"nodeType":null,"endLine":85,"endColumn":6},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has missing dependencies: 'state.tasks' and 'state.ventures'. Either include them or remove the dependency array.","line":85,"column":8,"nodeType":"ArrayExpression","endLine":85,"endColumn":102,"suggestions":[{"desc":"Update the dependencies array to be: [weekLabel, portfolioStats.totalVentures, portfolioStats.avgHealth, completedThisWeek, newTasksThisWeek, blockedNow, ventureSummaries, state.tasks, state.ventures]","fix":{"range":[4223,4317],"text":"[weekLabel, portfolioStats.totalVentures, portfolioStats.avgHealth, completedThisWeek, newTasksThisWeek, blockedNow, ventureSummaries, state.tasks, state.ventures]"}}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// Weekly Digest ÔÇö Auto-generated portfolio summary\r\n// ============================================================\r\n\r\nimport { useMemo } from 'react';\r\nimport { useStore } from '../lib/store';\r\nimport { motion } from 'framer-motion';\r\nimport {\r\n    Mail, TrendingUp, TrendingDown, AlertTriangle, CheckCircle2,\r\n    Clock, Users, Copy, Download\r\n} from 'lucide-react';\r\n\r\nexport default function WeeklyDigest() {\r\n    const { state, venturesWithStats, portfolioStats } = useStore();\r\n\r\n    const today = new Date();\r\n    const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);\r\n    const weekLabel = `${weekAgo.toLocaleDateString('en-GB', { day: 'numeric', month: 'short' })} ÔÇö ${today.toLocaleDateString('en-GB', { day: 'numeric', month: 'short', year: 'numeric' })}`;\r\n\r\n    // Recent activity\r\n    const recentTasks = useMemo(() => {\r\n        return state.tasks.filter(t => new Date(t.updated_at) >= weekAgo);\r\n    }, [state.tasks]);\r\n\r\n    const completedThisWeek = recentTasks.filter(t => t.status === 'done').length;\r\n    const newTasksThisWeek = state.tasks.filter(t => new Date(t.created_at) >= weekAgo).length;\r\n    const blockedNow = state.tasks.filter(t => t.status === 'blocked').length;\r\n\r\n    // Venture summaries\r\n    const ventureSummaries = useMemo(() => {\r\n        return venturesWithStats.map(v => {\r\n            const vTasks = state.tasks.filter(t => t.venture_id === v.id);\r\n            const vDone = vTasks.filter(t => t.status === 'done' && new Date(t.updated_at) >= weekAgo).length;\r\n            const vBlocked = vTasks.filter(t => t.status === 'blocked').length;\r\n            const vInProgress = vTasks.filter(t => t.status === 'in-progress').length;\r\n            const upcomingMilestones = state.milestones\r\n                .filter(m => m.venture_id === v.id && new Date(m.target_date) >= today)\r\n                .sort((a, b) => new Date(a.target_date).getTime() - new Date(b.target_date).getTime())\r\n                .slice(0, 1);\r\n\r\n            return { ...v, vDone, vBlocked, vInProgress, upcomingMilestones };\r\n        }).filter(v => v.tier !== 'Parked');\r\n    }, [venturesWithStats, state.tasks, state.milestones]);\r\n\r\n    // Generate digest text\r\n    const digestText = useMemo(() => {\r\n        let text = `­ƒôè VENTURE COMMAND CENTER ÔÇö WEEKLY DIGEST\\n`;\r\n        text += `${weekLabel}\\n\\n`;\r\n        text += `ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\\n\\n`;\r\n        text += `­ƒôê PORTFOLIO OVERVIEW\\n`;\r\n        text += `ÔÇó ${portfolioStats.totalVentures} ventures tracked\\n`;\r\n        text += `ÔÇó ${completedThisWeek} tasks completed this week\\n`;\r\n        text += `ÔÇó ${newTasksThisWeek} new tasks created\\n`;\r\n        text += `ÔÇó ${blockedNow} tasks currently blocked\\n`;\r\n        text += `ÔÇó Avg health score: ${portfolioStats.avgHealth}%\\n\\n`;\r\n\r\n        text += `ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\\n\\n`;\r\n        text += `­ƒÅó VENTURE UPDATES\\n\\n`;\r\n\r\n        ventureSummaries.forEach(v => {\r\n            const emoji = v.healthScore >= 70 ? '­ƒƒó' : v.healthScore >= 40 ? '­ƒƒí' : '­ƒö┤';\r\n            text += `${emoji} ${v.name} (${v.prefix}) ÔÇö Health: ${v.healthScore}%\\n`;\r\n            text += `   ${v.tier} ┬À ${v.geo} ┬À ${v.stage}\\n`;\r\n            text += `   Done: ${v.vDone} | In Prog: ${v.vInProgress} | Blocked: ${v.vBlocked}\\n`;\r\n            if (v.upcomingMilestones.length > 0) {\r\n                const ms = v.upcomingMilestones[0];\r\n                text += `   ­ƒôî Next milestone: ${ms.name} (${new Date(ms.target_date).toLocaleDateString('en-GB', { day: 'numeric', month: 'short' })})\\n`;\r\n            }\r\n            text += `\\n`;\r\n        });\r\n\r\n        if (blockedNow > 0) {\r\n            text += `ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\\n\\n`;\r\n            text += `ÔÜá´©Å BLOCKERS\\n\\n`;\r\n            state.tasks.filter(t => t.status === 'blocked').forEach(t => {\r\n                const v = state.ventures.find(v => v.id === t.venture_id);\r\n                text += `ÔÇó [${v?.prefix || '?'}] ${t.title}\\n`;\r\n            });\r\n            text += `\\n`;\r\n        }\r\n\r\n        text += `ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\\n`;\r\n        text += `Generated by Venture Command Center\\n`;\r\n        return text;\r\n    }, [ventureSummaries, portfolioStats, completedThisWeek, newTasksThisWeek, blockedNow, weekLabel]);\r\n\r\n    const copyToClipboard = () => {\r\n        navigator.clipboard.writeText(digestText);\r\n    };\r\n\r\n    const downloadDigest = () => {\r\n        const blob = new Blob([digestText], { type: 'text/plain' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `weekly-digest-${today.toISOString().split('T')[0]}.txt`;\r\n        a.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    return (\r\n        <div style={{ maxWidth: 800, margin: '0 auto' }}>\r\n            <div style={{\r\n                display: 'flex', alignItems: 'center', justifyContent: 'space-between',\r\n                marginBottom: 'var(--space-5)',\r\n            }}>\r\n                <div>\r\n                    <h2 style={{ fontSize: 'var(--font-size-xl)', fontWeight: 700, color: 'var(--color-text-primary)', marginBottom: 4 }}>\r\n                        <Mail size={20} style={{ display: 'inline', marginRight: 8, verticalAlign: 'middle' }} />\r\n                        Weekly Digest\r\n                    </h2>\r\n                    <p style={{ fontSize: 'var(--font-size-sm)', color: 'var(--color-text-muted)' }}>{weekLabel}</p>\r\n                </div>\r\n                <div style={{ display: 'flex', gap: 'var(--space-2)' }}>\r\n                    <button className=\"btn btn-secondary btn-sm\" onClick={copyToClipboard}>\r\n                        <Copy size={14} /> Copy\r\n                    </button>\r\n                    <button className=\"btn btn-primary btn-sm\" onClick={downloadDigest}>\r\n                        <Download size={14} /> Download\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* KPI summary */}\r\n            <div className=\"stat-grid\" style={{ marginBottom: 'var(--space-6)' }}>\r\n                {[\r\n                    { label: 'Completed', value: completedThisWeek, icon: CheckCircle2, color: '#10B981' },\r\n                    { label: 'New Tasks', value: newTasksThisWeek, icon: TrendingUp, color: '#3B82F6' },\r\n                    { label: 'Blocked', value: blockedNow, icon: AlertTriangle, color: '#EF4444' },\r\n                    { label: 'Avg Health', value: `${portfolioStats.avgHealth}%`, icon: TrendingUp, color: '#6366F1' },\r\n                ].map((s, i) => (\r\n                    <motion.div key={i} className=\"stat-card\"\r\n                        initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ delay: i * 0.08 }}>\r\n                        <div className=\"stat-card-header\">\r\n                            <span className=\"stat-card-label\">{s.label}</span>\r\n                            <s.icon size={16} color={s.color} />\r\n                        </div>\r\n                        <div className=\"stat-card-value\" style={{ color: s.color }}>{s.value}</div>\r\n                    </motion.div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Venture cards */}\r\n            <h3 style={{ fontSize: 'var(--font-size-md)', fontWeight: 600, marginBottom: 'var(--space-3)', color: 'var(--color-text-primary)' }}>\r\n                Venture Performance\r\n            </h3>\r\n            <div style={{ display: 'grid', gap: 'var(--space-3)', marginBottom: 'var(--space-6)' }}>\r\n                {ventureSummaries.map((v, i) => (\r\n                    <motion.div key={v.id} className=\"card card-body\" style={{\r\n                        display: 'flex', alignItems: 'center', gap: 'var(--space-4)',\r\n                        borderLeft: `3px solid ${v.color}`,\r\n                    }}\r\n                        initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }}\r\n                        transition={{ delay: i * 0.06 }}>\r\n                        <div style={{\r\n                            width: 48, height: 48, borderRadius: 'var(--border-radius-md)',\r\n                            background: `${v.color}18`, display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                            fontWeight: 800, color: v.color, fontSize: 'var(--font-size-lg)', flexShrink: 0,\r\n                        }}>\r\n                            {v.healthScore}\r\n                        </div>\r\n                        <div style={{ flex: 1 }}>\r\n                            <div style={{ fontWeight: 600, color: 'var(--color-text-primary)' }}>{v.name}</div>\r\n                            <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)' }}>\r\n                                {v.tier} ┬À {v.stage}\r\n                            </div>\r\n                        </div>\r\n                        <div style={{ display: 'flex', gap: 'var(--space-3)', fontSize: 'var(--font-size-sm)' }}>\r\n                            <div style={{ textAlign: 'center' }}>\r\n                                <div style={{ fontWeight: 600, color: 'var(--color-success)' }}>{v.vDone}</div>\r\n                                <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)' }}>Done</div>\r\n                            </div>\r\n                            <div style={{ textAlign: 'center' }}>\r\n                                <div style={{ fontWeight: 600, color: 'var(--color-info)' }}>{v.vInProgress}</div>\r\n                                <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)' }}>Active</div>\r\n                            </div>\r\n                            {v.vBlocked > 0 && (\r\n                                <div style={{ textAlign: 'center' }}>\r\n                                    <div style={{ fontWeight: 600, color: 'var(--color-danger)' }}>{v.vBlocked}</div>\r\n                                    <div style={{ fontSize: 'var(--font-size-xs)', color: 'var(--color-text-muted)' }}>Blocked</div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </motion.div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Raw text preview */}\r\n            <h3 style={{ fontSize: 'var(--font-size-md)', fontWeight: 600, marginBottom: 'var(--space-3)', color: 'var(--color-text-primary)' }}>\r\n                Plain Text Preview\r\n            </h3>\r\n            <pre className=\"card card-body\" style={{\r\n                fontFamily: 'monospace', fontSize: 'var(--font-size-xs)',\r\n                whiteSpace: 'pre-wrap', color: 'var(--color-text-secondary)',\r\n                maxHeight: 400, overflowY: 'auto', lineHeight: 1.4,\r\n            }}>\r\n                {digestText}\r\n            </pre>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\counter.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\lib\\seed-data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\lib\\store.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TaskSummaryType' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":122,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":137,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TaskSummaryType"},"fix":{"range":[605,637],"text":""},"desc":"Remove unused variable \"TaskSummaryType\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":120,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":120,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5553,5556],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5553,5556],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'state'. Either include it or remove the dependency array.","line":267,"column":8,"nodeType":"ArrayExpression","endLine":267,"endColumn":246,"suggestions":[{"desc":"Update the dependencies array to be: [state.ventures, state.tasks, state.milestones, state.teamRoles, state.registrations, state.githubStats, state.aiInsights, state.healthSnapshots, state.recurringTasks, state.financials, state.documents, state.risks, state.resourceSharing, state]","fix":{"range":[14819,15057],"text":"[state.ventures, state.tasks, state.milestones, state.teamRoles, state.registrations, state.githubStats, state.aiInsights, state.healthSnapshots, state.recurringTasks, state.financials, state.documents, state.risks, state.resourceSharing, state]"}}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":379,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":379,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// Data Store ÔÇö Local-first state management with Supabase sync\r\n// ============================================================\r\n// Uses React Context + localStorage for offline-first operation.\r\n// When Supabase is configured, data syncs bidirectionally.\r\n// ============================================================\r\n\r\nimport React, { createContext, useContext, useReducer, useEffect, useCallback, type ReactNode } from 'react';\r\nimport type { Venture, Task, Milestone, TeamRole, Registration, GitHubStats, AIInsight, VentureWithStats, TaskSummary as TaskSummaryType, FilterState, ViewKey, HealthSnapshot, RecurringTask, FinancialRecord, VentureDocument, Risk, ResourceSharing } from './types';\r\nimport { computeTaskSummary, computeTeamSummary, computeRegistrationSummary, computeHealthScore } from './utils';\r\nimport { seedVentures, seedTasks, seedMilestones, seedTeamRoles, seedRegistrations, seedGitHubStats, seedFinancials, seedDocuments, seedRisks, seedRecurringTasks, seedResourceSharing, seedHealthSnapshots } from './seed-data';\r\nimport { generateId } from './utils';\r\n\r\n// --- State Shape ---\r\ninterface AppState {\r\n    ventures: Venture[];\r\n    tasks: Task[];\r\n    milestones: Milestone[];\r\n    teamRoles: TeamRole[];\r\n    registrations: Registration[];\r\n    githubStats: GitHubStats[];\r\n    aiInsights: AIInsight[];\r\n    healthSnapshots: HealthSnapshot[];\r\n    recurringTasks: RecurringTask[];\r\n    financials: FinancialRecord[];\r\n    documents: VentureDocument[];\r\n    risks: Risk[];\r\n    resourceSharing: ResourceSharing[];\r\n    filters: FilterState;\r\n    selectedVentureId: string | null;\r\n    activeView: ViewKey;\r\n    sidebarCollapsed: boolean;\r\n    isLoading: boolean;\r\n}\r\n\r\n// --- Actions ---\r\ntype Action =\r\n    | { type: 'SET_VENTURES'; payload: Venture[] }\r\n    | { type: 'ADD_VENTURE'; payload: Venture }\r\n    | { type: 'UPDATE_VENTURE'; payload: Venture }\r\n    | { type: 'DELETE_VENTURE'; payload: string }\r\n    | { type: 'SET_TASKS'; payload: Task[] }\r\n    | { type: 'ADD_TASK'; payload: Task }\r\n    | { type: 'UPDATE_TASK'; payload: Task }\r\n    | { type: 'DELETE_TASK'; payload: string }\r\n    | { type: 'SET_MILESTONES'; payload: Milestone[] }\r\n    | { type: 'ADD_MILESTONE'; payload: Milestone }\r\n    | { type: 'UPDATE_MILESTONE'; payload: Milestone }\r\n    | { type: 'DELETE_MILESTONE'; payload: string }\r\n    | { type: 'SET_TEAM_ROLES'; payload: TeamRole[] }\r\n    | { type: 'ADD_TEAM_ROLE'; payload: TeamRole }\r\n    | { type: 'UPDATE_TEAM_ROLE'; payload: TeamRole }\r\n    | { type: 'SET_REGISTRATIONS'; payload: Registration[] }\r\n    | { type: 'UPDATE_REGISTRATION'; payload: Registration }\r\n    | { type: 'SET_GITHUB_STATS'; payload: GitHubStats[] }\r\n    | { type: 'SET_AI_INSIGHTS'; payload: AIInsight[] }\r\n    | { type: 'ADD_AI_INSIGHT'; payload: AIInsight }\r\n    | { type: 'MARK_INSIGHT_READ'; payload: string }\r\n    | { type: 'SET_FILTERS'; payload: Partial<FilterState> }\r\n    | { type: 'SELECT_VENTURE'; payload: string | null }\r\n    | { type: 'SET_ACTIVE_VIEW'; payload: ViewKey }\r\n    | { type: 'TOGGLE_SIDEBAR' }\r\n    | { type: 'SET_LOADING'; payload: boolean }\r\n    | { type: 'LOAD_STATE'; payload: Partial<AppState> }\r\n    // New feature actions\r\n    | { type: 'SET_HEALTH_SNAPSHOTS'; payload: HealthSnapshot[] }\r\n    | { type: 'ADD_HEALTH_SNAPSHOT'; payload: HealthSnapshot }\r\n    | { type: 'SET_RECURRING_TASKS'; payload: RecurringTask[] }\r\n    | { type: 'ADD_RECURRING_TASK'; payload: RecurringTask }\r\n    | { type: 'UPDATE_RECURRING_TASK'; payload: RecurringTask }\r\n    | { type: 'DELETE_RECURRING_TASK'; payload: string }\r\n    | { type: 'SET_FINANCIALS'; payload: FinancialRecord[] }\r\n    | { type: 'ADD_FINANCIAL'; payload: FinancialRecord }\r\n    | { type: 'DELETE_FINANCIAL'; payload: string }\r\n    | { type: 'SET_DOCUMENTS'; payload: VentureDocument[] }\r\n    | { type: 'ADD_DOCUMENT'; payload: VentureDocument }\r\n    | { type: 'DELETE_DOCUMENT'; payload: string }\r\n    | { type: 'SET_RISKS'; payload: Risk[] }\r\n    | { type: 'ADD_RISK'; payload: Risk }\r\n    | { type: 'UPDATE_RISK'; payload: Risk }\r\n    | { type: 'DELETE_RISK'; payload: string }\r\n    | { type: 'SET_RESOURCE_SHARING'; payload: ResourceSharing[] }\r\n    | { type: 'ADD_RESOURCE_SHARING'; payload: ResourceSharing }\r\n    | { type: 'DELETE_RESOURCE_SHARING'; payload: string };\r\n\r\nconst STORAGE_KEY = 'vcc-state';\r\n\r\nfunction loadFromStorage(): Partial<AppState> | null {\r\n    try {\r\n        const raw = localStorage.getItem(STORAGE_KEY);\r\n        if (raw) return JSON.parse(raw);\r\n    } catch { /* ignore */ }\r\n    return null;\r\n}\r\n\r\nfunction saveToStorage(state: AppState) {\r\n    try {\r\n        const toSave = {\r\n            ventures: state.ventures,\r\n            tasks: state.tasks,\r\n            milestones: state.milestones,\r\n            teamRoles: state.teamRoles,\r\n            registrations: state.registrations,\r\n            githubStats: state.githubStats,\r\n            aiInsights: state.aiInsights,\r\n            healthSnapshots: state.healthSnapshots,\r\n            recurringTasks: state.recurringTasks,\r\n            financials: state.financials,\r\n            documents: state.documents,\r\n            risks: state.risks,\r\n            resourceSharing: state.resourceSharing,\r\n        };\r\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(toSave));\r\n    } catch { /* ignore */ }\r\n}\r\n\r\nconst defaultFilters: FilterState = { tier: 'all', geo: 'all', search: '', sortBy: 'name' };\r\n\r\nfunction getInitialState(): AppState {\r\n    const saved = loadFromStorage() as any;\r\n    return {\r\n        ventures: saved?.ventures?.length ? saved.ventures : seedVentures,\r\n        tasks: saved?.tasks?.length ? saved.tasks : seedTasks,\r\n        milestones: saved?.milestones?.length ? saved.milestones : seedMilestones,\r\n        teamRoles: saved?.teamRoles?.length ? saved.teamRoles : seedTeamRoles,\r\n        registrations: saved?.registrations?.length ? saved.registrations : seedRegistrations,\r\n        githubStats: saved?.githubStats?.length ? saved.githubStats : seedGitHubStats,\r\n        aiInsights: saved?.aiInsights ?? [],\r\n        healthSnapshots: saved?.healthSnapshots?.length ? saved.healthSnapshots : seedHealthSnapshots,\r\n        recurringTasks: saved?.recurringTasks?.length ? saved.recurringTasks : seedRecurringTasks,\r\n        financials: saved?.financials?.length ? saved.financials : seedFinancials,\r\n        documents: saved?.documents?.length ? saved.documents : seedDocuments,\r\n        risks: saved?.risks?.length ? saved.risks : seedRisks,\r\n        resourceSharing: saved?.resourceSharing?.length ? saved.resourceSharing : seedResourceSharing,\r\n        filters: defaultFilters,\r\n        selectedVentureId: null,\r\n        activeView: 'dashboard',\r\n        sidebarCollapsed: false,\r\n        isLoading: false,\r\n    };\r\n}\r\n\r\nfunction reducer(state: AppState, action: Action): AppState {\r\n    switch (action.type) {\r\n        case 'SET_VENTURES': return { ...state, ventures: action.payload };\r\n        case 'ADD_VENTURE': return { ...state, ventures: [...state.ventures, action.payload] };\r\n        case 'UPDATE_VENTURE': return { ...state, ventures: state.ventures.map(v => v.id === action.payload.id ? action.payload : v) };\r\n        case 'DELETE_VENTURE': return { ...state, ventures: state.ventures.filter(v => v.id !== action.payload), selectedVentureId: state.selectedVentureId === action.payload ? null : state.selectedVentureId };\r\n        case 'SET_TASKS': return { ...state, tasks: action.payload };\r\n        case 'ADD_TASK': return { ...state, tasks: [...state.tasks, action.payload] };\r\n        case 'UPDATE_TASK': return { ...state, tasks: state.tasks.map(t => t.id === action.payload.id ? action.payload : t) };\r\n        case 'DELETE_TASK': return { ...state, tasks: state.tasks.filter(t => t.id !== action.payload) };\r\n        case 'SET_MILESTONES': return { ...state, milestones: action.payload };\r\n        case 'ADD_MILESTONE': return { ...state, milestones: [...state.milestones, action.payload] };\r\n        case 'UPDATE_MILESTONE': return { ...state, milestones: state.milestones.map(m => m.id === action.payload.id ? action.payload : m) };\r\n        case 'DELETE_MILESTONE': return { ...state, milestones: state.milestones.filter(m => m.id !== action.payload) };\r\n        case 'SET_TEAM_ROLES': return { ...state, teamRoles: action.payload };\r\n        case 'ADD_TEAM_ROLE': return { ...state, teamRoles: [...state.teamRoles, action.payload] };\r\n        case 'UPDATE_TEAM_ROLE': return { ...state, teamRoles: state.teamRoles.map(r => r.id === action.payload.id ? action.payload : r) };\r\n        case 'SET_REGISTRATIONS': return { ...state, registrations: action.payload };\r\n        case 'UPDATE_REGISTRATION': return { ...state, registrations: state.registrations.map(r => r.id === action.payload.id ? action.payload : r) };\r\n        case 'SET_GITHUB_STATS': return { ...state, githubStats: action.payload };\r\n        case 'SET_AI_INSIGHTS': return { ...state, aiInsights: action.payload };\r\n        case 'ADD_AI_INSIGHT': return { ...state, aiInsights: [action.payload, ...state.aiInsights] };\r\n        case 'MARK_INSIGHT_READ': return { ...state, aiInsights: state.aiInsights.map(i => i.id === action.payload ? { ...i, is_read: true } : i) };\r\n        case 'SET_FILTERS': return { ...state, filters: { ...state.filters, ...action.payload } };\r\n        case 'SELECT_VENTURE': return { ...state, selectedVentureId: action.payload };\r\n        case 'SET_ACTIVE_VIEW': return { ...state, activeView: action.payload };\r\n        case 'TOGGLE_SIDEBAR': return { ...state, sidebarCollapsed: !state.sidebarCollapsed };\r\n        case 'SET_LOADING': return { ...state, isLoading: action.payload };\r\n        case 'LOAD_STATE': return { ...state, ...action.payload };\r\n        // New feature reducers\r\n        case 'SET_HEALTH_SNAPSHOTS': return { ...state, healthSnapshots: action.payload };\r\n        case 'ADD_HEALTH_SNAPSHOT': return { ...state, healthSnapshots: [...state.healthSnapshots, action.payload] };\r\n        case 'SET_RECURRING_TASKS': return { ...state, recurringTasks: action.payload };\r\n        case 'ADD_RECURRING_TASK': return { ...state, recurringTasks: [...state.recurringTasks, action.payload] };\r\n        case 'UPDATE_RECURRING_TASK': return { ...state, recurringTasks: state.recurringTasks.map(r => r.id === action.payload.id ? action.payload : r) };\r\n        case 'DELETE_RECURRING_TASK': return { ...state, recurringTasks: state.recurringTasks.filter(r => r.id !== action.payload) };\r\n        case 'SET_FINANCIALS': return { ...state, financials: action.payload };\r\n        case 'ADD_FINANCIAL': return { ...state, financials: [...state.financials, action.payload] };\r\n        case 'DELETE_FINANCIAL': return { ...state, financials: state.financials.filter(f => f.id !== action.payload) };\r\n        case 'SET_DOCUMENTS': return { ...state, documents: action.payload };\r\n        case 'ADD_DOCUMENT': return { ...state, documents: [...state.documents, action.payload] };\r\n        case 'DELETE_DOCUMENT': return { ...state, documents: state.documents.filter(d => d.id !== action.payload) };\r\n        case 'SET_RISKS': return { ...state, risks: action.payload };\r\n        case 'ADD_RISK': return { ...state, risks: [...state.risks, action.payload] };\r\n        case 'UPDATE_RISK': return { ...state, risks: state.risks.map(r => r.id === action.payload.id ? action.payload : r) };\r\n        case 'DELETE_RISK': return { ...state, risks: state.risks.filter(r => r.id !== action.payload) };\r\n        case 'SET_RESOURCE_SHARING': return { ...state, resourceSharing: action.payload };\r\n        case 'ADD_RESOURCE_SHARING': return { ...state, resourceSharing: [...state.resourceSharing, action.payload] };\r\n        case 'DELETE_RESOURCE_SHARING': return { ...state, resourceSharing: state.resourceSharing.filter(r => r.id !== action.payload) };\r\n        default: return state;\r\n    }\r\n}\r\n\r\n// --- Computed selectors ---\r\nfunction getVentureWithStats(state: AppState, venture: Venture): VentureWithStats {\r\n    const tasks = state.tasks.filter(t => t.venture_id === venture.id);\r\n    const milestones = state.milestones.filter(m => m.venture_id === venture.id);\r\n    const roles = state.teamRoles.filter(r => r.venture_id === venture.id);\r\n    const regs = state.registrations.filter(r => r.venture_id === venture.id);\r\n    const github = state.githubStats.find(g => g.venture_id === venture.id) ?? null;\r\n\r\n    const taskSummary = computeTaskSummary(tasks);\r\n    const teamSummary = computeTeamSummary(roles);\r\n    const regSummary = computeRegistrationSummary(regs);\r\n\r\n    const ventureWithStats: VentureWithStats = {\r\n        ...venture,\r\n        tasks: taskSummary,\r\n        milestones,\r\n        team: teamSummary,\r\n        regs: regSummary,\r\n        github,\r\n        healthScore: 0,\r\n    };\r\n\r\n    ventureWithStats.healthScore = computeHealthScore(ventureWithStats);\r\n    return ventureWithStats;\r\n}\r\n\r\n// --- Context ---\r\ninterface StoreContext {\r\n    state: AppState;\r\n    dispatch: React.Dispatch<Action>;\r\n    // Computed\r\n    venturesWithStats: VentureWithStats[];\r\n    selectedVenture: VentureWithStats | null;\r\n    filteredVentures: VentureWithStats[];\r\n    portfolioStats: {\r\n        totalVentures: number;\r\n        totalTasks: number;\r\n        doneTasks: number;\r\n        blockedTasks: number;\r\n        totalTeam: number;\r\n        filledTeam: number;\r\n        regsComplete: number;\r\n        regsTotal: number;\r\n        avgHealth: number;\r\n    };\r\n    // Actions\r\n    addTask: (task: Omit<Task, 'id' | 'created_at' | 'updated_at'>) => void;\r\n    updateTask: (task: Task) => void;\r\n    deleteTask: (id: string) => void;\r\n    addVenture: (venture: Omit<Venture, 'id' | 'created_at' | 'updated_at'>) => void;\r\n    updateVenture: (venture: Venture) => void;\r\n    addMilestone: (milestone: Omit<Milestone, 'id' | 'created_at' | 'updated_at'>) => void;\r\n    updateMilestone: (milestone: Milestone) => void;\r\n    addInsight: (insight: Omit<AIInsight, 'id' | 'generated_at'>) => void;\r\n    // New feature actions\r\n    addRecurringTask: (task: Omit<RecurringTask, 'id' | 'created_at'>) => void;\r\n    addFinancial: (record: Omit<FinancialRecord, 'id'>) => void;\r\n    addDocument: (doc: Omit<VentureDocument, 'id' | 'added_at'>) => void;\r\n    addRisk: (risk: Omit<Risk, 'id' | 'created_at'>) => void;\r\n    addResourceSharing: (sharing: Omit<ResourceSharing, 'id' | 'created_at'>) => void;\r\n    addHealthSnapshot: (snapshot: Omit<HealthSnapshot, 'id' | 'recorded_at'>) => void;\r\n}\r\n\r\nconst DataContext = createContext<StoreContext | null>(null);\r\n\r\nexport function DataProvider({ children }: { children: ReactNode }) {\r\n    const [state, dispatch] = useReducer(reducer, undefined, getInitialState);\r\n\r\n    // Persist to localStorage on changes\r\n    useEffect(() => {\r\n        saveToStorage(state);\r\n    }, [state.ventures, state.tasks, state.milestones, state.teamRoles, state.registrations, state.githubStats, state.aiInsights, state.healthSnapshots, state.recurringTasks, state.financials, state.documents, state.risks, state.resourceSharing]);\r\n\r\n    // Computed values\r\n    const venturesWithStats = state.ventures.map(v => getVentureWithStats(state, v));\r\n\r\n    const filteredVentures = venturesWithStats.filter(v => {\r\n        if (state.filters.tier !== 'all' && v.tier !== state.filters.tier) return false;\r\n        if (state.filters.geo !== 'all' && v.geo !== state.filters.geo) return false;\r\n        if (state.filters.search) {\r\n            const q = state.filters.search.toLowerCase();\r\n            if (!v.name.toLowerCase().includes(q) && !v.prefix.toLowerCase().includes(q)) return false;\r\n        }\r\n        return true;\r\n    }).sort((a, b) => {\r\n        switch (state.filters.sortBy) {\r\n            case 'health': return b.healthScore - a.healthScore;\r\n            case 'activity': return new Date(b.updated_at).getTime() - new Date(a.updated_at).getTime();\r\n            case 'tasks': return b.tasks.total - a.tasks.total;\r\n            default: return a.name.localeCompare(b.name);\r\n        }\r\n    });\r\n\r\n    const selectedVenture = state.selectedVentureId\r\n        ? venturesWithStats.find(v => v.id === state.selectedVentureId) ?? null\r\n        : null;\r\n\r\n    const portfolioStats = {\r\n        totalVentures: state.ventures.length,\r\n        totalTasks: state.tasks.length,\r\n        doneTasks: state.tasks.filter(t => t.status === 'done').length,\r\n        blockedTasks: state.tasks.filter(t => t.status === 'blocked').length,\r\n        totalTeam: state.teamRoles.length,\r\n        filledTeam: state.teamRoles.filter(r => r.status === 'filled').length,\r\n        regsComplete: state.registrations.filter(r => r.completed).length,\r\n        regsTotal: state.registrations.length,\r\n        avgHealth: venturesWithStats.length > 0\r\n            ? Math.round(venturesWithStats.reduce((s, v) => s + v.healthScore, 0) / venturesWithStats.length)\r\n            : 0,\r\n    };\r\n\r\n    // Action creators\r\n    const now = () => new Date().toISOString();\r\n\r\n    const addTask = useCallback((task: Omit<Task, 'id' | 'created_at' | 'updated_at'>) => {\r\n        dispatch({ type: 'ADD_TASK', payload: { ...task, id: generateId(), created_at: now(), updated_at: now() } as Task });\r\n    }, []);\r\n\r\n    const updateTask = useCallback((task: Task) => {\r\n        dispatch({ type: 'UPDATE_TASK', payload: { ...task, updated_at: now() } });\r\n    }, []);\r\n\r\n    const deleteTask = useCallback((id: string) => {\r\n        dispatch({ type: 'DELETE_TASK', payload: id });\r\n    }, []);\r\n\r\n    const addVenture = useCallback((venture: Omit<Venture, 'id' | 'created_at' | 'updated_at'>) => {\r\n        dispatch({ type: 'ADD_VENTURE', payload: { ...venture, id: generateId(), created_at: now(), updated_at: now() } as Venture });\r\n    }, []);\r\n\r\n    const updateVenture = useCallback((venture: Venture) => {\r\n        dispatch({ type: 'UPDATE_VENTURE', payload: { ...venture, updated_at: now() } });\r\n    }, []);\r\n\r\n    const addMilestone = useCallback((milestone: Omit<Milestone, 'id' | 'created_at' | 'updated_at'>) => {\r\n        dispatch({ type: 'ADD_MILESTONE', payload: { ...milestone, id: generateId(), created_at: now(), updated_at: now() } as Milestone });\r\n    }, []);\r\n\r\n    const updateMilestone = useCallback((milestone: Milestone) => {\r\n        dispatch({ type: 'UPDATE_MILESTONE', payload: { ...milestone, updated_at: now() } });\r\n    }, []);\r\n\r\n    const addInsight = useCallback((insight: Omit<AIInsight, 'id' | 'generated_at'>) => {\r\n        dispatch({ type: 'ADD_AI_INSIGHT', payload: { ...insight, id: generateId(), generated_at: now() } as AIInsight });\r\n    }, []);\r\n\r\n    const addRecurringTask = useCallback((task: Omit<RecurringTask, 'id' | 'created_at'>) => {\r\n        dispatch({ type: 'ADD_RECURRING_TASK', payload: { ...task, id: generateId(), created_at: now() } as RecurringTask });\r\n    }, []);\r\n\r\n    const addFinancial = useCallback((record: Omit<FinancialRecord, 'id'>) => {\r\n        dispatch({ type: 'ADD_FINANCIAL', payload: { ...record, id: generateId() } as FinancialRecord });\r\n    }, []);\r\n\r\n    const addDocument = useCallback((doc: Omit<VentureDocument, 'id' | 'added_at'>) => {\r\n        dispatch({ type: 'ADD_DOCUMENT', payload: { ...doc, id: generateId(), added_at: now() } as VentureDocument });\r\n    }, []);\r\n\r\n    const addRisk = useCallback((risk: Omit<Risk, 'id' | 'created_at'>) => {\r\n        dispatch({ type: 'ADD_RISK', payload: { ...risk, id: generateId(), created_at: now() } as Risk });\r\n    }, []);\r\n\r\n    const addResourceSharing = useCallback((sharing: Omit<ResourceSharing, 'id' | 'created_at'>) => {\r\n        dispatch({ type: 'ADD_RESOURCE_SHARING', payload: { ...sharing, id: generateId(), created_at: now() } as ResourceSharing });\r\n    }, []);\r\n\r\n    const addHealthSnapshot = useCallback((snapshot: Omit<HealthSnapshot, 'id' | 'recorded_at'>) => {\r\n        dispatch({ type: 'ADD_HEALTH_SNAPSHOT', payload: { ...snapshot, id: generateId(), recorded_at: now() } as HealthSnapshot });\r\n    }, []);\r\n\r\n    const value: StoreContext = {\r\n        state, dispatch,\r\n        venturesWithStats, selectedVenture, filteredVentures, portfolioStats,\r\n        addTask, updateTask, deleteTask,\r\n        addVenture, updateVenture,\r\n        addMilestone, updateMilestone,\r\n        addInsight,\r\n        addRecurringTask, addFinancial, addDocument, addRisk, addResourceSharing, addHealthSnapshot,\r\n    };\r\n\r\n    return React.createElement(DataContext.Provider, { value }, children);\r\n}\r\n\r\nexport function useStore(): StoreContext {\r\n    const ctx = useContext(DataContext);\r\n    if (!ctx) throw new Error('useStore must be used within DataProvider');\r\n    return ctx;\r\n}\r\n\r\nexport default DataProvider;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\lib\\supabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\lib\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\main.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\uiade\\.gemini\\antigravity\\scratch\\venture-command-center\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
